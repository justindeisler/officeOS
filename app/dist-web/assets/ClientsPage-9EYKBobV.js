import{r as i,j as e}from"./vendor-react-wuMqdllU.js";import{m as P,z as J,B as K,a as g,L as r,I as m}from"./index-JZoliObr.js";import{C as Q,c as W}from"./card-ByB4Hy19.js";import{D as X,a as Y,b as ee,c as $}from"./dropdown-menu-Dcpzv9fx.js";import{C as U}from"./confirm-delete-dialog-CQVr6K2O.js";import{B as se,a3 as te,O as ae,a4 as ne,z as Z,a5 as ie,r as H,U as re}from"./vendor-icons-CHGo4Fp8.js";import{D as le,a as oe,b as de,c as ce,d as me,e as he}from"./dialog-BM5s3xjO.js";import{T as xe}from"./textarea-CvD7_vDa.js";import{S as ue,a as ge,b as je,c as pe,d as z}from"./select-Btjdd6HG.js";import"./vendor-markdown-C3iCDuOK.js";import"./vendor-recharts-tRgwS7-V.js";import"./vendor-radix-BCh4MJnw.js";import"./vendor-floating-ui-BD6aHMKr.js";import"./vendor-router-Cm8Qzw9U.js";import"./alert-dialog-WF8eNeVO.js";const ve={active:"bg-green-500/10 text-green-500 border-green-500/20",inactive:"bg-gray-500/10 text-gray-500 border-gray-500/20",archived:"bg-red-500/10 text-red-500 border-red-500/20"};function R({client:a,onEdit:j}){const{deleteClient:s}=P(),o=J(a.id),d=o.filter(l=>l.status==="active").length,[x,c]=i.useState(!1),h=()=>{s(a.id),c(!1)};return e.jsxs(Q,{className:"group",children:[e.jsx(W,{className:"p-4",children:e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("h3",{className:"font-medium truncate",children:a.name}),e.jsx(K,{variant:"outline",className:ve[a.status],children:a.status})]}),a.company&&e.jsxs("div",{className:"flex items-center gap-1.5 text-sm text-muted-foreground mb-2",children:[e.jsx(se,{className:"h-3.5 w-3.5"}),e.jsx("span",{className:"truncate",children:a.company})]}),a.email&&e.jsxs("div",{className:"flex items-center gap-1.5 text-sm text-muted-foreground mb-2",children:[e.jsx(te,{className:"h-3.5 w-3.5"}),e.jsx("a",{href:`mailto:${a.email}`,className:"truncate hover:text-foreground transition-colors",children:a.email})]}),e.jsxs("div",{className:"flex items-center gap-3 text-xs text-muted-foreground",children:[e.jsxs("span",{children:[o.length," projects"]}),d>0&&e.jsxs("span",{className:"text-green-500",children:[d," active"]})]})]}),e.jsxs(X,{children:[e.jsx(Y,{asChild:!0,children:e.jsx(g,{variant:"ghost",size:"icon",className:"h-8 w-8 opacity-0 group-hover:opacity-100 transition-opacity",children:e.jsx(ae,{className:"h-4 w-4"})})}),e.jsxs(ee,{align:"end",children:[e.jsxs($,{onClick:()=>j(a),children:[e.jsx(ne,{className:"h-4 w-4 mr-2"}),"Edit"]}),e.jsxs($,{onClick:()=>c(!0),className:"text-destructive focus:text-destructive",children:[e.jsx(Z,{className:"h-4 w-4 mr-2"}),"Delete"]})]})]})]})}),e.jsx(U,{open:x,onOpenChange:c,title:`Delete ${a.name}?`,description:"This will permanently delete the client. This action cannot be undone.",onConfirm:h})]})}function fe({open:a,onOpenChange:j,client:s,onClose:o}){const{addClient:d,updateClient:x,deleteClient:c}=P(),[h,l]=i.useState(""),[u,n]=i.useState(""),[T,N]=i.useState(""),[M,C]=i.useState(""),[B,y]=i.useState(""),[L,D]=i.useState("active"),[b,w]=i.useState(""),[S,F]=i.useState(""),[k,E]=i.useState(""),[O,I]=i.useState("Deutschland"),[_,A]=i.useState(!1),p=!!s;i.useEffect(()=>{var t,f,v,V;s?(l(s.name),n(s.email||""),N(s.company||""),C(s.contactInfo||""),y(s.notes||""),D(s.status),w(((t=s.address)==null?void 0:t.street)||""),F(((f=s.address)==null?void 0:f.zip)||""),E(((v=s.address)==null?void 0:v.city)||""),I(((V=s.address)==null?void 0:V.country)||"Deutschland")):(l(""),n(""),N(""),C(""),y(""),D("active"),w(""),F(""),E(""),I("Deutschland"))},[s,a]);const q=t=>{if(t.preventDefault(),!h.trim())return;const f=b.trim()||S.trim()||k.trim(),v={name:h.trim(),email:u.trim()||void 0,company:T.trim()||void 0,contactInfo:M.trim()||void 0,notes:B.trim()||void 0,status:L,address:f?{street:b.trim()||void 0,zip:S.trim()||void 0,city:k.trim()||void 0,country:O.trim()||"Deutschland"}:void 0};p&&s?x(s.id,v):d(v),o()},G=()=>{s&&(c(s.id),A(!1),o())};return e.jsx(le,{open:a,onOpenChange:j,children:e.jsxs(oe,{className:"w-[calc(100vw-2rem)] max-w-[540px] max-h-[90vh] overflow-y-auto",children:[e.jsxs("form",{onSubmit:q,children:[e.jsxs(de,{children:[e.jsx(ce,{children:p?"Client bearbeiten":"Neuer Client"}),e.jsx(me,{children:p?"Clientdaten aktualisieren.":"Neuen Client für Projekte und Rechnungen anlegen."})]}),e.jsxs("div",{className:"grid gap-4 py-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(r,{htmlFor:"name",children:"Name *"}),e.jsx(m,{id:"name",value:h,onChange:t=>l(t.target.value),placeholder:"Vor- und Nachname oder Firmenname",autoFocus:!0})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(r,{htmlFor:"company",children:"Firma"}),e.jsx(m,{id:"company",value:T,onChange:t=>N(t.target.value),placeholder:"Firmenname (optional)"})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(r,{htmlFor:"email",children:"E-Mail"}),e.jsx(m,{id:"email",type:"email",value:u,onChange:t=>n(t.target.value),placeholder:"client@example.com"})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(r,{htmlFor:"contactInfo",children:"Telefon / Sonstiges"}),e.jsx(m,{id:"contactInfo",value:M,onChange:t=>C(t.target.value),placeholder:"+49 123 456789"})]}),e.jsxs("div",{className:"grid gap-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ie,{className:"h-4 w-4 text-muted-foreground"}),e.jsx(r,{className:"text-sm font-medium",children:"Adresse"})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(r,{htmlFor:"street",className:"text-xs text-muted-foreground",children:"Straße und Hausnummer"}),e.jsx(m,{id:"street",value:b,onChange:t=>w(t.target.value),placeholder:"Musterstraße 1"})]}),e.jsxs("div",{className:"grid grid-cols-[110px_1fr] gap-3",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(r,{htmlFor:"zip",className:"text-xs text-muted-foreground",children:"PLZ"}),e.jsx(m,{id:"zip",value:S,onChange:t=>F(t.target.value),placeholder:"10115",maxLength:10})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(r,{htmlFor:"city",className:"text-xs text-muted-foreground",children:"Stadt"}),e.jsx(m,{id:"city",value:k,onChange:t=>E(t.target.value),placeholder:"Berlin"})]})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(r,{htmlFor:"country",className:"text-xs text-muted-foreground",children:"Land"}),e.jsx(m,{id:"country",value:O,onChange:t=>I(t.target.value),placeholder:"Deutschland"})]})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(r,{htmlFor:"status",children:"Status"}),e.jsxs(ue,{value:L,onValueChange:t=>D(t),children:[e.jsx(ge,{children:e.jsx(je,{})}),e.jsxs(pe,{children:[e.jsx(z,{value:"active",children:"Aktiv"}),e.jsx(z,{value:"inactive",children:"Inaktiv"}),e.jsx(z,{value:"archived",children:"Archiviert"})]})]})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(r,{htmlFor:"notes",children:"Notizen"}),e.jsx(xe,{id:"notes",value:B,onChange:t=>y(t.target.value),placeholder:"Interne Notizen...",rows:3})]})]}),e.jsxs(he,{className:"flex justify-between",children:[p&&e.jsxs(g,{type:"button",variant:"destructive",size:"sm",onClick:()=>A(!0),children:[e.jsx(Z,{className:"h-4 w-4 mr-1"}),"Löschen"]}),e.jsxs("div",{className:"flex gap-2 ml-auto",children:[e.jsx(g,{type:"button",variant:"outline",onClick:o,children:"Abbrechen"}),e.jsx(g,{type:"submit",children:p?"Speichern":"Erstellen"})]})]})]}),e.jsx(U,{open:_,onOpenChange:A,title:`${s==null?void 0:s.name} löschen?`,description:"Der Client wird dauerhaft gelöscht. Diese Aktion kann nicht rückgängig gemacht werden.",onConfirm:G})]})})}function Me(){const{clients:a}=P(),[j,s]=i.useState(!1),[o,d]=i.useState(null),x=()=>{d(null),s(!0)},c=n=>{d(n),s(!0)},h=()=>{s(!1),d(null)},l=a.filter(n=>n.status==="active"),u=a.filter(n=>n.status!=="active");return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:[e.jsx("div",{children:e.jsx("h1",{className:"text-2xl sm:text-3xl font-semibold tracking-tight",children:"Clients"})}),e.jsxs(g,{onClick:x,className:"w-full sm:w-auto",children:[e.jsx(H,{className:"h-4 w-4 mr-2"}),"Add Client"]})]}),a.length===0?e.jsxs("div",{className:"rounded-lg border bg-card p-12 text-center",children:[e.jsx(re,{className:"h-12 w-12 mx-auto text-muted-foreground/50 mb-4"}),e.jsx("h3",{className:"text-lg font-medium mb-2",children:"No clients yet"}),e.jsx("p",{className:"text-muted-foreground text-sm mb-4",children:"Add your first client to start managing projects and invoices."}),e.jsxs(g,{onClick:x,children:[e.jsx(H,{className:"h-4 w-4 mr-2"}),"Add Client"]})]}):e.jsxs("div",{className:"space-y-6",children:[l.length>0&&e.jsxs("div",{children:[e.jsxs("h2",{className:"text-sm font-medium text-muted-foreground mb-3",children:["Active (",l.length,")"]}),e.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:l.map(n=>e.jsx(R,{client:n,onEdit:c},n.id))})]}),u.length>0&&e.jsxs("div",{children:[e.jsxs("h2",{className:"text-sm font-medium text-muted-foreground mb-3",children:["Inactive/Archived (",u.length,")"]}),e.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:u.map(n=>e.jsx(R,{client:n,onEdit:c},n.id))})]})]}),e.jsx(fe,{open:j,onOpenChange:s,client:o,onClose:h})]})}export{Me as ClientsPage};
