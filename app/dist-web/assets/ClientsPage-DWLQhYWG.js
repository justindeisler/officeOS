import{r as n,j as e}from"./vendor-react-nkeu7MKf.js";import{c as J,o as P,M as K,B as Q,E as W,a as g,L as r,I as m,U as X}from"./index-Cgh2aQl7.js";import{C as Y,c as ee}from"./card-CRJ10d8t.js";import{D as se,a as te,b as ae,c as $}from"./dropdown-menu-Wj7ga6n1.js";import{C as U}from"./confirm-delete-dialog-CcLKDJQD.js";import{E as ie}from"./ellipsis-D4-n2iWX.js";import{P as ne}from"./pen-Bx7P8tpw.js";import{T as Z}from"./trash-2-NFb5M8Kz.js";import{D as re,a as le,b as oe,c as de,d as ce,e as me}from"./dialog-BktGOuL8.js";import{T as he}from"./textarea-BTyp2n0b.js";import{S as xe,a as ue,b as ge,c as pe,d as M}from"./select-kNMDNoVB.js";import{M as je}from"./map-pin-CXPPeHc2.js";import{P as H}from"./plus-DcDcA8n9.js";import"./vendor-markdown-zaQAhtrl.js";import"./vendor-recharts-COauwCrp.js";import"./vendor-radix-Oq5tdvA1.js";import"./vendor-floating-ui-_Y3uXdsy.js";import"./vendor-router-bCYKpmtI.js";import"./chevron-right-CfDc1mcL.js";import"./circle-DgCb6KW6.js";import"./alert-dialog-CzRs_amz.js";/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ve=J("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]),fe={active:"bg-green-500/10 text-green-500 border-green-500/20",inactive:"bg-gray-500/10 text-gray-500 border-gray-500/20",archived:"bg-red-500/10 text-red-500 border-red-500/20"};function R({client:a,onEdit:p}){const{deleteClient:s}=P(),o=K(a.id),d=o.filter(l=>l.status==="active").length,[x,c]=n.useState(!1),h=()=>{s(a.id),c(!1)};return e.jsxs(Y,{className:"group",children:[e.jsx(ee,{className:"p-4",children:e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("h3",{className:"font-medium truncate",children:a.name}),e.jsx(Q,{variant:"outline",className:fe[a.status],children:a.status})]}),a.company&&e.jsxs("div",{className:"flex items-center gap-1.5 text-sm text-muted-foreground mb-2",children:[e.jsx(W,{className:"h-3.5 w-3.5"}),e.jsx("span",{className:"truncate",children:a.company})]}),a.email&&e.jsxs("div",{className:"flex items-center gap-1.5 text-sm text-muted-foreground mb-2",children:[e.jsx(ve,{className:"h-3.5 w-3.5"}),e.jsx("a",{href:`mailto:${a.email}`,className:"truncate hover:text-foreground transition-colors",children:a.email})]}),e.jsxs("div",{className:"flex items-center gap-3 text-xs text-muted-foreground",children:[e.jsxs("span",{children:[o.length," projects"]}),d>0&&e.jsxs("span",{className:"text-green-500",children:[d," active"]})]})]}),e.jsxs(se,{children:[e.jsx(te,{asChild:!0,children:e.jsx(g,{variant:"ghost",size:"icon",className:"h-8 w-8 opacity-0 group-hover:opacity-100 transition-opacity",children:e.jsx(ie,{className:"h-4 w-4"})})}),e.jsxs(ae,{align:"end",children:[e.jsxs($,{onClick:()=>p(a),children:[e.jsx(ne,{className:"h-4 w-4 mr-2"}),"Edit"]}),e.jsxs($,{onClick:()=>c(!0),className:"text-destructive focus:text-destructive",children:[e.jsx(Z,{className:"h-4 w-4 mr-2"}),"Delete"]})]})]})]})}),e.jsx(U,{open:x,onOpenChange:c,title:`Delete ${a.name}?`,description:"This will permanently delete the client. This action cannot be undone.",onConfirm:h})]})}function Ne({open:a,onOpenChange:p,client:s,onClose:o}){const{addClient:d,updateClient:x,deleteClient:c}=P(),[h,l]=n.useState(""),[u,i]=n.useState(""),[T,N]=n.useState(""),[z,C]=n.useState(""),[L,y]=n.useState(""),[B,D]=n.useState("active"),[w,b]=n.useState(""),[S,k]=n.useState(""),[E,F]=n.useState(""),[O,I]=n.useState("Deutschland"),[_,A]=n.useState(!1),j=!!s;n.useEffect(()=>{var t,f,v,V;s?(l(s.name),i(s.email||""),N(s.company||""),C(s.contactInfo||""),y(s.notes||""),D(s.status),b(((t=s.address)==null?void 0:t.street)||""),k(((f=s.address)==null?void 0:f.zip)||""),F(((v=s.address)==null?void 0:v.city)||""),I(((V=s.address)==null?void 0:V.country)||"Deutschland")):(l(""),i(""),N(""),C(""),y(""),D("active"),b(""),k(""),F(""),I("Deutschland"))},[s,a]);const q=t=>{if(t.preventDefault(),!h.trim())return;const f=w.trim()||S.trim()||E.trim(),v={name:h.trim(),email:u.trim()||void 0,company:T.trim()||void 0,contactInfo:z.trim()||void 0,notes:L.trim()||void 0,status:B,address:f?{street:w.trim()||void 0,zip:S.trim()||void 0,city:E.trim()||void 0,country:O.trim()||"Deutschland"}:void 0};j&&s?x(s.id,v):d(v),o()},G=()=>{s&&(c(s.id),A(!1),o())};return e.jsx(re,{open:a,onOpenChange:p,children:e.jsxs(le,{className:"w-[calc(100vw-2rem)] max-w-[540px] max-h-[90vh] overflow-y-auto",children:[e.jsxs("form",{onSubmit:q,children:[e.jsxs(oe,{children:[e.jsx(de,{children:j?"Client bearbeiten":"Neuer Client"}),e.jsx(ce,{children:j?"Clientdaten aktualisieren.":"Neuen Client für Projekte und Rechnungen anlegen."})]}),e.jsxs("div",{className:"grid gap-4 py-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(r,{htmlFor:"name",children:"Name *"}),e.jsx(m,{id:"name",value:h,onChange:t=>l(t.target.value),placeholder:"Vor- und Nachname oder Firmenname",autoFocus:!0})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(r,{htmlFor:"company",children:"Firma"}),e.jsx(m,{id:"company",value:T,onChange:t=>N(t.target.value),placeholder:"Firmenname (optional)"})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(r,{htmlFor:"email",children:"E-Mail"}),e.jsx(m,{id:"email",type:"email",value:u,onChange:t=>i(t.target.value),placeholder:"client@example.com"})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(r,{htmlFor:"contactInfo",children:"Telefon / Sonstiges"}),e.jsx(m,{id:"contactInfo",value:z,onChange:t=>C(t.target.value),placeholder:"+49 123 456789"})]}),e.jsxs("div",{className:"grid gap-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(je,{className:"h-4 w-4 text-muted-foreground"}),e.jsx(r,{className:"text-sm font-medium",children:"Adresse"})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(r,{htmlFor:"street",className:"text-xs text-muted-foreground",children:"Straße und Hausnummer"}),e.jsx(m,{id:"street",value:w,onChange:t=>b(t.target.value),placeholder:"Musterstraße 1"})]}),e.jsxs("div",{className:"grid grid-cols-[110px_1fr] gap-3",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(r,{htmlFor:"zip",className:"text-xs text-muted-foreground",children:"PLZ"}),e.jsx(m,{id:"zip",value:S,onChange:t=>k(t.target.value),placeholder:"10115",maxLength:10})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(r,{htmlFor:"city",className:"text-xs text-muted-foreground",children:"Stadt"}),e.jsx(m,{id:"city",value:E,onChange:t=>F(t.target.value),placeholder:"Berlin"})]})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(r,{htmlFor:"country",className:"text-xs text-muted-foreground",children:"Land"}),e.jsx(m,{id:"country",value:O,onChange:t=>I(t.target.value),placeholder:"Deutschland"})]})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(r,{htmlFor:"status",children:"Status"}),e.jsxs(xe,{value:B,onValueChange:t=>D(t),children:[e.jsx(ue,{children:e.jsx(ge,{})}),e.jsxs(pe,{children:[e.jsx(M,{value:"active",children:"Aktiv"}),e.jsx(M,{value:"inactive",children:"Inaktiv"}),e.jsx(M,{value:"archived",children:"Archiviert"})]})]})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(r,{htmlFor:"notes",children:"Notizen"}),e.jsx(he,{id:"notes",value:L,onChange:t=>y(t.target.value),placeholder:"Interne Notizen...",rows:3})]})]}),e.jsxs(me,{className:"flex justify-between",children:[j&&e.jsxs(g,{type:"button",variant:"destructive",size:"sm",onClick:()=>A(!0),children:[e.jsx(Z,{className:"h-4 w-4 mr-1"}),"Löschen"]}),e.jsxs("div",{className:"flex gap-2 ml-auto",children:[e.jsx(g,{type:"button",variant:"outline",onClick:o,children:"Abbrechen"}),e.jsx(g,{type:"submit",children:j?"Speichern":"Erstellen"})]})]})]}),e.jsx(U,{open:_,onOpenChange:A,title:`${s==null?void 0:s.name} löschen?`,description:"Der Client wird dauerhaft gelöscht. Diese Aktion kann nicht rückgängig gemacht werden.",onConfirm:G})]})})}function Re(){const{clients:a}=P(),[p,s]=n.useState(!1),[o,d]=n.useState(null),x=()=>{d(null),s(!0)},c=i=>{d(i),s(!0)},h=()=>{s(!1),d(null)},l=a.filter(i=>i.status==="active"),u=a.filter(i=>i.status!=="active");return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:[e.jsx("div",{children:e.jsx("h1",{className:"text-2xl sm:text-3xl font-semibold tracking-tight",children:"Clients"})}),e.jsxs(g,{onClick:x,className:"w-full sm:w-auto",children:[e.jsx(H,{className:"h-4 w-4 mr-2"}),"Add Client"]})]}),a.length===0?e.jsxs("div",{className:"rounded-lg border bg-card p-12 text-center",children:[e.jsx(X,{className:"h-12 w-12 mx-auto text-muted-foreground/50 mb-4"}),e.jsx("h3",{className:"text-lg font-medium mb-2",children:"No clients yet"}),e.jsx("p",{className:"text-muted-foreground text-sm mb-4",children:"Add your first client to start managing projects and invoices."}),e.jsxs(g,{onClick:x,children:[e.jsx(H,{className:"h-4 w-4 mr-2"}),"Add Client"]})]}):e.jsxs("div",{className:"space-y-6",children:[l.length>0&&e.jsxs("div",{children:[e.jsxs("h2",{className:"text-sm font-medium text-muted-foreground mb-3",children:["Active (",l.length,")"]}),e.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:l.map(i=>e.jsx(R,{client:i,onEdit:c},i.id))})]}),u.length>0&&e.jsxs("div",{children:[e.jsxs("h2",{className:"text-sm font-medium text-muted-foreground mb-3",children:["Inactive/Archived (",u.length,")"]}),e.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:u.map(i=>e.jsx(R,{client:i,onEdit:c},i.id))})]})]}),e.jsx(Ne,{open:p,onOpenChange:s,client:o,onClose:h})]})}export{Re as ClientsPage};
