import{r as a,j as e}from"./vendor-react-DeR5d9Tv.js";import{a as p,X as w,n as g}from"./index-B9wpeZVf.js";import{D as v}from"./download-DMg57E9E.js";import"./vendor-markdown-PIr_2kdo.js";import"./vendor-recharts-DrMJw15s.js";import"./vendor-radix-sPo3_CXI.js";import"./vendor-floating-ui-CESiY8Ey.js";import"./vendor-router-9bGSKQ4q.js";const i=g("InstallPrompt");function P(){const[s,o]=a.useState(null),[f,r]=a.useState(!1),[u,l]=a.useState(!1);a.useEffect(()=>{if(window.matchMedia("(display-mode: standalone)").matches){l(!0);return}const t=localStorage.getItem("pwa-install-dismissed");if(t){const n=parseInt(t,10);if((Date.now()-n)/(1e3*60*60*24)<7)return}const m=n=>{n.preventDefault(),o(n),setTimeout(()=>{r(!0)},3e4)},c=()=>{l(!0),r(!1),o(null)};return window.addEventListener("beforeinstallprompt",m),window.addEventListener("appinstalled",c),()=>{window.removeEventListener("beforeinstallprompt",m),window.removeEventListener("appinstalled",c)}},[]);const h=async()=>{if(s)try{await s.prompt();const{outcome:t}=await s.userChoice;t==="accepted"?i.info("PWA installation accepted"):(i.info("PWA installation dismissed"),localStorage.setItem("pwa-install-dismissed",Date.now().toString())),o(null),r(!1)}catch(t){i.error({err:t},"Error showing install prompt")}},d=()=>{r(!1),localStorage.setItem("pwa-install-dismissed",Date.now().toString())};return u||!f||!s?null:e.jsx("div",{className:"fixed bottom-4 left-4 right-4 md:left-auto md:right-4 md:max-w-md z-50 animate-in slide-in-from-bottom-5",children:e.jsx("div",{className:"bg-card border border-border rounded-lg shadow-lg p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"flex-shrink-0 w-10 h-10 bg-primary/10 rounded-lg flex items-center justify-center",children:e.jsx(v,{className:"w-5 h-5 text-primary"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"font-semibold text-sm mb-1",children:"Install Personal Assistant"}),e.jsx("p",{className:"text-xs text-muted-foreground mb-3",children:"Add to your home screen for quick access and offline functionality"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(p,{size:"sm",onClick:h,className:"flex-1",children:"Install"}),e.jsx(p,{size:"sm",variant:"ghost",onClick:d,children:"Not now"})]})]}),e.jsx("button",{onClick:d,className:"flex-shrink-0 text-muted-foreground hover:text-foreground transition-colors","aria-label":"Dismiss",children:e.jsx(w,{className:"w-4 h-4"})})]})})})}export{P as InstallPrompt};
