const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-DV0Z4ueH.js","assets/core-BDPGcIsz.js","assets/index-CDjnCujr.js","assets/path-E9zjYLSN.js","assets/index-CFrmm5md.js","assets/vendor-react-nkeu7MKf.js","assets/vendor-router-bCYKpmtI.js","assets/index-BBEtvbCd.css"])))=>i.map(i=>d[i]);
var De=Object.defineProperty;var Fe=(n,a,t)=>a in n?De(n,a,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[a]=t;var te=(n,a,t)=>Fe(n,typeof a!="symbol"?a+"":a,t);import{c as L,_ as V,K as H,M as Te,N as re,L as p,I as x,a as b,F as Oe,B as Re,C as Ie,k as u}from"./index-CFrmm5md.js";import{r as j,j as e}from"./vendor-react-nkeu7MKf.js";import{S as ce,a as ne,b as ie,c as le,d as O}from"./select-DkbqEc0Q.js";import{C,a as S,b as B,d as R,c as D}from"./card-DXB8OVk1.js";import{A as Ae,a as Le,b as Me,c as Pe,d as Ue,e as _e,f as Je,g as Ve,h as He}from"./alert-dialog-MnNhu3AN.js";import{getDb as W,getSchemaVersion as $e}from"./db.web-lSIIGn2q.js";import{U as oe}from"./user-BRC1cAfP.js";import{B as ze}from"./building-2-BFntI2b7.js";import{F as We}from"./folder-open-EXwjQQMs.js";import{R as qe}from"./refresh-cw-zFPhcDvz.js";import{D as de}from"./download-BJrX7wzA.js";import{D as Ke}from"./database-ChISyerc.js";import{U as Ye}from"./upload-CNIua_1V.js";import{T as Ge}from"./trash-2-CtFrxKuq.js";import"./vendor-recharts-COauwCrp.js";import"./vendor-markdown-zaQAhtrl.js";import"./vendor-radix-DCQ-pcr5.js";import"./vendor-floating-ui-_Y3uXdsy.js";import"./vendor-router-bCYKpmtI.js";import"./check-DOh5kBag.js";/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xe=L("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qe=L("FileDown",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M12 18v-6",key:"17g6i2"}],["path",{d:"m9 15 3 3 3-3",key:"1npd3o"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ze=L("HardDrive",[["line",{x1:"22",x2:"2",y1:"12",y2:"12",key:"1y58io"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}],["line",{x1:"6",x2:"6.01",y1:"16",y2:"16",key:"sgf278"}],["line",{x1:"10",x2:"10.01",y1:"16",y2:"16",key:"1l4acy"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const es=L("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ue=L("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);function J(){return typeof window<"u"&&"__TAURI__"in window&&!!window.__TAURI__}let U=null,_=null;async function pe(){if(!J())throw new Error("Tauri modules not available in web environment");if(!U||!_){const[n,a]=await Promise.all([V(()=>import("./index-DV0Z4ueH.js"),__vite__mapDeps([0,1])),V(()=>import("./index-CDjnCujr.js"),__vite__mapDeps([2,3,1]))]);U=n,_=a}return{save:U.save,open:U.open,writeTextFile:_.writeTextFile,readTextFile:_.readTextFile}}function ss(n,a){const t=new Blob([n],{type:"application/json"}),r=URL.createObjectURL(t),o=document.createElement("a");o.href=r,o.download=a,document.body.appendChild(o),o.click(),document.body.removeChild(o),URL.revokeObjectURL(r)}function as(){return new Promise(n=>{const a=document.createElement("input");a.type="file",a.accept=".json",a.onchange=async t=>{var m;const r=(m=t.target.files)==null?void 0:m[0];if(!r){n(null);return}const o=await r.text();n(o)},a.oncancel=()=>n(null),a.click()})}function me(n){let a=0;for(let t=0;t<n.length;t++){const r=n.charCodeAt(t);a=(a<<5)-a+r,a=a&a}return`hash:${Math.abs(a).toString(16)}`}class ts{constructor(){te(this,"APP_VERSION","1.0.0")}async exportBackup(){try{const a=await W(),t=await $e(),[r,o,m,l,c,d,N]=await Promise.all([a.select("SELECT * FROM clients"),a.select("SELECT * FROM projects"),a.select("SELECT * FROM tasks"),a.select("SELECT * FROM time_entries"),a.select("SELECT * FROM invoices"),a.select("SELECT * FROM captures"),a.select("SELECT * FROM settings")]),y={version:this.APP_VERSION,exportedAt:new Date().toISOString(),schemaVersion:t,data:{clients:r,projects:o,tasks:m,time_entries:l,invoices:c,captures:d,settings:N}},F=JSON.stringify(y.data),w=me(F),T={...y,checksum:w},E=`personal-assistant-backup-${new Date().toISOString().split("T")[0]}.json`,I=JSON.stringify(T,null,2);if(J()){const{save:M,writeTextFile:P}=await pe(),A=await M({defaultPath:E,filters:[{name:"JSON",extensions:["json"]}]});return A?(await P(A,I),{success:!0,filePath:A}):{success:!1,error:"Export cancelled"}}else return ss(I,E),{success:!0,filePath:E}}catch(a){return console.error("Backup export failed:",a),{success:!1,error:a instanceof Error?a.message:"Export failed"}}}async importBackup(){try{let a;if(J()){const{open:d,readTextFile:N}=await pe(),y=await d({filters:[{name:"JSON",extensions:["json"]}],multiple:!1});if(!y||Array.isArray(y))return{success:!1,error:"Import cancelled"};a=await N(y)}else a=await as();if(!a)return{success:!1,error:"Import cancelled"};const t=JSON.parse(a),r=this.validateBackup(t);if(r)return{success:!1,error:r};const o=JSON.stringify(t.data);if(me(o)!==t.checksum)return{success:!1,error:"Backup file is corrupted (checksum mismatch)"};const l=await W();await l.execute("DELETE FROM captures"),await l.execute("DELETE FROM time_entries"),await l.execute("DELETE FROM invoices"),await l.execute("DELETE FROM tasks"),await l.execute("DELETE FROM projects"),await l.execute("DELETE FROM clients"),await l.execute("DELETE FROM settings");let c=0;for(const d of t.data.clients)await this.insertRecord(l,"clients",d),c++;for(const d of t.data.projects)await this.insertRecord(l,"projects",d),c++;for(const d of t.data.tasks)await this.insertRecord(l,"tasks",d),c++;for(const d of t.data.time_entries)await this.insertRecord(l,"time_entries",d),c++;for(const d of t.data.invoices)await this.insertRecord(l,"invoices",d),c++;for(const d of t.data.captures)await this.insertRecord(l,"captures",d),c++;for(const d of t.data.settings)await this.insertRecord(l,"settings",d),c++;return{success:!0,stats:{tables:7,records:c}}}catch(a){return console.error("Backup import failed:",a),{success:!1,error:a instanceof Error?a.message:"Import failed"}}}validateBackup(a){if(!a||typeof a!="object")return"Invalid backup file format";const t=a;if(!t.version||typeof t.version!="string")return"Missing or invalid version";if(!t.exportedAt||typeof t.exportedAt!="string")return"Missing or invalid export date";if(typeof t.schemaVersion!="number")return"Missing or invalid schema version";if(!t.data||typeof t.data!="object")return"Missing or invalid data";if(!t.checksum||typeof t.checksum!="string")return"Missing or invalid checksum";const r=t.data,o=["clients","projects","tasks","time_entries","invoices","captures","settings"];for(const m of o)if(!Array.isArray(r[m]))return`Missing or invalid table: ${m}`;return null}async insertRecord(a,t,r){const o=Object.keys(r),m=o.map(()=>"?").join(", "),l=Object.values(r);await a.execute(`INSERT INTO ${t} (${o.join(", ")}) VALUES (${m})`,l)}async getBackupStats(){var a,t,r,o,m,l;if(J()){const c=await W(),[d,N,y,F,w,T]=await Promise.all([c.select("SELECT COUNT(*) as count FROM clients"),c.select("SELECT COUNT(*) as count FROM projects"),c.select("SELECT COUNT(*) as count FROM tasks"),c.select("SELECT COUNT(*) as count FROM time_entries"),c.select("SELECT COUNT(*) as count FROM invoices"),c.select("SELECT COUNT(*) as count FROM captures")]);return{clients:((a=d[0])==null?void 0:a.count)||0,projects:((t=N[0])==null?void 0:t.count)||0,tasks:((r=y[0])==null?void 0:r.count)||0,timeEntries:((o=F[0])==null?void 0:o.count)||0,invoices:((m=w[0])==null?void 0:m.count)||0,captures:((l=T[0])==null?void 0:l.count)||0}}else{const{api:c}=await V(async()=>{const{api:E}=await import("./index-CFrmm5md.js").then(I=>I.af);return{api:E}},__vite__mapDeps([4,5,6,7])),[d,N,y,F,w,T]=await Promise.all([c.getClients(),c.getProjects(),c.getTasks(),c.getTimeEntries(),c.getInvoices(),c.getCaptures()]);return{clients:d.length,projects:N.length,tasks:y.length,timeEntries:F.length,invoices:w.length,captures:T.length}}}}const q=new ts;async function xe(){return H.get("/backups/status")}async function rs(){return H.post("/backups/trigger")}async function cs(){var r;const n=await H.requestBlob("/backups/download"),a=URL.createObjectURL(n),t=document.createElement("a");try{const o=await xe();t.download=((r=o.lastBackup)==null?void 0:r.filename)||"pa-backup.enc"}catch{t.download="pa-backup.enc"}t.href=a,document.body.appendChild(t),t.click(),document.body.removeChild(t),URL.revokeObjectURL(a)}async function ns(){const n=await H.requestBlob("/backups/export?format=json"),a=URL.createObjectURL(n),t=document.createElement("a"),r=new Date().toISOString().split("T")[0];t.download=`pa-export-${r}.json`,t.href=a,document.body.appendChild(t),t.click(),document.body.removeChild(t),URL.revokeObjectURL(a)}const is={fullName:"",jobTitle:"",email:"",phone:"",street:"",postalCode:"",city:"",country:"Deutschland",vatId:"",taxId:"",bankAccountHolder:"",bankName:"",bankIban:"",bankBic:""};function Ds(){const{workspacePath:n,theme:a,defaultArea:t,defaultCurrency:r,userName:o,businessProfile:m,setWorkspacePath:l,setTheme:c,setDefaultArea:d,setDefaultCurrency:N,setUserName:y,setBusinessProfile:F}=Te(),[w,T]=j.useState(n||""),[E,I]=j.useState(o||""),[M,P]=j.useState(!1),[A,K]=j.useState(!1),[h,Y]=j.useState(m||is),[G,X]=j.useState(!1),[g,he]=j.useState(null),[f,fe]=j.useState(null),[$,Q]=j.useState(!1),[Z,ee]=j.useState(!1),[se,ae]=j.useState(!1);j.useEffect(()=>{m&&Y(m)},[m]),j.useEffect(()=>{async function s(){try{const i=await q.getBackupStats();he(i)}catch(i){console.error("Failed to load data stats:",i)}}s()},[]);const z=j.useCallback(async()=>{if(re())try{const s=await xe();fe(s)}catch(s){console.error("Failed to load backup status:",s)}},[]);j.useEffect(()=>{z()},[z]);const je=async()=>{var s;Q(!0);try{const i=await rs();i.success?(u.success(`Backup created: ${(s=i.backup)==null?void 0:s.filename}`),await z()):u.error(i.error||"Backup failed")}catch(i){console.error("Backup trigger failed:",i),u.error("Failed to create backup")}finally{Q(!1)}},ge=async()=>{ee(!0);try{await cs(),u.success("Backup download started")}catch(s){console.error("Backup download failed:",s),u.error("Failed to download backup")}finally{ee(!1)}},ve=async()=>{ae(!0);try{await ns(),u.success("JSON export download started")}catch(s){console.error("JSON export failed:",s),u.error("Failed to export data")}finally{ae(!1)}},ye=async()=>{w.trim()?(await l(w.trim()),u.success("Workspace path saved")):(await l(void 0),u.success("Workspace path cleared"))},ke=async()=>{E.trim()&&(await y(E.trim()),u.success("Name saved"))},be=async()=>{X(!0);try{await F(h),u.success("Business profile saved")}catch(s){console.error("Failed to save business profile:",s),u.error("Failed to save business profile")}finally{X(!1)}},v=(s,i)=>{Y(k=>({...k,[s]:i}))},Ne=s=>s.replace(/\s/g,"").toUpperCase().replace(/(.{4})/g,"$1 ").trim(),we=s=>{const i=s.replace(/\s/g,"").toUpperCase();v("bankIban",i)},Ee=async()=>{P(!0);try{const s=await q.exportBackup();s.success?u.success("Backup exported successfully"):s.error!=="Export cancelled"&&u.error(s.error||"Export failed")}catch(s){console.error("Export failed:",s),u.error("Failed to export backup")}finally{P(!1)}},Ce=async()=>{var s,i;K(!0);try{const k=await q.importBackup();k.success?(u.success(`Backup restored: ${(s=k.stats)==null?void 0:s.records} records across ${(i=k.stats)==null?void 0:i.tables} tables`),window.location.reload()):k.error!=="Import cancelled"&&u.error(k.error||"Import failed")}catch(k){console.error("Import failed:",k),u.error("Failed to import backup")}finally{K(!1)}},Se=async()=>{try{const{getDb:s}=await V(async()=>{const{getDb:k}=await import("./db.web-lSIIGn2q.js");return{getDb:k}},[]),i=await s();await i.execute("DELETE FROM captures"),await i.execute("DELETE FROM time_entries"),await i.execute("DELETE FROM invoices"),await i.execute("DELETE FROM tasks"),await i.execute("DELETE FROM projects"),await i.execute("DELETE FROM clients"),await i.execute("DELETE FROM settings"),u.success("All data cleared"),window.location.reload()}catch(s){console.error("Clear data failed:",s),u.error("Failed to clear data")}},Be=g?g.clients+g.projects+g.tasks+g.timeEntries+g.invoices+g.captures:0;return e.jsxs("div",{className:"space-y-6 max-w-2xl",children:[e.jsx("div",{children:e.jsx("h1",{className:"text-2xl sm:text-3xl font-semibold tracking-tight",children:"Settings"})}),e.jsxs(C,{children:[e.jsxs(S,{children:[e.jsxs(B,{className:"flex items-center gap-2",children:[e.jsx(oe,{className:"h-5 w-5"}),"Profile"]}),e.jsx(R,{children:"Your personal information displayed in the sidebar."})]}),e.jsx(D,{className:"space-y-4",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx(p,{htmlFor:"user-name",children:"Display Name"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(x,{id:"user-name",value:E,onChange:s=>I(s.target.value),placeholder:"Your name",className:"flex-1"}),e.jsx(b,{onClick:ke,children:"Save"})]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"This name appears next to your profile icon in the sidebar."})]})})]}),e.jsxs(C,{children:[e.jsxs(S,{children:[e.jsxs(B,{className:"flex items-center gap-2",children:[e.jsx(ze,{className:"h-5 w-5"}),"Business Profile"]}),e.jsx(R,{children:"Your business information for invoices and official documents."})]}),e.jsxs(D,{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h4",{className:"text-sm font-medium flex items-center gap-2",children:[e.jsx(oe,{className:"h-4 w-4"}),"Personal Information"]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(p,{htmlFor:"bp-fullName",children:"Full Name"}),e.jsx(x,{id:"bp-fullName",value:h.fullName,onChange:s=>v("fullName",s.target.value),placeholder:"Max Mustermann"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(p,{htmlFor:"bp-jobTitle",children:"Job Title"}),e.jsx(x,{id:"bp-jobTitle",value:h.jobTitle,onChange:s=>v("jobTitle",s.target.value),placeholder:"Full-Stack Developer"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(p,{htmlFor:"bp-email",children:"Business Email"}),e.jsx(x,{id:"bp-email",type:"email",value:h.email,onChange:s=>v("email",s.target.value),placeholder:"kontakt@example.com"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(p,{htmlFor:"bp-phone",children:"Phone (optional)"}),e.jsx(x,{id:"bp-phone",type:"tel",value:h.phone||"",onChange:s=>v("phone",s.target.value),placeholder:"+49 123 456789"})]})]})]}),e.jsxs("div",{className:"space-y-4 pt-4 border-t",children:[e.jsxs("h4",{className:"text-sm font-medium flex items-center gap-2",children:[e.jsx(es,{className:"h-4 w-4"}),"Address"]}),e.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(p,{htmlFor:"bp-street",children:"Street Address"}),e.jsx(x,{id:"bp-street",value:h.street,onChange:s=>v("street",s.target.value),placeholder:"MusterstraÃŸe 123"})]}),e.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(p,{htmlFor:"bp-postalCode",children:"Postal Code"}),e.jsx(x,{id:"bp-postalCode",value:h.postalCode,onChange:s=>v("postalCode",s.target.value),placeholder:"12345"})]}),e.jsxs("div",{className:"space-y-2 col-span-1 sm:col-span-2",children:[e.jsx(p,{htmlFor:"bp-city",children:"City"}),e.jsx(x,{id:"bp-city",value:h.city,onChange:s=>v("city",s.target.value),placeholder:"Berlin"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(p,{htmlFor:"bp-country",children:"Country"}),e.jsx(x,{id:"bp-country",value:h.country,onChange:s=>v("country",s.target.value),placeholder:"Deutschland"})]})]})]}),e.jsxs("div",{className:"space-y-4 pt-4 border-t",children:[e.jsxs("h4",{className:"text-sm font-medium flex items-center gap-2",children:[e.jsx(Oe,{className:"h-4 w-4"}),"Tax Information"]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(p,{htmlFor:"bp-vatId",children:"USt-IdNr (VAT ID)"}),e.jsx(x,{id:"bp-vatId",value:h.vatId||"",onChange:s=>v("vatId",s.target.value.toUpperCase()),placeholder:"DE123456789"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Required for EU B2B invoices"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(p,{htmlFor:"bp-taxId",children:"Steuernummer (Tax Number)"}),e.jsx(x,{id:"bp-taxId",value:h.taxId||"",onChange:s=>v("taxId",s.target.value),placeholder:"123/456/78901"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Your local tax office number"})]})]})]}),e.jsxs("div",{className:"space-y-4 pt-4 border-t",children:[e.jsxs("h4",{className:"text-sm font-medium flex items-center gap-2",children:[e.jsx(Xe,{className:"h-4 w-4"}),"Bank Details"]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(p,{htmlFor:"bp-bankAccountHolder",children:"Account Holder"}),e.jsx(x,{id:"bp-bankAccountHolder",value:h.bankAccountHolder,onChange:s=>v("bankAccountHolder",s.target.value),placeholder:"Max Mustermann"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(p,{htmlFor:"bp-bankName",children:"Bank Name"}),e.jsx(x,{id:"bp-bankName",value:h.bankName,onChange:s=>v("bankName",s.target.value),placeholder:"Sparkasse Berlin"})]}),e.jsxs("div",{className:"space-y-2 sm:col-span-2",children:[e.jsx(p,{htmlFor:"bp-bankIban",children:"IBAN"}),e.jsx(x,{id:"bp-bankIban",value:Ne(h.bankIban),onChange:s=>we(s.target.value),placeholder:"DE89 3704 0044 0532 0130 00",className:"font-mono"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(p,{htmlFor:"bp-bankBic",children:"BIC/SWIFT"}),e.jsx(x,{id:"bp-bankBic",value:h.bankBic,onChange:s=>v("bankBic",s.target.value.toUpperCase()),placeholder:"COBADEFFXXX",className:"font-mono"})]})]})]}),e.jsxs("div",{className:"pt-4 border-t",children:[e.jsx(b,{onClick:be,disabled:G,children:G?"Saving...":"Save Business Profile"}),e.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:"This information will be used in your invoice PDFs."})]})]})]}),e.jsxs(C,{children:[e.jsxs(S,{children:[e.jsx(B,{children:"Appearance"}),e.jsx(R,{children:"Customize the look and feel."})]}),e.jsx(D,{className:"space-y-4",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx(p,{children:"Theme"}),e.jsx("div",{className:"flex gap-2",children:["light","dark","system"].map(s=>e.jsx(b,{variant:a===s?"default":"outline",size:"sm",onClick:()=>c(s),className:"capitalize",children:s},s))})]})})]}),e.jsxs(C,{children:[e.jsxs(S,{children:[e.jsxs(B,{className:"flex items-center gap-2",children:[e.jsx(We,{className:"h-5 w-5"}),"Workspace"]}),e.jsx(R,{children:"Configure your Obsidian workspace location for markdown integration."})]}),e.jsxs(D,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(p,{htmlFor:"workspace-path",children:"Workspace Path"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(x,{id:"workspace-path",value:w,onChange:s=>T(s.target.value),placeholder:"/Users/you/Documents/Obsidian/Vault",className:"flex-1"}),e.jsx(b,{onClick:ye,children:"Save"})]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Path to your Obsidian vault or markdown workspace. Used for exporting and linking files."})]}),n&&e.jsxs("div",{className:"rounded-lg bg-muted p-3 text-sm",children:[e.jsx("p",{className:"font-medium",children:"Current workspace:"}),e.jsx("code",{className:"text-xs text-muted-foreground",children:n})]})]})]}),e.jsxs(C,{children:[e.jsxs(S,{children:[e.jsx(B,{children:"Defaults"}),e.jsx(R,{children:"Set default values for new items."})]}),e.jsx(D,{className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(p,{children:"Default Area"}),e.jsxs(ce,{value:t,onValueChange:s=>d(s),children:[e.jsx(ne,{children:e.jsx(ie,{})}),e.jsxs(le,{children:[e.jsx(O,{value:"wellfy",children:"Wellfy"}),e.jsx(O,{value:"freelance",children:"Freelance"}),e.jsx(O,{value:"personal",children:"Personal"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(p,{children:"Default Currency"}),e.jsxs(ce,{value:r,onValueChange:N,children:[e.jsx(ne,{children:e.jsx(ie,{})}),e.jsxs(le,{children:[e.jsx(O,{value:"EUR",children:"EUR"}),e.jsx(O,{value:"USD",children:"USD"}),e.jsx(O,{value:"GBP",children:"GBP"}),e.jsx(O,{value:"CHF",children:"CHF"})]})]})]})]})})]}),re()&&e.jsxs(C,{children:[e.jsxs(S,{children:[e.jsxs(B,{className:"flex items-center gap-2",children:[e.jsx(ue,{className:"h-5 w-5"}),"Backup & Export"]}),e.jsx(R,{children:"Automated encrypted backups and data export. Backups are encrypted with AES-256-GCM."})]}),e.jsxs(D,{className:"space-y-4",children:[f&&e.jsxs("div",{className:"rounded-lg bg-muted p-4 space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("h4",{className:"text-sm font-medium flex items-center gap-2",children:[e.jsx(Ze,{className:"h-4 w-4"}),"Backup Status"]}),e.jsx(Re,{variant:f.encryptionKeyAvailable?"default":"destructive",children:f.encryptionKeyAvailable?"ðŸ”’ Encryption Active":"âš ï¸ No Key"})]}),f.lastBackup?e.jsxs("div",{className:"text-sm space-y-1",children:[e.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[e.jsx(Ie,{className:"h-3.5 w-3.5"}),e.jsxs("span",{children:["Last backup:"," ",e.jsx("span",{className:"text-foreground font-medium",children:new Date(f.lastBackup.date).toLocaleString("de-DE",{dateStyle:"medium",timeStyle:"short"})})]})]}),e.jsxs("p",{className:"text-xs text-muted-foreground pl-5",children:[f.lastBackup.filename," (",(f.lastBackup.sizeBytes/1024).toFixed(1)," KB)"]})]}):e.jsx("p",{className:"text-sm text-muted-foreground",children:"No backups yet. Create your first backup below."}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["ðŸ“¦ ",f.totalBackups," backup(s) stored in ",e.jsx("code",{className:"text-xs",children:f.backupDir})]})]}),f&&f.recentBackups.length>0&&e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"text-sm font-medium",children:"Recent Backups"}),e.jsx("div",{className:"rounded-lg border divide-y",children:f.recentBackups.map(s=>e.jsxs("div",{className:"flex items-center justify-between px-3 py-2 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2 min-w-0",children:[e.jsx(ue,{className:"h-3.5 w-3.5 text-green-500 shrink-0"}),e.jsx("span",{className:"truncate font-mono text-xs",children:s.filename})]}),e.jsxs("div",{className:"flex items-center gap-3 text-xs text-muted-foreground shrink-0",children:[e.jsxs("span",{children:[(s.sizeBytes/1024).toFixed(1)," KB"]}),e.jsx("span",{children:new Date(s.date).toLocaleDateString("de-DE",{day:"2-digit",month:"2-digit",year:"numeric"})})]})]},s.filename))})]}),e.jsxs("div",{className:"flex flex-wrap gap-2 pt-2",children:[e.jsxs(b,{variant:"default",onClick:je,disabled:$,children:[e.jsx(qe,{className:`h-4 w-4 mr-2 ${$?"animate-spin":""}`}),$?"Backing up...":"Create Backup"]}),e.jsxs(b,{variant:"outline",onClick:ge,disabled:Z||!(f!=null&&f.lastBackup),children:[e.jsx(de,{className:"h-4 w-4 mr-2"}),Z?"Downloading...":"Download Backup"]}),e.jsxs(b,{variant:"outline",onClick:ve,disabled:se,children:[e.jsx(Qe,{className:"h-4 w-4 mr-2"}),se?"Exporting...":"Export JSON"]})]}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[e.jsx("strong",{children:"Create Backup:"})," Encrypted backup saved on server (auto-rotated, 30 days).",e.jsx("br",{}),e.jsx("strong",{children:"Download Backup:"})," Download the latest encrypted backup file.",e.jsx("br",{}),e.jsx("strong",{children:"Export JSON:"})," Download all data as unencrypted JSON (for portability)."]})]})]}),e.jsxs(C,{children:[e.jsxs(S,{children:[e.jsxs(B,{className:"flex items-center gap-2",children:[e.jsx(Ke,{className:"h-5 w-5"}),"Data Management"]}),e.jsx(R,{children:"Your data is stored locally in SQLite. Export backups to keep your data safe."})]}),e.jsxs(D,{className:"space-y-4",children:[g&&e.jsxs("div",{className:"rounded-lg bg-muted p-3 text-sm",children:[e.jsxs("p",{className:"font-medium mb-2",children:["Current Data (",Be," total)"]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs text-muted-foreground",children:[e.jsxs("span",{children:[g.clients," clients"]}),e.jsxs("span",{children:[g.projects," projects"]}),e.jsxs("span",{children:[g.tasks," tasks"]}),e.jsxs("span",{children:[g.timeEntries," time entries"]}),e.jsxs("span",{children:[g.invoices," invoices"]}),e.jsxs("span",{children:[g.captures," captures"]})]})]}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsxs(b,{variant:"outline",onClick:Ee,disabled:M,children:[e.jsx(de,{className:"h-4 w-4 mr-2"}),M?"Exporting...":"Export Backup"]}),e.jsxs(b,{variant:"outline",onClick:Ce,disabled:A,children:[e.jsx(Ye,{className:"h-4 w-4 mr-2"}),A?"Importing...":"Import Backup"]}),e.jsxs(Ae,{children:[e.jsx(Le,{asChild:!0,children:e.jsxs(b,{variant:"destructive",children:[e.jsx(Ge,{className:"h-4 w-4 mr-2"}),"Clear All Data"]})}),e.jsxs(Me,{children:[e.jsxs(Pe,{children:[e.jsx(Ue,{children:"Are you absolutely sure?"}),e.jsx(_e,{children:"This action cannot be undone. This will permanently delete all your tasks, time entries, clients, projects, invoices, and captures from the database."})]}),e.jsxs(Je,{children:[e.jsx(Ve,{children:"Cancel"}),e.jsx(He,{onClick:Se,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:"Yes, delete everything"})]})]})]})]}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["Export creates a JSON backup of all your data. Import restores from a previous backup.",e.jsx("strong",{className:"block mt-1",children:"Tip: Export backups regularly to protect your data."})]})]})]}),e.jsxs(C,{children:[e.jsx(S,{children:e.jsx(B,{children:"About"})}),e.jsxs(D,{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Personal Assistant Dashboard v0.1.0"}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Built with Tauri, React, and TypeScript"}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Data stored in: ~/Library/Application Support/com.personal-assistant.app/"})]})]})]})}export{Ds as SettingsPage};
