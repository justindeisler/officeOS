import{r as C,j as e}from"./vendor-react-DeR5d9Tv.js";import{c as p,a4 as S,p as T,f as A,a as x,F as N,B as c,C as z,U as O,l as y,a0 as B,a1 as U,$ as E,a2 as G}from"./index-RJ0cNIvj.js";import{C as M,c as D,a as I,b as q}from"./card-DIHf8IPz.js";import{b as L,g as F,d as $}from"./markdown-DZSA0cWY.js";import{A as b}from"./arrow-left-CLbhYuej.js";import{D as W}from"./download-DwxoQ9rF.js";import{T as _}from"./trash-2-D_2eI67k.js";import{T as u}from"./triangle-alert-DD7JH2M1.js";import{T as w}from"./target-9Mm2Zoa6.js";import{C as j}from"./circle-check-XsINsZ0Q.js";import{C as H}from"./chevron-right-CcuX3k2-.js";import{d as J,a as K}from"./vendor-router-9bGSKQ4q.js";import{f as g}from"./vendor-date-fns-D0ugVOfH.js";import"./vendor-markdown-PIr_2kdo.js";import"./vendor-recharts-DrMJw15s.js";import"./vendor-radix-zn9KX-y8.js";import"./vendor-floating-ui-CESiY8Ey.js";/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v=p("Ban",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m4.9 4.9 14.2 14.2",key:"1m5liu"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k=p("ListChecks",[["path",{d:"m3 17 2 2 4-4",key:"1jhpwq"}],["path",{d:"m3 7 2 2 4-4",key:"1obspn"}],["path",{d:"M13 6h8",key:"15sg57"}],["path",{d:"M13 12h8",key:"h98zly"}],["path",{d:"M13 18h8",key:"oe0vm4"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q=p("Milestone",[["path",{d:"M12 13v8",key:"1l5pq0"}],["path",{d:"M12 3v3",key:"1n5kay"}],["path",{d:"M4 6a1 1 0 0 0-1 1v5a1 1 0 0 0 1 1h13a2 2 0 0 0 1.152-.365l3.424-2.317a1 1 0 0 0 0-1.635l-3.424-2.318A2 2 0 0 0 17 6z",key:"1btarq"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V=p("Wrench",[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z",key:"cbrjhi"}]]),X={draft:"bg-gray-500/10 text-gray-700 border-gray-200",review:"bg-blue-500/10 text-blue-700 border-blue-200",approved:"bg-green-500/10 text-green-700 border-green-200",in_progress:"bg-yellow-500/10 text-yellow-700 border-yellow-200",completed:"bg-purple-500/10 text-purple-700 border-purple-200",implemented:"bg-emerald-500/10 text-emerald-700 border-emerald-200"},Y={critical:"bg-red-500/10 text-red-700 border-red-200",high:"bg-orange-500/10 text-orange-700 border-orange-200",medium:"bg-yellow-500/10 text-yellow-700 border-yellow-200",low:"bg-gray-500/10 text-gray-700 border-gray-200"};function l({title:t,icon:i,children:s,defaultOpen:n=!0,badge:d}){const[m,h]=C.useState(n);return e.jsx(B,{open:m,onOpenChange:h,children:e.jsxs(M,{children:[e.jsx(U,{asChild:!0,children:e.jsx(I,{className:"cursor-pointer hover:bg-muted/50 transition-colors",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(i,{className:"h-5 w-5 text-muted-foreground"}),e.jsx(q,{className:"text-base sm:text-lg",children:t}),d!==void 0&&e.jsx(c,{variant:"secondary",className:"ml-2",children:d})]}),m?e.jsx(E,{className:"h-5 w-5 text-muted-foreground"}):e.jsx(H,{className:"h-5 w-5 text-muted-foreground"})]})})}),e.jsx(G,{children:e.jsx(D,{className:"pt-0",children:s})})]})})}function Z({story:t,index:i}){return e.jsx("div",{className:"p-4 rounded-lg border bg-card",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"flex-shrink-0 w-8 h-8 rounded-full bg-primary/10 text-primary flex items-center justify-center text-sm font-medium",children:i+1}),e.jsxs("div",{className:"flex-1 min-w-0 space-y-2",children:[e.jsxs("p",{className:"text-sm",children:[e.jsx("span",{className:"font-medium",children:"As a"})," ",t.persona,","," ",e.jsx("span",{className:"font-medium",children:"I want"})," ",t.action,","," ",e.jsx("span",{className:"font-medium",children:"so that"})," ",t.benefit]}),t.acceptanceCriteria&&t.acceptanceCriteria.length>0&&e.jsxs("div",{className:"mt-3 pt-3 border-t",children:[e.jsx("p",{className:"text-xs font-medium text-muted-foreground mb-2",children:"Acceptance Criteria"}),e.jsx("ul",{className:"space-y-1",children:t.acceptanceCriteria.map((s,n)=>e.jsxs("li",{className:"flex items-start gap-2 text-sm text-muted-foreground",children:[e.jsx(j,{className:"h-4 w-4 text-green-500 flex-shrink-0 mt-0.5"}),e.jsx("span",{children:s})]},n))})]})]})]})})}function ee({req:t}){return e.jsx("div",{className:"flex items-start gap-3 p-3 rounded-lg border bg-card",children:e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 flex-wrap mb-1",children:[e.jsx(c,{variant:"outline",className:"text-xs capitalize",children:t.type}),e.jsx(c,{variant:"outline",className:`text-xs ${Y[t.priority]}`,children:t.priority})]}),e.jsx("p",{className:"text-sm",children:t.description})]})})}function se({milestone:t,index:i}){return e.jsxs("div",{className:"flex items-start gap-3 p-3 rounded-lg border bg-card",children:[e.jsx("div",{className:"flex-shrink-0 w-6 h-6 rounded-full bg-primary/10 text-primary flex items-center justify-center text-xs font-medium",children:i+1}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"font-medium text-sm",children:t.title}),t.description&&e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:t.description}),t.targetDate&&e.jsxs("p",{className:"text-xs text-muted-foreground mt-2",children:["Target: ",g(new Date(t.targetDate),"MMM d, yyyy")]})]})]})}function Ne(){const{id:t}=J(),i=K(),s=S(t||""),{initialize:n,deletePRD:d,isLoaded:m}=T(),{projects:h,initialize:f}=A();C.useEffect(()=>{n(),f()},[n,f]);const o=s!=null&&s.projectId?h.find(a=>a.id===s.projectId):null,P=()=>{if(!s)return;const a=L(s,{project:o||void 0}),r=`PRD-${F(s.featureName)}`;$(a,r),y.success("PRD exported to markdown")},R=async()=>{s&&confirm(`Delete PRD "${s.featureName}"?`)&&(await d(s.id),y.success("PRD deleted"),i("/prd"))};return e.jsx(e.Fragment,{children:m?s?e.jsxs("div",{className:"space-y-6 pb-6",children:[e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsxs(x,{variant:"ghost",className:"w-fit -ml-2",onClick:()=>i("/prd"),children:[e.jsx(b,{className:"h-4 w-4 mr-2"}),"Back to PRDs"]}),e.jsxs("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-start sm:justify-between",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("h1",{className:"text-2xl sm:text-3xl font-semibold tracking-tight",children:s.featureName}),e.jsxs("div",{className:"flex items-center gap-2 flex-wrap text-sm text-muted-foreground",children:[o&&e.jsx("span",{children:o.name}),o&&e.jsx("span",{children:"•"}),e.jsx("span",{className:"capitalize",children:s.area}),e.jsx("span",{children:"•"}),e.jsxs("span",{children:["v",s.version]}),e.jsx("span",{children:"•"}),e.jsxs("span",{children:["by ",s.author]})]}),e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsx(c,{variant:"outline",className:X[s.status],children:s.status.replace("_"," ")}),s.assignee&&e.jsx(c,{variant:"secondary",className:"capitalize",children:s.assignee}),s.estimatedEffort&&e.jsxs(c,{variant:"outline",children:[e.jsx(z,{className:"h-3 w-3 mr-1"}),s.estimatedEffort]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(x,{variant:"outline",size:"sm",onClick:P,children:[e.jsx(W,{className:"h-4 w-4 sm:mr-2"}),e.jsx("span",{className:"hidden sm:inline",children:"Export"})]}),e.jsxs(x,{variant:"outline",size:"sm",className:"text-destructive hover:text-destructive",onClick:R,children:[e.jsx(_,{className:"h-4 w-4 sm:mr-2"}),e.jsx("span",{className:"hidden sm:inline",children:"Delete"})]})]})]})]}),e.jsxs("div",{className:"flex flex-wrap gap-4 text-xs text-muted-foreground",children:[e.jsxs("span",{children:["Created ",g(new Date(s.createdAt),"MMM d, yyyy 'at' h:mm a")]}),s.updatedAt!==s.createdAt&&e.jsxs("span",{children:["• Updated ",g(new Date(s.updatedAt),"MMM d, yyyy 'at' h:mm a")]})]}),s.problemStatement&&e.jsx(l,{title:"Problem Statement",icon:u,defaultOpen:!0,children:e.jsx("p",{className:"text-sm leading-relaxed whitespace-pre-wrap",children:s.problemStatement})}),s.goals&&s.goals.length>0&&e.jsx(l,{title:"Goals",icon:w,badge:s.goals.length,children:e.jsx("ul",{className:"space-y-2",children:s.goals.map((a,r)=>e.jsxs("li",{className:"flex items-start gap-2 text-sm",children:[e.jsx(j,{className:"h-4 w-4 text-green-500 flex-shrink-0 mt-0.5"}),e.jsx("span",{children:a})]},r))})}),s.nonGoals&&s.nonGoals.length>0&&e.jsx(l,{title:"Non-Goals",icon:v,badge:s.nonGoals.length,defaultOpen:!1,children:e.jsx("ul",{className:"space-y-2",children:s.nonGoals.map((a,r)=>e.jsxs("li",{className:"flex items-start gap-2 text-sm text-muted-foreground",children:[e.jsx(v,{className:"h-4 w-4 text-gray-400 flex-shrink-0 mt-0.5"}),e.jsx("span",{children:a})]},r))})}),s.targetUsers&&e.jsx(l,{title:"Target Users",icon:O,defaultOpen:!0,children:e.jsx("p",{className:"text-sm leading-relaxed whitespace-pre-wrap",children:s.targetUsers})}),s.userStories&&s.userStories.length>0&&e.jsx(l,{title:"User Stories",icon:k,badge:s.userStories.length,children:e.jsx("div",{className:"space-y-4",children:s.userStories.map((a,r)=>e.jsx(Z,{story:a,index:r},a.id||r))})}),s.requirements&&s.requirements.length>0&&e.jsx(l,{title:"Requirements",icon:k,badge:s.requirements.length,children:e.jsx("div",{className:"space-y-3",children:s.requirements.map((a,r)=>e.jsx(ee,{req:a},a.id||r))})}),s.technicalApproach&&e.jsx(l,{title:"Technical Approach",icon:V,defaultOpen:!1,children:e.jsx("p",{className:"text-sm leading-relaxed whitespace-pre-wrap",children:s.technicalApproach})}),s.dependencies&&s.dependencies.length>0&&e.jsx(l,{title:"Dependencies",icon:N,badge:s.dependencies.length,defaultOpen:!1,children:e.jsx("ul",{className:"space-y-2",children:s.dependencies.map((a,r)=>e.jsxs("li",{className:"flex items-start gap-2 text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:"•"}),e.jsx("span",{children:a})]},r))})}),s.risks&&s.risks.length>0&&e.jsx(l,{title:"Risks",icon:u,badge:s.risks.length,defaultOpen:!1,children:e.jsx("ul",{className:"space-y-2",children:s.risks.map((a,r)=>e.jsxs("li",{className:"flex items-start gap-2 text-sm",children:[e.jsx(u,{className:"h-4 w-4 text-yellow-500 flex-shrink-0 mt-0.5"}),e.jsx("span",{children:a})]},r))})}),s.milestones&&s.milestones.length>0&&e.jsx(l,{title:"Milestones",icon:Q,badge:s.milestones.length,children:e.jsx("div",{className:"space-y-3",children:s.milestones.map((a,r)=>e.jsx(se,{milestone:a,index:r},a.id||r))})}),s.successMetrics&&s.successMetrics.length>0&&e.jsx(l,{title:"Success Metrics",icon:w,badge:s.successMetrics.length,defaultOpen:!1,children:e.jsx("ul",{className:"space-y-2",children:s.successMetrics.map((a,r)=>e.jsxs("li",{className:"flex items-start gap-2 text-sm",children:[e.jsx(j,{className:"h-4 w-4 text-blue-500 flex-shrink-0 mt-0.5"}),e.jsx("span",{children:a})]},r))})})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs(x,{variant:"ghost",onClick:()=>i("/prd"),children:[e.jsx(b,{className:"h-4 w-4 mr-2"}),"Back to PRDs"]}),e.jsx(M,{className:"text-center",children:e.jsxs(D,{className:"pt-12 pb-12",children:[e.jsx(N,{className:"h-12 w-12 mx-auto text-muted-foreground/50 mb-4"}),e.jsx("h3",{className:"text-lg font-medium mb-2",children:"PRD not found"}),e.jsx("p",{className:"text-muted-foreground text-sm",children:"This PRD may have been deleted or doesn't exist."})]})})]}):e.jsx("div",{className:"flex items-center justify-center p-12",children:e.jsx("div",{className:"h-8 w-8 animate-spin rounded-full border-4 border-primary border-t-transparent"})})})}export{Ne as PrdDetailPage};
