import{j as e,r as u}from"./vendor-react-wuMqdllU.js";import{i as X,n as J,e as xe,L as b,I as w,a as o,F as ne,G as ie,B as P,H as le,k as L}from"./index-BJ9hpEov.js";import{T as ye,a as Ce,b as he}from"./tabs-EeWm2cFj.js";import{C as te,c as re,a as De,b as Se,d as ke}from"./card-BOU-q13f.js";import{x as be,X as T,t as k,a9 as Re,ak as ce,C as de,m as Pe,al as Ae,e as Me,i as Fe,am as ze,p as ue,Q as Ee,f as oe,v as Te,an as pe,W as je,a8 as ge,ao as qe,ap as Ie,A as Ue}from"./vendor-icons-ssgfUAX_.js";import{S as _,a as W,b as V,c as B,d as j}from"./select-DW4QIkWb.js";import{T as Z}from"./textarea-D5YM9rKe.js";import{f as me}from"./vendor-date-fns-D0ugVOfH.js";import{b as fe,g as Ne,d as ve}from"./markdown-DZSA0cWY.js";import{a as Ge}from"./vendor-router-Cm8Qzw9U.js";import"./vendor-markdown-C3iCDuOK.js";import"./vendor-recharts-tRgwS7-V.js";import"./vendor-radix-DqeMb71O.js";import"./vendor-floating-ui-BD6aHMKr.js";const H=[{id:1,title:"Project & Feature",description:"Select project and name your feature",isComplete:a=>!!(a.featureName&&a.area)},{id:2,title:"Problem & Goals",description:"Define the problem and objectives",isComplete:a=>!!(a.problemStatement&&a.goals&&a.goals.length>0)},{id:3,title:"Users & Requirements",description:"Document user stories and requirements",isComplete:a=>!!(a.targetUsers&&a.userStories&&a.userStories.length>0&&a.requirements&&a.requirements.length>0)},{id:4,title:"Technical Details",description:"Technical approach and considerations",isComplete:()=>!0},{id:5,title:"Review & Generate",description:"Review and create your PRD",isComplete:()=>!0}];function Le({currentStep:a,formData:i,onStepClick:m}){return e.jsx("nav",{"aria-label":"Progress",className:"mb-8",children:e.jsx("ol",{className:"flex items-center justify-between w-full",children:H.map((x,n)=>{const g=x.isComplete(i)&&x.id<a,p=x.id===a,f=x.id<a;return e.jsxs("li",{className:"flex-1 flex items-center",children:[n>0&&e.jsx("div",{className:X("flex-1 h-0.5",f||p?"bg-primary":"bg-muted")}),e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("button",{type:"button",onClick:()=>m==null?void 0:m(x.id),disabled:!m,className:X("flex h-10 w-10 items-center justify-center rounded-full border-2 transition-all",p&&"border-primary bg-primary text-primary-foreground",g&&"border-primary bg-primary text-primary-foreground",!p&&!g&&"border-muted bg-background text-muted-foreground",m&&"cursor-pointer hover:border-primary/80"),children:g?e.jsx(be,{className:"h-5 w-5"}):e.jsx("span",{className:"text-sm font-medium",children:x.id})}),e.jsx("span",{className:X("mt-2 text-xs font-medium whitespace-nowrap",p?"text-primary":"text-muted-foreground"),children:x.title})]}),n<H.length-1&&e.jsx("div",{className:X("flex-1 h-0.5",f?"bg-primary":"bg-muted")})]},x.id)})})})}function _e(){const{formData:a,updateFormData:i}=J(),{projects:m}=xe(),x=m.filter(n=>n.status==="active"||n.status==="pipeline");return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("h2",{className:"text-xl font-semibold",children:"Project & Feature Info"}),e.jsx("p",{className:"text-muted-foreground text-sm",children:"Start by selecting a project and naming your feature."})]}),e.jsxs("div",{className:"grid gap-6",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(b,{htmlFor:"project",children:"Project (Optional)"}),e.jsxs(_,{value:a.projectId||"none",onValueChange:n=>i({projectId:n==="none"?void 0:n}),children:[e.jsx(W,{children:e.jsx(V,{placeholder:"Select a project..."})}),e.jsxs(B,{children:[e.jsx(j,{value:"none",children:"No project (standalone feature)"}),x.map(n=>e.jsx(j,{value:n.id,children:n.name},n.id))]})]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Link this PRD to an existing project, or leave standalone."})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(b,{htmlFor:"featureName",children:"Feature Name *"}),e.jsx(w,{id:"featureName",value:a.featureName||"",onChange:n=>i({featureName:n.target.value}),placeholder:"e.g., User Authentication System",autoFocus:!0}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"A clear, descriptive name for this feature."})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(b,{htmlFor:"version",children:"Version"}),e.jsx(w,{id:"version",value:a.version||"1.0",onChange:n=>i({version:n.target.value}),placeholder:"1.0"})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(b,{htmlFor:"area",children:"Area *"}),e.jsxs(_,{value:a.area||"personal",onValueChange:n=>i({area:n}),children:[e.jsx(W,{children:e.jsx(V,{})}),e.jsxs(B,{children:[e.jsx(j,{value:"wellfy",children:"Wellfy"}),e.jsx(j,{value:"freelance",children:"Freelance"}),e.jsx(j,{value:"personal",children:"Personal"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(b,{htmlFor:"author",children:"Author"}),e.jsx(w,{id:"author",value:a.author||"Justin",onChange:n=>i({author:n.target.value}),placeholder:"Your name"})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(b,{htmlFor:"assignee",children:"Assign To"}),e.jsxs(_,{value:a.assignee||"none",onValueChange:n=>i({assignee:n==="none"?void 0:n}),children:[e.jsx(W,{children:e.jsx(V,{placeholder:"Unassigned"})}),e.jsxs(B,{children:[e.jsx(j,{value:"none",children:"Unassigned"}),e.jsx(j,{value:"justin",children:"Justin"}),e.jsx(j,{value:"james",children:"James"})]})]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Assign to James for AI-assisted implementation."})]})]})]})]})}function We(){const{formData:a,updateFormData:i}=J(),[m,x]=u.useState(""),[n,g]=u.useState(""),p=()=>{m.trim()&&(i({goals:[...a.goals||[],m.trim()]}),x(""))},f=l=>{i({goals:(a.goals||[]).filter((c,N)=>N!==l)})},h=()=>{n.trim()&&(i({nonGoals:[...a.nonGoals||[],n.trim()]}),g(""))},t=l=>{i({nonGoals:(a.nonGoals||[]).filter((c,N)=>N!==l)})},d=(l,c)=>{l.key==="Enter"&&(l.preventDefault(),c())};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("h2",{className:"text-xl font-semibold",children:"Problem & Goals"}),e.jsx("p",{className:"text-muted-foreground text-sm",children:"Define the problem you're solving and what success looks like."})]}),e.jsxs("div",{className:"grid gap-6",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(b,{htmlFor:"problemStatement",children:"Problem Statement *"}),e.jsx(Z,{id:"problemStatement",value:a.problemStatement||"",onChange:l=>i({problemStatement:l.target.value}),placeholder:"Describe the problem or opportunity this feature addresses. What pain points exist? Why is this important?",rows:4,className:"resize-none"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Be specific about the current state and why change is needed."})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(b,{children:"Goals *"}),e.jsx("p",{className:"text-xs text-muted-foreground mb-2",children:"What are the specific outcomes you want to achieve? Add at least one goal."}),e.jsx("div",{className:"space-y-2",children:(a.goals||[]).map((l,c)=>e.jsxs("div",{className:"flex items-center gap-2 p-3 rounded-md bg-muted/50",children:[e.jsx("span",{className:"flex-1 text-sm",children:l}),e.jsx(o,{type:"button",variant:"ghost",size:"icon",className:"h-6 w-6 text-muted-foreground hover:text-destructive",onClick:()=>f(c),children:e.jsx(T,{className:"h-4 w-4"})})]},c))}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(w,{value:m,onChange:l=>x(l.target.value),onKeyPress:l=>d(l,p),placeholder:"e.g., Reduce user onboarding time by 50%"}),e.jsx(o,{type:"button",variant:"secondary",onClick:p,disabled:!m.trim(),children:e.jsx(k,{className:"h-4 w-4"})})]})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(b,{children:"Non-Goals (Optional)"}),e.jsx("p",{className:"text-xs text-muted-foreground mb-2",children:"What is explicitly out of scope? This helps set clear boundaries."}),e.jsx("div",{className:"space-y-2",children:(a.nonGoals||[]).map((l,c)=>e.jsxs("div",{className:"flex items-center gap-2 p-3 rounded-md bg-muted/30 border border-dashed",children:[e.jsx("span",{className:"flex-1 text-sm text-muted-foreground",children:l}),e.jsx(o,{type:"button",variant:"ghost",size:"icon",className:"h-6 w-6 text-muted-foreground hover:text-destructive",onClick:()=>t(c),children:e.jsx(T,{className:"h-4 w-4"})})]},c))}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(w,{value:n,onChange:l=>g(l.target.value),onKeyPress:l=>d(l,h),placeholder:"e.g., Mobile app support (future phase)"}),e.jsx(o,{type:"button",variant:"outline",onClick:h,disabled:!n.trim(),children:e.jsx(k,{className:"h-4 w-4"})})]})]})]})]})}function Ve(){var U,$;const{formData:a,updateFormData:i,addUserStory:m,removeUserStory:x,addRequirement:n,removeRequirement:g}=J(),[p,f]=u.useState(!0),[h,t]=u.useState(""),[d,l]=u.useState(""),[c,N]=u.useState(""),[D,R]=u.useState(""),[C,A]=u.useState([]),[y,K]=u.useState(!0),[M,F]=u.useState(""),[z,r]=u.useState("functional"),[E,I]=u.useState("medium"),Q=()=>{D.trim()&&(A([...C,D.trim()]),R(""))},ee=s=>{A(C.filter((v,S)=>S!==s))},se=()=>{!h.trim()||!d.trim()||!c.trim()||(m({persona:h.trim(),action:d.trim(),benefit:c.trim(),acceptanceCriteria:C}),t(""),l(""),N(""),R(""),A([]))},ae=()=>{M.trim()&&(n({type:z,description:M.trim(),priority:E}),F(""),r("functional"),I("medium"))},O={critical:"bg-red-500/10 text-red-700 border-red-200",high:"bg-orange-500/10 text-orange-700 border-orange-200",medium:"bg-yellow-500/10 text-yellow-700 border-yellow-200",low:"bg-green-500/10 text-green-700 border-green-200"};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("h2",{className:"text-xl font-semibold",children:"Users & Requirements"}),e.jsx("p",{className:"text-muted-foreground text-sm",children:"Define who this is for and what they need."})]}),e.jsxs("div",{className:"grid gap-6",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(b,{htmlFor:"targetUsers",children:"Target Users *"}),e.jsx(Z,{id:"targetUsers",value:a.targetUsers||"",onChange:s=>i({targetUsers:s.target.value}),placeholder:"Describe the primary users of this feature. Who are they? What are their characteristics?",rows:3,className:"resize-none"})]}),e.jsxs(ne,{open:p,onOpenChange:f,children:[e.jsx(ie,{asChild:!0,children:e.jsxs(o,{variant:"ghost",className:"w-full justify-between p-4 h-auto border rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Re,{className:"h-4 w-4"}),e.jsx("span",{className:"font-medium",children:"User Stories"}),e.jsx(P,{variant:"secondary",children:((U=a.userStories)==null?void 0:U.length)||0})]}),p?e.jsx(ce,{className:"h-4 w-4"}):e.jsx(de,{className:"h-4 w-4"})]})}),e.jsxs(le,{className:"pt-4 space-y-4",children:[(a.userStories||[]).map(s=>e.jsxs("div",{className:"p-4 rounded-lg bg-muted/30 border space-y-2",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{className:"text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:"As a "}),e.jsx("strong",{children:s.persona}),e.jsx("span",{className:"text-muted-foreground",children:", I want to "}),e.jsx("strong",{children:s.action}),e.jsx("span",{className:"text-muted-foreground",children:", so that "}),e.jsx("strong",{children:s.benefit})]}),e.jsx(o,{type:"button",variant:"ghost",size:"icon",className:"h-6 w-6 shrink-0",onClick:()=>x(s.id),children:e.jsx(T,{className:"h-4 w-4"})})]}),s.acceptanceCriteria.length>0&&e.jsxs("div",{className:"text-xs text-muted-foreground",children:[e.jsx("strong",{children:"Criteria:"}),e.jsx("ul",{className:"list-disc list-inside mt-1",children:s.acceptanceCriteria.map((v,S)=>e.jsx("li",{children:v},S))})]})]},s.id)),e.jsxs("div",{className:"p-4 rounded-lg border border-dashed space-y-4",children:[e.jsx("p",{className:"text-sm font-medium",children:"Add User Story"}),e.jsxs("div",{className:"grid gap-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm text-muted-foreground shrink-0",children:"As a"}),e.jsx(w,{value:h,onChange:s=>t(s.target.value),placeholder:"user type/persona",className:"flex-1"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm text-muted-foreground shrink-0",children:"I want to"}),e.jsx(w,{value:d,onChange:s=>l(s.target.value),placeholder:"action/goal",className:"flex-1"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm text-muted-foreground shrink-0",children:"So that"}),e.jsx(w,{value:c,onChange:s=>N(s.target.value),placeholder:"benefit/value",className:"flex-1"})]}),e.jsxs("div",{className:"space-y-2 pt-2 border-t",children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Acceptance Criteria (optional)"}),C.map((s,v)=>e.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[e.jsx("span",{className:"flex-1 p-2 bg-muted rounded",children:s}),e.jsx(o,{type:"button",variant:"ghost",size:"icon",className:"h-6 w-6",onClick:()=>ee(v),children:e.jsx(T,{className:"h-3 w-3"})})]},v)),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(w,{value:D,onChange:s=>R(s.target.value),placeholder:"Add acceptance criteria",className:"text-sm",onKeyPress:s=>{s.key==="Enter"&&(s.preventDefault(),Q())}}),e.jsx(o,{type:"button",variant:"outline",size:"sm",onClick:Q,disabled:!D.trim(),children:e.jsx(k,{className:"h-3 w-3"})})]})]}),e.jsxs(o,{type:"button",onClick:se,disabled:!h.trim()||!d.trim()||!c.trim(),className:"mt-2",children:[e.jsx(k,{className:"h-4 w-4 mr-2"}),"Add User Story"]})]})]})]})]}),e.jsxs(ne,{open:y,onOpenChange:K,children:[e.jsx(ie,{asChild:!0,children:e.jsxs(o,{variant:"ghost",className:"w-full justify-between p-4 h-auto border rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Pe,{className:"h-4 w-4"}),e.jsx("span",{className:"font-medium",children:"Requirements"}),e.jsx(P,{variant:"secondary",children:(($=a.requirements)==null?void 0:$.length)||0})]}),y?e.jsx(ce,{className:"h-4 w-4"}):e.jsx(de,{className:"h-4 w-4"})]})}),e.jsxs(le,{className:"pt-4 space-y-4",children:[(a.requirements||[]).map(s=>e.jsxs("div",{className:"p-3 rounded-lg bg-muted/30 border flex items-center justify-between gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[e.jsx(P,{variant:"outline",className:O[s.priority],children:s.priority}),e.jsx(P,{variant:"secondary",className:"shrink-0",children:s.type==="functional"?"FR":"NFR"}),e.jsx("span",{className:"text-sm",children:s.description})]}),e.jsx(o,{type:"button",variant:"ghost",size:"icon",className:"h-6 w-6 shrink-0",onClick:()=>g(s.id),children:e.jsx(T,{className:"h-4 w-4"})})]},s.id)),e.jsxs("div",{className:"p-4 rounded-lg border border-dashed space-y-4",children:[e.jsx("p",{className:"text-sm font-medium",children:"Add Requirement"}),e.jsxs("div",{className:"grid gap-3",children:[e.jsx(Z,{value:M,onChange:s=>F(s.target.value),placeholder:"Describe the requirement...",rows:2,className:"resize-none"}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs(_,{value:z,onValueChange:s=>r(s),children:[e.jsx(W,{className:"w-[160px]",children:e.jsx(V,{})}),e.jsxs(B,{children:[e.jsx(j,{value:"functional",children:"Functional"}),e.jsx(j,{value:"non-functional",children:"Non-Functional"})]})]}),e.jsxs(_,{value:E,onValueChange:s=>I(s),children:[e.jsx(W,{className:"w-[140px]",children:e.jsx(V,{})}),e.jsxs(B,{children:[e.jsx(j,{value:"critical",children:"ðŸ”´ Critical"}),e.jsx(j,{value:"high",children:"ðŸŸ  High"}),e.jsx(j,{value:"medium",children:"ðŸŸ¡ Medium"}),e.jsx(j,{value:"low",children:"ðŸŸ¢ Low"})]})]}),e.jsxs(o,{type:"button",onClick:ae,disabled:!M.trim(),className:"ml-auto",children:[e.jsx(k,{className:"h-4 w-4 mr-2"}),"Add"]})]})]})]})]})]})]})]})}function Y({label:a,icon:i,items:m,placeholder:x,onAdd:n,onRemove:g,description:p,variant:f="default"}){const[h,t]=u.useState(""),d=()=>{h.trim()&&(n(h.trim()),t(""))},l=f==="warning"?"bg-yellow-500/10 border-yellow-200":"bg-muted/50";return e.jsxs("div",{className:"grid gap-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[i,e.jsx(b,{children:a})]}),p&&e.jsx("p",{className:"text-xs text-muted-foreground",children:p}),e.jsx("div",{className:"space-y-2",children:m.map((c,N)=>e.jsxs("div",{className:`flex items-center gap-2 p-3 rounded-md ${l}`,children:[e.jsx("span",{className:"flex-1 text-sm",children:c}),e.jsx(o,{type:"button",variant:"ghost",size:"icon",className:"h-6 w-6 text-muted-foreground hover:text-destructive",onClick:()=>g(N),children:e.jsx(T,{className:"h-4 w-4"})})]},N))}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(w,{value:h,onChange:c=>t(c.target.value),onKeyPress:c=>{c.key==="Enter"&&(c.preventDefault(),d())},placeholder:x}),e.jsx(o,{type:"button",variant:"secondary",onClick:d,disabled:!h.trim(),children:e.jsx(k,{className:"h-4 w-4"})})]})]})}function Be(){const{formData:a,updateFormData:i}=J(),m=d=>{i({dependencies:[...a.dependencies||[],d]})},x=d=>{i({dependencies:(a.dependencies||[]).filter((l,c)=>c!==d)})},n=d=>{i({risks:[...a.risks||[],d]})},g=d=>{i({risks:(a.risks||[]).filter((l,c)=>c!==d)})},p=d=>{i({assumptions:[...a.assumptions||[],d]})},f=d=>{i({assumptions:(a.assumptions||[]).filter((l,c)=>c!==d)})},h=d=>{i({constraints:[...a.constraints||[],d]})},t=d=>{i({constraints:(a.constraints||[]).filter((l,c)=>c!==d)})};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("h2",{className:"text-xl font-semibold",children:"Technical Considerations"}),e.jsx("p",{className:"text-muted-foreground text-sm",children:"Document technical approach, dependencies, and risks. This step is optional but recommended."})]}),e.jsxs("div",{className:"grid gap-6",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(b,{htmlFor:"technicalApproach",children:"Technical Approach"}),e.jsx(Z,{id:"technicalApproach",value:a.technicalApproach||"",onChange:d=>i({technicalApproach:d.target.value}),placeholder:"Describe the high-level technical approach. What technologies, patterns, or architectures will be used?",rows:4,className:"resize-none"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Optional but helpful for implementation planning."})]}),e.jsx(Y,{label:"Dependencies",icon:e.jsx(Ae,{className:"h-4 w-4 text-blue-500"}),items:a.dependencies||[],placeholder:"e.g., Requires Auth API v2.0",onAdd:m,onRemove:x,description:"External systems, APIs, or features this depends on."}),e.jsx(Y,{label:"Risks",icon:e.jsx(Me,{className:"h-4 w-4 text-orange-500"}),items:a.risks||[],placeholder:"e.g., Third-party API rate limits may affect performance",onAdd:n,onRemove:g,description:"Potential issues that could impact success.",variant:"warning"}),e.jsx(Y,{label:"Assumptions",icon:e.jsx(Fe,{className:"h-4 w-4 text-yellow-500"}),items:a.assumptions||[],placeholder:"e.g., Users have modern browsers with ES6 support",onAdd:p,onRemove:f,description:"What conditions are we assuming to be true?"}),e.jsx(Y,{label:"Constraints",icon:e.jsx(ze,{className:"h-4 w-4 text-purple-500"}),items:a.constraints||[],placeholder:"e.g., Must be completed before Q2 release",onAdd:h,onRemove:t,description:"Fixed limitations or boundaries to work within."})]})]})}function Je(){var F,z;const{formData:a,updateFormData:i,addMilestone:m,removeMilestone:x}=J(),{projects:n}=xe(),[g,p]=u.useState(!0),[f,h]=u.useState(""),[t,d]=u.useState(""),[l,c]=u.useState(""),[N,D]=u.useState(""),R=a.projectId?n.find(r=>r.id===a.projectId):null,C=H.map(r=>({...r,isComplete:r.isComplete(a)})),A=C.slice(0,3).every(r=>r.isComplete),y=()=>{f.trim()&&(i({successMetrics:[...a.successMetrics||[],f.trim()]}),h(""))},K=r=>{i({successMetrics:(a.successMetrics||[]).filter((E,I)=>I!==r)})},M=()=>{t.trim()&&(m({title:t.trim(),description:l.trim()||void 0,targetDate:N||void 0}),d(""),c(""),D(""))};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("h2",{className:"text-xl font-semibold",children:"Review & Generate"}),e.jsx("p",{className:"text-muted-foreground text-sm",children:"Add success metrics and milestones, then review your PRD."})]}),e.jsxs(ne,{open:g,onOpenChange:p,children:[e.jsx(ie,{asChild:!0,children:e.jsxs(o,{variant:"ghost",className:"w-full justify-between p-4 h-auto border rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ue,{className:"h-4 w-4"}),e.jsx("span",{className:"font-medium",children:"Success Metrics & Timeline"})]}),g?e.jsx(ce,{className:"h-4 w-4"}):e.jsx(de,{className:"h-4 w-4"})]})}),e.jsxs(le,{className:"pt-4 space-y-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(b,{children:"Success Metrics"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"How will you measure if this feature is successful?"}),e.jsx("div",{className:"space-y-2",children:(a.successMetrics||[]).map((r,E)=>e.jsxs("div",{className:"flex items-center gap-2 p-3 rounded-md bg-green-500/10 border border-green-200",children:[e.jsx(ue,{className:"h-4 w-4 text-green-600 shrink-0"}),e.jsx("span",{className:"flex-1 text-sm",children:r}),e.jsx(o,{type:"button",variant:"ghost",size:"icon",className:"h-6 w-6",onClick:()=>K(E),children:e.jsx(T,{className:"h-4 w-4"})})]},E))}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(w,{value:f,onChange:r=>h(r.target.value),onKeyPress:r=>{r.key==="Enter"&&(r.preventDefault(),y())},placeholder:"e.g., Increase user engagement by 20%"}),e.jsx(o,{type:"button",variant:"secondary",onClick:y,disabled:!f.trim(),children:e.jsx(k,{className:"h-4 w-4"})})]})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(b,{htmlFor:"estimatedEffort",children:"Estimated Effort"}),e.jsxs(_,{value:a.estimatedEffort||"",onValueChange:r=>i({estimatedEffort:r}),children:[e.jsx(W,{children:e.jsx(V,{placeholder:"Select effort estimate..."})}),e.jsxs(B,{children:[e.jsx(j,{value:"1-2 days",children:"1-2 days (Small)"}),e.jsx(j,{value:"3-5 days",children:"3-5 days (Medium)"}),e.jsx(j,{value:"1-2 weeks",children:"1-2 weeks (Large)"}),e.jsx(j,{value:"2-4 weeks",children:"2-4 weeks (XL)"}),e.jsx(j,{value:"1+ months",children:"1+ months (Epic)"})]})]})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(b,{children:"Milestones"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Break the work into key deliverables with target dates."}),e.jsx("div",{className:"space-y-2",children:(a.milestones||[]).map(r=>e.jsxs("div",{className:"flex items-center gap-3 p-3 rounded-md bg-muted/50",children:[e.jsx(Ee,{className:"h-4 w-4 text-primary shrink-0"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium",children:r.title}),r.description&&e.jsx("p",{className:"text-xs text-muted-foreground truncate",children:r.description})]}),r.targetDate&&e.jsx(P,{variant:"outline",className:"shrink-0",children:me(new Date(r.targetDate),"MMM d")}),e.jsx(o,{type:"button",variant:"ghost",size:"icon",className:"h-6 w-6 shrink-0",onClick:()=>x(r.id),children:e.jsx(T,{className:"h-4 w-4"})})]},r.id))}),e.jsxs("div",{className:"p-3 rounded-lg border border-dashed space-y-3",children:[e.jsx(w,{value:t,onChange:r=>d(r.target.value),placeholder:"Milestone title"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(w,{value:l,onChange:r=>c(r.target.value),placeholder:"Description (optional)",className:"flex-1"}),e.jsx(w,{type:"date",value:N,onChange:r=>D(r.target.value),className:"w-[160px]"})]}),e.jsxs(o,{type:"button",variant:"secondary",onClick:M,disabled:!t.trim(),className:"w-full",children:[e.jsx(k,{className:"h-4 w-4 mr-2"}),"Add Milestone"]})]})]})]})]}),e.jsxs("div",{className:"rounded-lg border bg-card p-6 space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(oe,{className:"h-5 w-5 text-primary"}),e.jsx("h3",{className:"font-semibold",children:"PRD Summary"})]}),e.jsxs("div",{className:"grid gap-3 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Feature Name:"}),e.jsx("span",{className:"font-medium",children:a.featureName||"â€”"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Project:"}),e.jsx("span",{className:"font-medium",children:(R==null?void 0:R.name)||"Standalone"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Area:"}),e.jsx("span",{className:"font-medium capitalize",children:a.area||"â€”"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Assigned To:"}),e.jsx("span",{className:"font-medium capitalize",children:a.assignee||"Unassigned"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"User Stories:"}),e.jsx("span",{className:"font-medium",children:((F=a.userStories)==null?void 0:F.length)||0})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Requirements:"}),e.jsx("span",{className:"font-medium",children:((z=a.requirements)==null?void 0:z.length)||0})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Estimated Effort:"}),e.jsx("span",{className:"font-medium",children:a.estimatedEffort||"â€”"})]})]}),e.jsxs("div",{className:"pt-4 border-t space-y-2",children:[e.jsx("p",{className:"text-sm font-medium",children:"Completion Status"}),C.slice(0,3).map(r=>e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[r.isComplete?e.jsx(be,{className:"h-4 w-4 text-green-500"}):e.jsx(Te,{className:"h-4 w-4 text-yellow-500"}),e.jsx("span",{className:r.isComplete?"text-muted-foreground":"text-yellow-600",children:r.title})]},r.id))]}),!A&&e.jsx("div",{className:"p-3 rounded-md bg-yellow-500/10 border border-yellow-200 text-sm text-yellow-700",children:"Please complete all required steps before generating your PRD."})]})]})}function is(){const a=Ge(),[i,m]=u.useState("list"),[x,n]=u.useState("active"),{prds:g,isLoaded:p,initialize:f,currentStep:h,formData:t,setCurrentStep:d,nextStep:l,prevStep:c,resetForm:N,addPRD:D,deletePRD:R}=J(),{projects:C,initialize:A}=xe();u.useEffect(()=>{f(),A()},[f,A]);const y=H.find(s=>s.id===h),K=(y==null?void 0:y.isComplete(t))??!1,M=h<5?K:!0,F=H.slice(0,3).every(s=>s.isComplete(t)),z=()=>{N(),m("create")},r=()=>{N(),m("list")},E=async()=>{if(!t.featureName){L.error("Please enter a feature name first");return}const s={projectId:t.projectId,featureName:t.featureName||"Untitled PRD",version:t.version||"1.0",author:t.author||"Justin",assignee:t.assignee,area:t.area||"personal",status:"draft",problemStatement:t.problemStatement||"",goals:t.goals||[],nonGoals:t.nonGoals,targetUsers:t.targetUsers||"",userStories:t.userStories||[],requirements:t.requirements||[],technicalApproach:t.technicalApproach,dependencies:t.dependencies,risks:t.risks,assumptions:t.assumptions,constraints:t.constraints,successMetrics:t.successMetrics,milestones:t.milestones,estimatedEffort:t.estimatedEffort};await D(s)&&(L.success("PRD draft saved!"),N(),m("list"))},I=async()=>{if(!F){L.error("Please complete all required steps first");return}const s={projectId:t.projectId,featureName:t.featureName,version:t.version||"1.0",author:t.author||"Justin",assignee:t.assignee,area:t.area||"personal",status:"draft",problemStatement:t.problemStatement,goals:t.goals,nonGoals:t.nonGoals,targetUsers:t.targetUsers,userStories:t.userStories,requirements:t.requirements,technicalApproach:t.technicalApproach,dependencies:t.dependencies,risks:t.risks,assumptions:t.assumptions,constraints:t.constraints,successMetrics:t.successMetrics,milestones:t.milestones,estimatedEffort:t.estimatedEffort},v=await D(s);if(v){const S=t.projectId?C.find(we=>we.id===t.projectId):void 0,G=fe(v,{project:S}),q=`PRD-${Ne(v.featureName)}`;ve(G,q),L.success("PRD created and downloaded!"),N(),m("list")}},Q=s=>{const v=s.projectId?C.find(q=>q.id===s.projectId):void 0,S=fe(s,{project:v}),G=`PRD-${Ne(s.featureName)}`;ve(S,G),L.success(`Exported "${s.featureName}" to markdown`)},ee=async s=>{confirm(`Delete PRD "${s.featureName}"?`)&&(await R(s.id),L.success("PRD deleted"))},se={draft:"bg-gray-500/10 text-gray-700 border-gray-200",review:"bg-blue-500/10 text-blue-700 border-blue-200",approved:"bg-green-500/10 text-green-700 border-green-200",in_progress:"bg-yellow-500/10 text-yellow-700 border-yellow-200",completed:"bg-purple-500/10 text-purple-700 border-purple-200",implemented:"bg-emerald-500/10 text-emerald-700 border-emerald-200"},ae=()=>{switch(h){case 1:return e.jsx(_e,{});case 2:return e.jsx(We,{});case 3:return e.jsx(Ve,{});case 4:return e.jsx(Be,{});case 5:return e.jsx(Je,{});default:return null}},O=g.filter(s=>["draft","review","approved","in_progress"].includes(s.status)),U=g.filter(s=>s.status==="completed"||s.status==="implemented"),$=x==="active"?O:U;return i==="list"?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl sm:text-3xl font-semibold tracking-tight",children:"PRD Creator"}),e.jsx("p",{className:"text-muted-foreground text-sm mt-1",children:"Create and manage Product Requirements Documents"})]}),e.jsxs(o,{onClick:z,className:"w-full sm:w-auto",children:[e.jsx(k,{className:"h-4 w-4 mr-2"}),"New PRD"]})]}),e.jsx(ye,{value:x,onValueChange:s=>n(s),children:e.jsxs(Ce,{children:[e.jsxs(he,{value:"active",className:"gap-2",children:[e.jsx(oe,{className:"h-4 w-4"}),"Active",O.length>0&&e.jsx(P,{variant:"secondary",className:"ml-1 h-5 px-1.5",children:O.length})]}),e.jsxs(he,{value:"implemented",className:"gap-2",children:[e.jsx(pe,{className:"h-4 w-4"}),"Implemented",U.length>0&&e.jsx(P,{variant:"secondary",className:"ml-1 h-5 px-1.5",children:U.length})]})]})}),p?$.length===0?e.jsx(te,{className:"text-center",children:e.jsx(re,{className:"pt-12 pb-12",children:x==="active"?e.jsxs(e.Fragment,{children:[e.jsx(oe,{className:"h-12 w-12 mx-auto text-muted-foreground/50 mb-4"}),e.jsx("h3",{className:"text-lg font-medium mb-2",children:"No active PRDs"}),e.jsx("p",{className:"text-muted-foreground text-sm mb-4",children:"Create your first Product Requirements Document to get started."}),e.jsxs(o,{onClick:z,children:[e.jsx(k,{className:"h-4 w-4 mr-2"}),"Create PRD"]})]}):e.jsxs(e.Fragment,{children:[e.jsx(pe,{className:"h-12 w-12 mx-auto text-muted-foreground/50 mb-4"}),e.jsx("h3",{className:"text-lg font-medium mb-2",children:"No implemented PRDs"}),e.jsx("p",{className:"text-muted-foreground text-sm mb-4",children:"PRDs will appear here when their linked tasks are completed."})]})})}):e.jsx("div",{className:"grid gap-4",children:$.map(s=>{var S,G;const v=s.projectId?C.find(q=>q.id===s.projectId):null;return e.jsxs(te,{className:"hover:shadow-md transition-shadow cursor-pointer",onClick:()=>a(`/prd/${s.id}`),children:[e.jsx(De,{className:"pb-3",children:e.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-start sm:justify-between sm:gap-4",children:[e.jsxs("div",{className:"space-y-1 min-w-0",children:[e.jsx(Se,{className:"text-base sm:text-lg leading-tight",children:s.featureName}),e.jsxs(ke,{className:"flex items-center gap-2 flex-wrap text-xs sm:text-sm",children:[v&&e.jsxs(e.Fragment,{children:[e.jsx("span",{children:v.name}),e.jsx("span",{children:"â€¢"})]}),e.jsx("span",{className:"capitalize",children:s.area}),e.jsx("span",{children:"â€¢"}),e.jsxs("span",{children:["v",s.version]})]})]}),e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsx(P,{variant:"outline",className:se[s.status],children:s.status.replace("_"," ")}),s.assignee&&e.jsx(P,{variant:"secondary",className:"capitalize",children:s.assignee})]})]})}),e.jsxs(re,{className:"pt-0",children:[e.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between text-sm text-muted-foreground",children:[e.jsxs("div",{className:"flex items-center gap-2 sm:gap-4 flex-wrap text-xs sm:text-sm",children:[e.jsxs("span",{children:[((S=s.userStories)==null?void 0:S.length)||0," stories"]}),e.jsx("span",{className:"hidden sm:inline",children:"â€¢"}),e.jsxs("span",{children:[((G=s.requirements)==null?void 0:G.length)||0," req."]}),s.estimatedEffort&&e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"hidden sm:inline",children:"â€¢"}),e.jsx("span",{className:"text-xs",children:s.estimatedEffort})]})]}),e.jsxs("div",{className:"flex items-center gap-2",onClick:q=>q.stopPropagation(),children:[e.jsxs(o,{variant:"ghost",size:"sm",onClick:()=>Q(s),children:[e.jsx(je,{className:"h-4 w-4 mr-1"}),"Export"]}),e.jsx(o,{variant:"ghost",size:"sm",className:"text-destructive hover:text-destructive",onClick:()=>ee(s),children:"Delete"})]})]}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-2",children:["Created ",me(new Date(s.createdAt),"MMM d, yyyy"),s.updatedAt!==s.createdAt&&e.jsxs(e.Fragment,{children:[" â€¢ Updated ",me(new Date(s.updatedAt),"MMM d, yyyy")]})]})]})]},s.id)})}):e.jsx("div",{className:"flex items-center justify-center p-12",children:e.jsx("div",{className:"h-8 w-8 animate-spin rounded-full border-4 border-primary border-t-transparent"})})]}):e.jsxs("div",{className:"space-y-6 pb-24 sm:pb-20",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(o,{variant:"ghost",size:"icon",onClick:r,children:e.jsx(ge,{className:"h-4 w-4"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl font-semibold",children:"Create PRD"}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Step ",h," of 5: ",y==null?void 0:y.title]})]})]}),e.jsxs(o,{variant:"outline",size:"sm",onClick:r,children:[e.jsx(qe,{className:"h-4 w-4 mr-2"}),"View All"]})]}),e.jsx("div",{className:"pt-4 pb-8",children:e.jsx(Le,{currentStep:h,formData:t,onStepClick:d})}),e.jsx(te,{children:e.jsx(re,{className:"pt-6",children:ae()})}),e.jsxs("div",{className:"fixed bottom-0 left-0 right-0 bg-background border-t p-3 sm:p-4 flex items-center justify-between gap-2 sm:gap-4 md:left-64",children:[e.jsx("div",{className:"flex gap-2",children:h>1&&e.jsxs(o,{variant:"outline",size:"sm",onClick:c,className:"sm:size-default",children:[e.jsx(ge,{className:"h-4 w-4 sm:mr-2"}),e.jsx("span",{className:"hidden sm:inline",children:"Back"})]})}),e.jsxs("div",{className:"flex gap-2",children:[t.featureName&&e.jsxs(o,{variant:"outline",size:"sm",onClick:E,className:"sm:size-default",children:[e.jsx(Ie,{className:"h-4 w-4 sm:mr-2"}),e.jsx("span",{className:"hidden sm:inline",children:"Save Draft"})]}),h<5?e.jsxs(o,{size:"sm",onClick:l,disabled:!M,className:"sm:size-default",children:[e.jsx("span",{className:"hidden sm:inline",children:"Next"}),e.jsx(Ue,{className:"h-4 w-4 sm:ml-2"})]}):e.jsxs(o,{size:"sm",onClick:I,disabled:!F,className:"sm:size-default",children:[e.jsx(je,{className:"h-4 w-4 sm:mr-2"}),e.jsx("span",{className:"hidden sm:inline",children:"Generate PRD"})]})]})]})]})}export{is as PrdPage};
