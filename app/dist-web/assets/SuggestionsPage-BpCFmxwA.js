import{r,j as e}from"./vendor-react-nkeu7MKf.js";import{C as J,a as K,b as W,c as X}from"./card-DofhpG9s.js";import{c as ye,j as o,k as i,q as O,a as c,l as we,A as ae,B as b,F as Q,X as H}from"./index-CPS4omDK.js";import{T as xe,a as pe,b as G,c as M}from"./tabs-Cmrq6Lm5.js";import{D as he,a as ue,b as ge,c as fe,d as je,e as Ce}from"./dialog-Bl_bvdQq.js";import{T as ke}from"./textarea-BBbfJNVq.js";import{S as Z}from"./sparkles-BLiuUSc5.js";import{F as re}from"./folder-open-DLp-woNU.js";import{C as Se}from"./circle-alert-DyLAPNUe.js";import{S as Pe}from"./search-CeY--wD6.js";import{R as De}from"./refresh-cw-TukYtzPM.js";import{C as Ae}from"./circle-check-xxPo8vmd.js";import{A as Re}from"./archive-C34mJblt.js";import{E as Fe}from"./external-link-C-yTNV71.js";import{M as Te}from"./message-square-D4d5gbTT.js";import{T as Ge}from"./trash-2-i2zOv6cB.js";import{S as Me}from"./send-CBxAVblF.js";import{C as ne}from"./check-SkeQixEM.js";import{P as Le}from"./play-CtXgyUQu.js";import{R as le}from"./rotate-ccw-DBVY3p__.js";import{a as Ie}from"./vendor-router-bCYKpmtI.js";import{f as Y,n as _e}from"./vendor-date-fns-BDn9Xvdo.js";import"./vendor-markdown-zaQAhtrl.js";import"./vendor-recharts-COauwCrp.js";import"./vendor-radix-DCQ-pcr5.js";import"./vendor-floating-ui-_Y3uXdsy.js";/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ze=ye("Github",[["path",{d:"M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5.08-1.25-.27-2.48-1-3.5.28-1.15.28-2.35 0-3.5 0 0-1 0-3 1.5-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35 0 3.5A5.403 5.403 0 0 0 4 9c0 3.5 3 5.5 6 5.5-.39.49-.68 1.05-.85 1.65-.17.6-.22 1.23-.15 1.85v4",key:"tonef"}],["path",{d:"M9 18c-4.51 2-5-2-7-2",key:"9comsn"}]]),ie={"32b4b44b-a6f9-46c1-bc56-0ec819d766a1":"~/projects/personal-assistant","974c45ac-82f0-4e66-9403-94071d9da454":"~/projects/wellfy","wellfy-lms":"~/projects/wellfy","aba3c4c3-cdaa-466c-a7f3-210f70dbb852":"~/projects/backend-diabetesnotes","022d19f7-e15d-4c65-ba85-528033ab5d44":"~/projects/dot1","6fa57ff7-547a-48b7-bff9-cf27c333fc82":"~/projects/supplement-webshop"};function Ee({isOpen:x,onClose:p,onGenerate:f}){const[d,L]=r.useState("pa-projects"),[t,y]=r.useState(null),[I,m]=r.useState(!1),[w,$]=r.useState([]),[C,k]=r.useState([]),[_,S]=r.useState(!1),[j,P]=r.useState(!1),[v,h]=r.useState(null),D=r.useCallback(async()=>{S(!0);try{const u=(await o.getProjects()).filter(g=>g.status==="active"||g.status==="pipeline");$(u)}catch{i.error("Failed to load projects")}finally{S(!1)}},[]),A=r.useCallback(async()=>{P(!0),h(null);try{const a=await o.getGitHubRepos();k(a.repos||[]),a.message&&(!a.repos||a.repos.length===0)&&h(a.message)}catch{h("Failed to fetch GitHub repos")}finally{P(!1)}},[]);r.useEffect(()=>{x&&(D(),A(),y(null),m(!1))},[x,D,A]),r.useEffect(()=>{y(null)},[d]);function N(){var a;return d==="pa-projects"?((a=w.find(u=>u.id===t))==null?void 0:a.name)??"Unknown":t??"Unknown"}function R(){if(d==="pa-projects"&&t)return ie[t]}const z=()=>{t&&f({source:d==="pa-projects"?"pa-project":"github",projectId:t,projectName:N(),projectPath:R(),deepMode:I,count:3})},F=({id:a,name:u,description:g,extra:T})=>e.jsxs("label",{className:we("flex items-start gap-3 rounded-lg border p-3 cursor-pointer transition-colors",t===a?"border-primary bg-primary/5 ring-1 ring-primary/30":"border-border hover:bg-muted/50"),children:[e.jsx("input",{type:"radio",name:"project-select",value:a,checked:t===a,onChange:()=>y(a),className:"mt-1 h-4 w-4 accent-primary"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsx("span",{className:"font-medium text-sm",children:u}),T&&e.jsx("span",{className:"text-xs text-muted-foreground",children:T})]}),g&&e.jsx("p",{className:"text-xs text-muted-foreground mt-0.5 line-clamp-2",children:g})]})]});return e.jsx(he,{open:x,onOpenChange:a=>!a&&p(),children:e.jsxs(ue,{className:"max-w-lg",children:[e.jsxs(ge,{children:[e.jsxs(fe,{className:"flex items-center gap-2",children:[e.jsx(Z,{className:"h-5 w-5 text-primary"}),"Generate New Suggestions"]}),e.jsx(je,{children:"Select a project to analyze and generate 3 AI-powered improvement suggestions."})]}),e.jsxs(xe,{value:d,onValueChange:L,children:[e.jsxs(pe,{className:"grid w-full grid-cols-2",children:[e.jsxs(G,{value:"pa-projects",className:"flex items-center gap-2",children:[e.jsx(re,{className:"h-4 w-4"}),"PA Projects"]}),e.jsxs(G,{value:"github",className:"flex items-center gap-2",children:[e.jsx(ze,{className:"h-4 w-4"}),"GitHub"]})]}),e.jsx(M,{value:"pa-projects",className:"mt-3",children:_?e.jsx("div",{className:"flex items-center justify-center py-8",children:e.jsx(O,{className:"h-5 w-5 animate-spin text-muted-foreground"})}):w.length===0?e.jsxs("div",{className:"text-center py-8 text-muted-foreground text-sm",children:[e.jsx(re,{className:"h-8 w-8 mx-auto mb-2 opacity-50"}),"No active projects found."]}):e.jsx("div",{className:"space-y-2 max-h-[280px] overflow-y-auto pr-1",children:w.map(a=>e.jsx(F,{id:a.id,name:a.name,description:a.description,extra:ie[a.id]?"ðŸ“":void 0},a.id))})}),e.jsx(M,{value:"github",className:"mt-3",children:j?e.jsx("div",{className:"flex items-center justify-center py-8",children:e.jsx(O,{className:"h-5 w-5 animate-spin text-muted-foreground"})}):v&&C.length===0?e.jsxs("div",{className:"text-center py-8 text-muted-foreground text-sm",children:[e.jsx(Se,{className:"h-8 w-8 mx-auto mb-2 opacity-50"}),e.jsx("p",{children:v})]}):C.length===0?e.jsxs("div",{className:"text-center py-8 text-muted-foreground text-sm",children:[e.jsx(Pe,{className:"h-8 w-8 mx-auto mb-2 opacity-50"}),"No repos found."]}):e.jsx("div",{className:"space-y-2 max-h-[280px] overflow-y-auto pr-1",children:C.map(a=>e.jsx(F,{id:a.name,name:a.name,description:a.description||null,extra:new Date(a.updatedAt).toLocaleDateString()},a.name))})})]}),e.jsxs("label",{className:"flex items-center gap-2 mt-1 cursor-pointer select-none",children:[e.jsx("input",{type:"checkbox",checked:I,onChange:a=>m(a.target.checked),className:"h-4 w-4 rounded accent-primary"}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:["Deep Mode",e.jsx("span",{className:"ml-1 text-xs opacity-75",children:"(slower, more detailed analysis)"})]})]}),e.jsxs(Ce,{className:"gap-2 sm:gap-0",children:[e.jsx(c,{variant:"outline",onClick:p,children:"Cancel"}),e.jsxs(c,{onClick:z,disabled:!t,children:[e.jsx(Z,{className:"mr-2 h-4 w-4"}),"Generate (3)"]})]})]})})}const ce={pending:"bg-yellow-500/10 text-yellow-700 dark:text-yellow-400",approved:"bg-green-500/10 text-green-700 dark:text-green-400",rejected:"bg-red-500/10 text-red-700 dark:text-red-400",implemented:"bg-purple-500/10 text-purple-700 dark:text-purple-400"},oe={improvement:"bg-blue-500/10 text-blue-700 dark:text-blue-400",feature:"bg-green-500/10 text-green-700 dark:text-green-400",fix:"bg-red-500/10 text-red-700 dark:text-red-400",refactor:"bg-purple-500/10 text-purple-700 dark:text-purple-400",security:"bg-orange-500/10 text-orange-700 dark:text-orange-400"},de={1:"Critical",2:"High",3:"Medium",4:"Low",5:"Minimal"};function me(x){const p=new Date(x.created_at);return(new Date().getTime()-p.getTime())/(1e3*60*60)<24}function He(){const[x,p]=r.useState("");return r.useEffect(()=>{const f=setInterval(()=>{p(d=>d.length>=3?"":d+".")},500);return()=>clearInterval(f)},[]),e.jsx("span",{className:"inline-block w-[1.2em] text-left",children:x})}function ps(){const x=Ie(),[p,f]=r.useState([]),[d,L]=r.useState(!0),[t,y]=r.useState(null),[I,m]=r.useState(!1),[w,$]=r.useState("active"),[C,k]=r.useState(!1),[_,S]=r.useState(!1),[j,P]=r.useState(!1),[v,h]=r.useState([]),[D,A]=r.useState(!1),[N,R]=r.useState(""),[z,F]=r.useState(!1),a=async()=>{L(!0);try{const s=await o.getSuggestions({limit:100});f(s)}catch(s){console.error("Failed to fetch suggestions:",s),i.error("Failed to load suggestions")}finally{L(!1)}},u=r.useCallback(async s=>{A(!0);try{const n=await o.getSuggestionComments(s);h(n)}catch(n){console.error("Failed to fetch comments:",n),h([])}finally{A(!1)}},[]),g=async s=>{k(!1),S(!0);try{const n=await o.generateSuggestions(s);if(n.success){const l=n.duration?` in ${(n.duration/1e3).toFixed(1)}s`:"";i.success(`Generated 3 suggestions for ${s.projectName}${l}`),await a()}else i.error("Generation failed. Try again.")}catch(n){const l=n instanceof Error?n.message:"Unknown error";l.includes("504")||l.includes("timed out")?i.error("Generation took too long. Try without Deep Mode."):i.error(`Failed to generate suggestions: ${l}`)}finally{S(!1)}},T=async()=>{if(!(!t||!N.trim())){F(!0);try{await o.addSuggestionComment(t.id,N.trim()),R(""),await u(t.id),i.success("Comment added")}catch{i.error("Failed to add comment")}finally{F(!1)}}},ve=async s=>{if(t)try{await o.deleteSuggestionComment(s),h(n=>n.filter(l=>l.id!==s)),i.success("Comment deleted")}catch{i.error("Failed to delete comment")}};r.useEffect(()=>{a()},[]);const U=p.filter(s=>s.status==="pending"||s.status==="approved"),V=p.filter(s=>s.status==="implemented"),q=p.filter(s=>s.status==="rejected"),ee=async s=>{try{await o.approveSuggestion(s),i.success("Suggestion confirmed!"),a(),m(!1)}catch{i.error("Failed to confirm suggestion")}},E=async s=>{try{await o.rejectSuggestion(s),i.success("Suggestion archived"),a(),m(!1)}catch{i.error("Failed to archive suggestion")}},se=async s=>{try{await o.updateSuggestion(s,{status:"pending"}),i.success("Suggestion restored"),a()}catch{i.error("Failed to restore suggestion")}},Ne=async s=>{try{await o.implementSuggestion(s),i.success("Suggestion marked as implemented"),a(),m(!1)}catch{i.error("Failed to mark as implemented")}},te=async s=>{P(!0);try{const n=await o.createPrdFromSuggestion(s);n.success&&(i.success("PRD created successfully!",{description:"Click to view the generated PRD",action:{label:"View PRD",onClick:()=>x(`/prd/${n.prdId}`)},duration:8e3}),a(),m(!1))}catch(n){const l=n instanceof Error?n.message:"Unknown error";l.includes("409")||l.includes("already exists")?i.error("A PRD already exists for this suggestion"):l.includes("504")||l.includes("timed out")?i.error("PRD generation timed out. Please try again."):i.error(`Failed to create PRD: ${l}`)}finally{P(!1)}},be=s=>{y(s),h([]),R(""),m(!0),u(s.id)};if(d)return e.jsx("div",{className:"flex items-center justify-center p-12",children:e.jsx("div",{className:"h-8 w-8 animate-spin rounded-full border-4 border-primary border-t-transparent"})});const B=({suggestion:s,showRestore:n=!1})=>e.jsxs("div",{onClick:()=>be(s),className:"flex items-start justify-between p-4 rounded-lg border bg-card hover:bg-muted/50 cursor-pointer transition-colors",children:[e.jsxs("div",{className:"space-y-1 flex-1 min-w-0 mr-4",children:[e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsx("span",{className:"font-medium",children:s.title}),me(s)&&e.jsx(b,{className:"bg-primary text-primary-foreground text-[10px] px-1.5 py-0",children:"New"}),e.jsx(b,{variant:"outline",className:oe[s.type]||"",children:s.type}),e.jsx(b,{variant:"outline",className:ce[s.status]||"",children:s.status})]}),s.project_name&&e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Project: ",s.project_name]}),s.description&&e.jsx("p",{className:"text-sm text-muted-foreground line-clamp-2",children:s.description}),e.jsxs("div",{className:"flex items-center gap-4 text-xs text-muted-foreground",children:[e.jsxs("span",{children:["Priority: ",de[s.priority]||s.priority]}),e.jsxs("span",{children:["Created: ",Y(new Date(s.created_at),"MMM d, yyyy")]})]})]}),e.jsxs("div",{className:"flex gap-2 shrink-0",children:[s.status==="pending"&&s.canImplement&&e.jsxs(e.Fragment,{children:[e.jsx(c,{size:"sm",variant:"outline",className:"text-green-600 hover:text-green-700 hover:bg-green-50 dark:hover:bg-green-950",onClick:l=>{l.stopPropagation(),ee(s.id)},title:"Approve (auto-implement)",children:e.jsx(ne,{className:"h-4 w-4"})}),e.jsx(c,{size:"sm",variant:"outline",className:"text-red-600 hover:text-red-700 hover:bg-red-50 dark:hover:bg-red-950",onClick:l=>{l.stopPropagation(),E(s.id)},title:"Decline",children:e.jsx(H,{className:"h-4 w-4"})})]}),s.status==="pending"&&!s.canImplement&&e.jsxs(e.Fragment,{children:[e.jsx(c,{size:"sm",variant:"outline",className:"text-blue-600 hover:text-blue-700 hover:bg-blue-50 dark:hover:bg-blue-950",onClick:l=>{l.stopPropagation(),te(s.id)},title:"Create PRD",disabled:j,children:e.jsx(Q,{className:"h-4 w-4"})}),e.jsx(c,{size:"sm",variant:"outline",className:"text-red-600 hover:text-red-700 hover:bg-red-50 dark:hover:bg-red-950",onClick:l=>{l.stopPropagation(),E(s.id)},title:"Decline",children:e.jsx(H,{className:"h-4 w-4"})})]}),n&&e.jsx(c,{size:"sm",variant:"outline",className:"text-blue-600 hover:text-blue-700 hover:bg-blue-50 dark:hover:bg-blue-950",onClick:l=>{l.stopPropagation(),se(s.id)},title:"Restore",children:e.jsx(le,{className:"h-4 w-4"})})]})]});return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-2xl sm:text-3xl font-semibold tracking-tight flex items-center gap-2",children:[e.jsx(ae,{className:"h-7 w-7"}),"Suggestions"]}),e.jsx("p",{className:"text-muted-foreground text-sm mt-1",children:"Review and manage James's improvement suggestions"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(c,{variant:"outline",size:"sm",onClick:a,children:[e.jsx(De,{className:"h-4 w-4 mr-2"}),"Refresh"]}),e.jsx(c,{size:"sm",onClick:()=>k(!0),disabled:_,className:"min-w-[160px]",children:_?e.jsxs(e.Fragment,{children:[e.jsx(O,{className:"h-4 w-4 mr-2 animate-spin"}),"Analyzing",e.jsx(He,{})]}):e.jsxs(e.Fragment,{children:[e.jsx(Z,{className:"h-4 w-4 mr-2"}),"New Suggestions"]})})]})]}),e.jsxs(xe,{value:w,onValueChange:$,className:"w-full",children:[e.jsxs(pe,{className:"grid w-full max-w-lg grid-cols-3",children:[e.jsxs(G,{value:"active",className:"flex items-center gap-2",children:[e.jsx(ae,{className:"h-4 w-4"}),"Active (",U.length,")"]}),e.jsxs(G,{value:"implemented",className:"flex items-center gap-2",children:[e.jsx(Ae,{className:"h-4 w-4"}),"Implemented (",V.length,")"]}),e.jsxs(G,{value:"archived",className:"flex items-center gap-2",children:[e.jsx(Re,{className:"h-4 w-4"}),"Archived (",q.length,")"]})]}),e.jsx(M,{value:"active",className:"mt-6",children:e.jsxs(J,{children:[e.jsx(K,{children:e.jsx(W,{className:"text-lg",children:"Active Suggestions"})}),e.jsx(X,{children:U.length===0?e.jsx("p",{className:"text-muted-foreground text-sm text-center py-8",children:"No active suggestions. James will create suggestions based on project analysis."}):e.jsx("div",{className:"space-y-3",children:U.map(s=>e.jsx(B,{suggestion:s},s.id))})})]})}),e.jsx(M,{value:"implemented",className:"mt-6",children:e.jsxs(J,{children:[e.jsx(K,{children:e.jsx(W,{className:"text-lg",children:"Implemented Suggestions"})}),e.jsx(X,{children:V.length===0?e.jsx("p",{className:"text-muted-foreground text-sm text-center py-8",children:"No implemented suggestions yet. Completed improvements will appear here."}):e.jsx("div",{className:"space-y-3",children:V.map(s=>e.jsx(B,{suggestion:s},s.id))})})]})}),e.jsx(M,{value:"archived",className:"mt-6",children:e.jsxs(J,{children:[e.jsx(K,{children:e.jsx(W,{className:"text-lg",children:"Archived Suggestions"})}),e.jsx(X,{children:q.length===0?e.jsx("p",{className:"text-muted-foreground text-sm text-center py-8",children:"No archived suggestions. Declined suggestions will appear here."}):e.jsx("div",{className:"space-y-3",children:q.map(s=>e.jsx(B,{suggestion:s,showRestore:!0},s.id))})})]})})]}),e.jsx(he,{open:I,onOpenChange:m,children:e.jsx(ue,{className:"max-w-2xl max-h-[85vh] overflow-hidden p-0 sm:p-0 gap-0 flex flex-col",children:t&&e.jsxs("div",{className:"flex-1 min-h-0 overflow-y-auto p-4 sm:p-6 overscroll-contain",style:{WebkitOverflowScrolling:"touch"},children:[e.jsxs(ge,{className:"mb-4 pr-8",children:[e.jsxs(fe,{className:"flex items-center gap-2 flex-wrap",children:[t.title,e.jsx(b,{variant:"outline",className:oe[t.type]||"",children:t.type})]}),e.jsx(je,{children:t.project_name&&e.jsxs("span",{children:["Project: ",t.project_name]})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[me(t)&&e.jsx(b,{className:"bg-primary text-primary-foreground text-[10px] px-1.5 py-0",children:"New"}),e.jsx(b,{variant:"outline",className:ce[t.status]||"",children:t.status}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:["Priority: ",de[t.priority]||t.priority]})]}),t.description&&e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-sm mb-1",children:"Description"}),e.jsx("p",{className:"text-sm text-muted-foreground whitespace-pre-wrap max-h-48 sm:max-h-none overflow-y-auto",children:t.description})]}),e.jsxs("div",{className:"text-xs text-muted-foreground space-y-1",children:[e.jsxs("p",{children:["Created: ",Y(new Date(t.created_at),"PPpp")]}),t.decided_at&&e.jsxs("p",{children:["Decided: ",Y(new Date(t.decided_at),"PPpp")]})]}),t.prd_id&&e.jsxs("div",{className:"flex items-center gap-2 rounded-lg border bg-blue-50 dark:bg-blue-950/30 border-blue-200 dark:border-blue-800 p-3",children:[e.jsx(Q,{className:"h-4 w-4 text-blue-600 dark:text-blue-400 shrink-0"}),e.jsx("span",{className:"text-sm text-blue-700 dark:text-blue-300 flex-1",children:"A PRD has been generated for this suggestion."}),e.jsxs(c,{variant:"ghost",size:"sm",className:"text-blue-600 hover:text-blue-700 dark:text-blue-400",onClick:()=>{m(!1),x(`/prd/${t.prd_id}`)},children:[e.jsx(Fe,{className:"h-3.5 w-3.5 mr-1"}),"View PRD"]})]}),e.jsxs("div",{className:"border-t pt-4",children:[e.jsxs("h4",{className:"font-medium text-sm mb-3 flex items-center gap-2",children:[e.jsx(Te,{className:"h-4 w-4"}),"Comments ",!D&&`(${v.length})`]}),D?e.jsx("div",{className:"flex items-center justify-center py-4",children:e.jsx("div",{className:"h-5 w-5 animate-spin rounded-full border-2 border-primary border-t-transparent"})}):v.length===0?e.jsx("p",{className:"text-sm text-muted-foreground text-center py-3",children:"No comments yet"}):e.jsx("div",{className:"space-y-3 mb-4 max-h-64 overflow-y-auto overscroll-contain",children:v.map(s=>e.jsxs("div",{className:"group rounded-lg border bg-muted/30 p-3",children:[e.jsxs("div",{className:"flex items-start justify-between gap-2",children:[e.jsx("p",{className:"text-sm whitespace-pre-wrap flex-1",children:s.comment_text}),e.jsx(c,{variant:"ghost",size:"sm",className:"h-7 w-7 p-0 opacity-100 sm:opacity-0 sm:group-hover:opacity-100 transition-opacity text-muted-foreground hover:text-destructive shrink-0",onClick:()=>ve(s.id),title:"Delete comment",children:e.jsx(Ge,{className:"h-3.5 w-3.5"})})]}),e.jsxs("div",{className:"flex items-center gap-2 mt-1.5",children:[e.jsx("span",{className:"text-xs text-muted-foreground font-medium",children:s.author}),e.jsxs("span",{className:"text-xs text-muted-foreground",children:["Â· ",_e(new Date(s.created_at),{addSuffix:!0})]})]})]},s.id))}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[e.jsx(ke,{placeholder:"Add implementation notes or requirements...",value:N,onChange:s=>R(s.target.value),className:"min-h-[60px] sm:min-h-[72px] resize-none text-sm flex-1",onKeyDown:s=>{s.key==="Enter"&&(s.metaKey||s.ctrlKey)&&(s.preventDefault(),T())}}),e.jsx(c,{size:"sm",variant:"outline",className:"shrink-0 sm:self-end self-stretch",disabled:!N.trim()||z,onClick:T,title:"Add comment (âŒ˜+Enter)",children:z?e.jsx("div",{className:"h-4 w-4 animate-spin rounded-full border-2 border-current border-t-transparent"}):e.jsxs(e.Fragment,{children:[e.jsx(Me,{className:"h-4 w-4 sm:mr-0 mr-2"}),e.jsx("span",{className:"sm:hidden",children:"Add Comment"})]})})]})]}),t.status==="pending"&&t.canImplement&&e.jsxs("div",{className:"flex gap-2 pt-4 border-t",children:[e.jsxs(c,{variant:"outline",className:"flex-1 text-green-600 hover:text-green-700 hover:bg-green-50 dark:hover:bg-green-950",onClick:()=>ee(t.id),children:[e.jsx(ne,{className:"h-4 w-4 mr-2"}),"Approve"]}),e.jsxs(c,{variant:"outline",className:"flex-1 text-red-600 hover:text-red-700 hover:bg-red-50 dark:hover:bg-red-950",onClick:()=>E(t.id),children:[e.jsx(H,{className:"h-4 w-4 mr-2"}),"Decline"]})]}),t.status==="pending"&&!t.canImplement&&e.jsxs("div",{className:"flex gap-2 pt-4 border-t",children:[e.jsx(c,{variant:"default",className:"flex-1",onClick:()=>te(t.id),disabled:j,children:j?e.jsxs(e.Fragment,{children:[e.jsx(O,{className:"h-4 w-4 mr-2 animate-spin"}),"Generating PRDâ€¦"]}):e.jsxs(e.Fragment,{children:[e.jsx(Q,{className:"h-4 w-4 mr-2"}),"Create PRD"]})}),e.jsxs(c,{variant:"outline",className:"flex-1 text-red-600 hover:text-red-700 hover:bg-red-50 dark:hover:bg-red-950",onClick:()=>E(t.id),disabled:j,children:[e.jsx(H,{className:"h-4 w-4 mr-2"}),"Decline"]})]}),t.status==="approved"&&e.jsx("div",{className:"flex gap-2 pt-4 border-t",children:e.jsxs(c,{variant:"default",className:"flex-1",onClick:()=>Ne(t.id),children:[e.jsx(Le,{className:"h-4 w-4 mr-2"}),"Mark as Implemented"]})}),t.status==="rejected"&&e.jsx("div",{className:"flex gap-2 pt-4 border-t",children:e.jsxs(c,{variant:"outline",className:"flex-1 text-blue-600 hover:text-blue-700 hover:bg-blue-50 dark:hover:bg-blue-950",onClick:()=>{se(t.id),m(!1)},children:[e.jsx(le,{className:"h-4 w-4 mr-2"}),"Restore"]})})]})]})})}),e.jsx(Ee,{isOpen:C,onClose:()=>k(!1),onGenerate:g})]})}export{ps as SuggestionsPage};
