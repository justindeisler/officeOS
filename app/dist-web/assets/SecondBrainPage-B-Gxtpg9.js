import{r as n,j as e}from"./vendor-react-DeR5d9Tv.js";import{c as P,m as k,n as Le,a6 as C,a as E,B as L,I as Te,j as h,X as De,F as R,y as Ae,H as Ee,a7 as b,a1 as Re,a2 as Be,a0 as Ie,a3 as ze,o as Ue}from"./index-B9wpeZVf.js";import{T as Ve,a as He,b as H}from"./tabs-DfLUlg96.js";import{M as re}from"./MarkdownRenderer-BooZe5vT.js";import{A as Oe,m as F}from"./vendor-framer-motion-5hIM_3P7.js";import{A as Pe}from"./arrow-left-BW1gWke2.js";import{S as We}from"./search-CsGBUCyq.js";import{M}from"./message-square-BG2lzqiu.js";import{A as ne}from"./activity-Wuxv5N4L.js";import{C as $e}from"./calendar-BXLbKi9j.js";import{C as qe}from"./chevron-right-BZ1gvvAY.js";import{U as Ge}from"./user-MfgVYJL9.js";import{f as W,n as ie}from"./vendor-date-fns-D0ugVOfH.js";import"./vendor-markdown-PIr_2kdo.js";import"./vendor-recharts-DrMJw15s.js";import"./vendor-radix-sPo3_CXI.js";import"./vendor-floating-ui-CESiY8Ey.js";import"./vendor-router-9bGSKQ4q.js";import"./link-2-Z10lzzUG.js";import"./external-link-DW0qQmWJ.js";import"./check-BOz78U_D.js";/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const le=P("BookOpen",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qe=P("GitFork",[["circle",{cx:"12",cy:"18",r:"3",key:"1mpf1b"}],["circle",{cx:"6",cy:"6",r:"3",key:"1lh9wr"}],["circle",{cx:"18",cy:"6",r:"3",key:"1h7g24"}],["path",{d:"M18 9v2c0 .6-.4 1-1 1H7c-.6 0-1-.4-1-1V9",key:"1uq4wg"}],["path",{d:"M12 12v3",key:"158kv8"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _e=P("Microscope",[["path",{d:"M6 18h8",key:"1borvv"}],["path",{d:"M3 22h18",key:"8prr45"}],["path",{d:"M14 22a7 7 0 1 0 0-14h-1",key:"1jwaiy"}],["path",{d:"M9 14h2",key:"197e7h"}],["path",{d:"M9 12a2 2 0 0 1-2-2V6h6v4a2 2 0 0 1-2 2Z",key:"1bmzmy"}],["path",{d:"M12 6V3a1 1 0 0 0-1-1H9a1 1 0 0 0-1 1v3",key:"1drr47"}]]),N=Le("SecondBrainPage"),O=[.16,1,.3,1],oe={"":{icon:R,label:"Root",description:"Top-level documents"},journal:{icon:$e,label:"Journal",description:"Daily entries and reflections"},concepts:{icon:Ee,label:"Concepts",description:"Deep dives into topics"},decisions:{icon:Qe,label:"Decisions",description:"Important decisions with context"},projects:{icon:Ae,label:"Projects",description:"Project documentation"},research:{icon:_e,label:"Research",description:"Research notes and explorations"}};function Je(){const[i,m]=n.useState(!1);return n.useEffect(()=>{const s=()=>m(window.innerWidth<768);return s(),window.addEventListener("resize",s),()=>window.removeEventListener("resize",s)},[]),i}function wt(){const[i,m]=n.useState([]),[s,o]=n.useState(null),[g,l]=n.useState(""),[x,j]=n.useState(""),[u,c]=n.useState(null),[v,d]=n.useState(!0),[T,y]=n.useState(!1),[ce,de]=n.useState(new Set(["journal","concepts","decisions","projects","research"])),[me,$]=n.useState(null),[f,xe]=n.useState("documents"),[ue,he]=n.useState([]),[w,pe]=n.useState(7),[fe,q]=n.useState(!1),[ge,je]=n.useState([]),[be,ye]=n.useState([]),[S,G]=n.useState(null),[ve,Q]=n.useState(!1),[B,Ne]=n.useState(""),[we,I]=n.useState(null),_=n.useRef({lastFetch:0,inFlight:!1,rateLimitedUntil:0}),[D,ke]=n.useState("all"),[J,z]=n.useState("list"),A=Je();n.useEffect(()=>{X()},[]),n.useEffect(()=>{if(!x.trim()){c(null);return}const t=setTimeout(async()=>{try{const a=f==="documents"?"documents":f==="conversations"?"conversation":void 0,r=await k.searchBrain(x,a);c(r.results)}catch(a){N.error({err:a},"Search failed")}},300);return()=>clearTimeout(t)},[x,f]),n.useEffect(()=>{f==="activity"?Y():f==="conversations"&&U()},[f]);const K=n.useRef(w);n.useEffect(()=>{K.current!==w&&(K.current=w,f==="activity"&&Y())},[w,f]);const X=async()=>{try{d(!0),$(null);const t=await k.getSecondBrainDocuments();if(m(t.folders),!A){const a=t.folders.flatMap(r=>r.documents)[0];a&&await Z(a,!1)}}catch(t){N.error({err:t},"Failed to load documents"),$("Failed to load documents. Make sure the API server is running.")}finally{d(!1)}},Z=async(t,a=!0)=>{try{y(!0);const r=await k.getSecondBrainDocument(t.path);o({...t,content:r.content}),l(r.content),G(null),a&&A&&z("document")}catch(r){N.error({err:r},"Failed to load document"),l(`# Error

Failed to load document content.`)}finally{y(!1)}},Y=async()=>{try{q(!0);const t=await k.getBrainActivity(w);he(t.activities)}catch(t){N.error({err:t},"Failed to load activity")}finally{q(!1)}},U=n.useCallback(async(t=!1)=>{const a=_.current,r=Date.now();if(!a.inFlight){if(!t&&r<a.rateLimitedUntil){N.info(`[SecondBrain] Rate limited, retry after ${Math.ceil((a.rateLimitedUntil-r)/1e3)}s`);return}if(!(!t&&r-a.lastFetch<2e3))try{a.inFlight=!0,a.lastFetch=r,Q(!0),I(null);const p=await k.getConversations({agent:B||void 0,limit:50});je(p.sessions),ye(p.agents)}catch(p){N.error({err:p},"Failed to load conversations"),p&&typeof p=="object"&&"status"in p&&p.status===429?(a.rateLimitedUntil=Date.now()+3e4,I("Too many requests. Will retry automatically in 30 seconds."),setTimeout(()=>{_.current.rateLimitedUntil<=Date.now()&&U(!0)},31e3)):I("Failed to load conversations. Click retry to try again.")}finally{a.inFlight=!1,Q(!1)}}},[B]),ee=async t=>{try{y(!0);const a=await k.getConversationTranscript(t.agent,t.id);G({messages:a.messages,agent:t.agent,id:t.id}),o(null),l(""),A&&z("document")}catch(a){N.error({err:a},"Failed to load conversation")}finally{y(!1)}},Se=()=>{z("list")},Ce=t=>{de(a=>{const r=new Set(a);return r.has(t)?r.delete(t):r.add(t),r})},Fe=()=>{j(""),c(null)},Me=n.useMemo(()=>{let t=i;if(D!=="all"&&(t=i.filter(a=>a.name===D)),u&&f==="documents"){const a={};for(const r of u){if(r.type!=="document")continue;const p=r.source==="root"?"":r.source;a[p]||(a[p]=[]),a[p].push({path:r.path,name:r.path.split("/").pop()||r.path,title:r.title,folder:p,lastModified:r.lastModified})}return Object.entries(a).map(([r,p])=>({name:r,documents:p}))}return t},[i,u,D,f]),V=i.reduce((t,a)=>t+a.documents.length,0),te={enter:t=>({x:t>0?"100%":"-100%",opacity:0}),center:{x:0,opacity:1},exit:t=>({x:t>0?"-100%":"100%",opacity:0})},se=({isMobileView:t=!1})=>S?e.jsx(Ye,{conversation:S,isMobile:t}):e.jsx(Xe,{selectedDoc:s,docContent:g,isLoadingDoc:T,isMobile:t}),ae=()=>e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"p-3 border-b",children:[e.jsxs("div",{className:"relative",children:[e.jsx(We,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(Te,{placeholder:"Search everything...",value:x,onChange:t=>j(t.target.value),className:h("pl-9 pr-9",A?"h-10 bg-muted/50":"h-9 bg-background")}),x&&e.jsx(E,{variant:"ghost",size:"icon",className:"absolute right-1 top-1/2 -translate-y-1/2 h-8 w-8",onClick:Fe,children:e.jsx(De,{className:"h-4 w-4"})})]}),u&&e.jsxs("p",{className:"text-xs text-muted-foreground mt-2",children:[u.length," result",u.length!==1?"s":""," for “",x,"”"]})]}),e.jsx("div",{className:"border-b",children:e.jsx(Ve,{value:f,onValueChange:xe,className:"w-full",children:e.jsxs(He,{className:"w-full justify-start rounded-none border-b-0 h-auto p-0 bg-transparent",children:[e.jsxs(H,{value:"documents",className:"rounded-none border-b-2 border-transparent data-[state=active]:border-primary text-xs px-3 py-2.5",children:[e.jsx(R,{className:"h-3.5 w-3.5 mr-1.5"}),"Docs"]}),e.jsxs(H,{value:"conversations",className:"rounded-none border-b-2 border-transparent data-[state=active]:border-primary text-xs px-3 py-2.5",children:[e.jsx(M,{className:"h-3.5 w-3.5 mr-1.5"}),"Chat"]}),e.jsxs(H,{value:"activity",className:"rounded-none border-b-2 border-transparent data-[state=active]:border-primary text-xs px-3 py-2.5",children:[e.jsx(ne,{className:"h-3.5 w-3.5 mr-1.5"}),"Activity"]})]})})}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-2",children:[f==="documents"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"flex flex-wrap gap-1.5 px-1 py-2",children:["all","journal","concepts","decisions","projects","research"].map(t=>{var a;return e.jsx("button",{onClick:()=>ke(t),className:h("text-xs px-2.5 py-1 rounded-full border transition-colors",D===t?"bg-primary text-primary-foreground border-primary":"bg-background hover:bg-accent border-border text-muted-foreground"),children:t==="all"?"All":((a=oe[t])==null?void 0:a.label)||t},t)})}),u&&x&&e.jsx("div",{className:"space-y-1 mb-3",children:u.filter(t=>t.type!=="document").map((t,a)=>e.jsxs("button",{onClick:()=>{if(t.type==="conversation"){const r=t.path.split("/");r.length>=3&&ee({id:r[2],agent:r[1],timestamp:t.lastModified,messageCount:0,size:0,isLong:!1})}},className:"w-full flex items-start gap-2 px-3 py-2.5 rounded-md text-left hover:bg-accent transition-colors",children:[e.jsx("div",{className:h("mt-0.5 shrink-0 p-1 rounded",t.type==="agent-memory"?"bg-purple-500/10":"bg-blue-500/10"),children:t.type==="agent-memory"?e.jsx(C,{className:"h-3.5 w-3.5 text-purple-500"}):e.jsx(M,{className:"h-3.5 w-3.5 text-blue-500"})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("span",{className:"text-sm font-medium truncate block",children:t.title}),e.jsx("span",{className:"text-xs text-muted-foreground line-clamp-2",children:t.snippet})]})]},a))}),e.jsx(Ke,{isLoading:v,error:me,displayedFolders:Me,expandedFolders:ce,selectedDoc:s,searchQuery:x,onToggleFolder:Ce,onSelectDoc:Z,onRetry:X})]}),f==="conversations"&&e.jsx(Ze,{conversations:ge,agents:be,selectedConvo:S,filter:B,onFilterChange:t=>{Ne(t)},onSelect:ee,isLoading:ve,onRefresh:U,error:we}),f==="activity"&&e.jsx(et,{activities:ue,days:w,onDaysChange:pe,isLoading:fe})]})]});return e.jsxs("div",{className:"flex flex-col h-[calc(100vh-4rem)] -m-4 sm:-m-6 md:-m-8 overflow-hidden",children:[e.jsxs("div",{className:"hidden md:flex md:flex-col h-full",children:[e.jsx("div",{className:"flex items-center justify-between px-6 py-4 border-b bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 rounded-lg bg-primary/10",children:e.jsx(C,{className:"h-5 w-5 text-primary"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl font-semibold tracking-tight",children:"Second Brain"}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[V," document",V!==1?"s":""," • Search across everything"]})]})]})}),e.jsxs("div",{className:"flex flex-1 min-h-0",children:[e.jsx("div",{className:"w-80 flex flex-col bg-muted/30 border-r",children:e.jsx(ae,{})}),e.jsx("div",{className:"flex-1 flex flex-col min-w-0 bg-background",children:e.jsx(se,{})})]})]}),e.jsx("div",{className:"flex md:hidden flex-col h-full",children:e.jsx(Oe,{mode:"wait",custom:J==="document"?1:-1,children:J==="list"?e.jsxs(F.div,{custom:-1,variants:te,initial:"enter",animate:"center",exit:"exit",transition:{duration:.3,ease:O},className:"flex flex-col h-full",children:[e.jsxs("div",{className:"flex items-center gap-3 px-4 py-4 border-b bg-background/95 backdrop-blur",children:[e.jsx("div",{className:"p-2 rounded-lg bg-primary/10",children:e.jsx(C,{className:"h-5 w-5 text-primary"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-lg font-semibold tracking-tight",children:"Second Brain"}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[V," documents"]})]})]}),e.jsx("div",{className:"flex-1 flex flex-col overflow-hidden bg-muted/20",children:e.jsx(ae,{})})]},"list"):e.jsxs(F.div,{custom:1,variants:te,initial:"enter",animate:"center",exit:"exit",transition:{duration:.3,ease:O},className:"flex flex-col h-full bg-background",children:[e.jsxs("div",{className:"flex items-center gap-2 px-2 py-3 border-b bg-background/95 backdrop-blur",children:[e.jsx(E,{variant:"ghost",size:"icon",onClick:Se,className:"shrink-0 min-h-[44px] min-w-[44px]",children:e.jsx(Pe,{className:"h-5 w-5"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h1",{className:"text-base font-semibold tracking-tight truncate",children:S?`${S.agent} session`:(s==null?void 0:s.title)||"Document"}),(s==null?void 0:s.folder)&&e.jsx(L,{variant:"outline",className:"text-xs capitalize mt-0.5",children:s.folder})]})]}),e.jsx("div",{className:"flex-1 overflow-y-auto",children:e.jsx(se,{isMobileView:!0})})]},"document")})})]})}function Ke({isLoading:i,error:m,displayedFolders:s,expandedFolders:o,selectedDoc:g,searchQuery:l,onToggleFolder:x,onSelectDoc:j,onRetry:u}){return i?e.jsx("div",{className:"space-y-3 p-2",children:[1,2,3,4].map(c=>e.jsxs("div",{className:"space-y-2",children:[e.jsx(b,{className:"h-6 w-24"}),e.jsx(b,{className:"h-12 w-full"}),e.jsx(b,{className:"h-12 w-full"})]},c))}):m?e.jsxs("div",{className:"p-4 text-center",children:[e.jsx(le,{className:"h-12 w-12 mx-auto text-muted-foreground/50 mb-3"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:m}),e.jsx(E,{variant:"outline",size:"sm",className:"mt-3 min-h-[44px]",onClick:u,children:"Retry"})]}):s.length===0||s.every(c=>c.documents.length===0)?e.jsxs("div",{className:"p-4 text-center",children:[e.jsx(C,{className:"h-12 w-12 mx-auto text-muted-foreground/50 mb-3"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:l?"No documents match your search":"No documents yet"})]}):e.jsx("div",{className:"space-y-1",children:s.map(c=>{if(c.documents.length===0)return null;const v=oe[c.name]||{icon:R,label:c.name||"Documents"},d=v.icon,T=o.has(c.name);return e.jsxs(Re,{open:T,onOpenChange:()=>x(c.name),children:[e.jsx(Be,{asChild:!0,children:e.jsxs("button",{className:"flex items-center gap-2 w-full px-3 py-2.5 min-h-[44px] rounded-md text-sm font-medium text-muted-foreground hover:bg-accent hover:text-accent-foreground transition-colors",children:[T?e.jsx(Ie,{className:"h-4 w-4 shrink-0"}):e.jsx(qe,{className:"h-4 w-4 shrink-0"}),e.jsx(d,{className:"h-4 w-4 shrink-0"}),e.jsx("span",{className:"flex-1 text-left truncate",children:v.label}),e.jsx(L,{variant:"secondary",className:"text-xs font-normal",children:c.documents.length})]})}),e.jsx(ze,{children:e.jsx(F.div,{className:"ml-6 mt-1 space-y-0.5",initial:{opacity:0},animate:{opacity:1},transition:{duration:.2,ease:O},children:c.documents.map(y=>e.jsx(tt,{doc:y,isSelected:(g==null?void 0:g.path)===y.path,onClick:()=>j(y)},y.path))})})]},c.name)})})}function Xe({selectedDoc:i,docContent:m,isLoadingDoc:s,isMobile:o=!1}){return i?e.jsxs(e.Fragment,{children:[!o&&e.jsx("div",{className:"px-8 py-4 border-b",children:e.jsx("div",{className:"flex items-start justify-between gap-4",children:e.jsxs("div",{className:"min-w-0",children:[e.jsx("h2",{className:"text-2xl font-semibold tracking-tight truncate",children:i.title}),e.jsxs("div",{className:"flex items-center gap-3 mt-1 text-sm text-muted-foreground",children:[i.folder&&e.jsx(L,{variant:"outline",className:"capitalize",children:i.folder}),e.jsxs("span",{children:["Updated ",ie(new Date(i.lastModified),{addSuffix:!0})]})]})]})})}),e.jsx("div",{className:h("flex-1 overflow-y-auto",o&&"pb-safe"),children:s?e.jsxs("div",{className:h("space-y-4",o?"p-4":"p-8"),children:[e.jsx(b,{className:"h-8 w-3/4"}),e.jsx(b,{className:"h-4 w-full"}),e.jsx(b,{className:"h-4 w-full"}),e.jsx(b,{className:"h-4 w-2/3"}),e.jsx(b,{className:"h-32 w-full mt-6"})]}):e.jsx("div",{className:h(o?"p-4":"p-8"),children:e.jsx(re,{content:m,enableWikiLinks:!0,onWikiLink:g=>{N.info({data:g},"Wiki link clicked")}})})})]}):e.jsx("div",{className:"flex-1 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx(le,{className:"h-16 w-16 mx-auto text-muted-foreground/30 mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-muted-foreground",children:"Select a document to view"}),e.jsx("p",{className:"text-sm text-muted-foreground/70 mt-1",children:"Choose from the sidebar"})]})})}function Ze({conversations:i,agents:m,selectedConvo:s,filter:o,onFilterChange:g,onSelect:l,isLoading:x,onRefresh:j,error:u}){const c=n.useRef(o);n.useEffect(()=>{c.current!==o&&(c.current=o,j())},[o,j]);const v=x&&i.length===0&&!u;return e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex flex-wrap gap-1.5 px-1 py-2",children:[e.jsx("button",{onClick:()=>g(""),className:h("text-xs px-2.5 py-1 rounded-full border transition-colors",o?"bg-background hover:bg-accent border-border text-muted-foreground":"bg-primary text-primary-foreground border-primary"),children:"All"}),m.map(d=>e.jsx("button",{onClick:()=>g(d),className:h("text-xs px-2.5 py-1 rounded-full border transition-colors",o===d?"bg-primary text-primary-foreground border-primary":"bg-background hover:bg-accent border-border text-muted-foreground"),children:d},d))]}),u&&e.jsxs("div",{className:"mx-1 p-3 rounded-lg bg-destructive/10 border border-destructive/20",children:[e.jsx("p",{className:"text-sm text-destructive",children:u}),e.jsx(E,{variant:"outline",size:"sm",className:"mt-2 h-8 text-xs",onClick:()=>j(),disabled:x,children:x?"Retrying…":"Retry now"})]}),v?e.jsx("div",{className:"space-y-2 p-2",children:[1,2,3,4,5].map(d=>e.jsx(b,{className:"h-14 w-full"},d))}):i.length===0&&!u?e.jsxs("div",{className:"p-4 text-center",children:[e.jsx(M,{className:"h-12 w-12 mx-auto text-muted-foreground/30 mb-3"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"No conversations found"})]}):e.jsxs("div",{className:"space-y-0.5",children:[x&&i.length>0&&e.jsx("p",{className:"text-xs text-muted-foreground px-3 py-1",children:"Updating…"}),i.map(d=>e.jsxs(F.button,{onClick:()=>l(d),className:h("flex items-center gap-3 w-full px-3 py-2.5 rounded-md text-left transition-colors min-h-[44px]",(s==null?void 0:s.id)===d.id&&(s==null?void 0:s.agent)===d.agent?"bg-primary/10 text-primary":"hover:bg-accent"),whileTap:{scale:.98},children:[e.jsx("div",{className:"p-1.5 rounded-md bg-blue-500/10 shrink-0",children:e.jsx(M,{className:"h-3.5 w-3.5 text-blue-500"})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm font-medium truncate",children:d.agent}),d.isLong&&e.jsx(L,{variant:"secondary",className:"text-[10px] px-1.5",children:"Long"})]}),e.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[e.jsxs("span",{children:[d.messageCount," messages"]}),e.jsx("span",{children:"•"}),e.jsx("span",{children:W(new Date(d.timestamp),"MMM d, HH:mm")})]})]})]},`${d.agent}-${d.id}`))]})]})}function Ye({conversation:i,isMobile:m=!1}){return e.jsxs(e.Fragment,{children:[!m&&e.jsxs("div",{className:"px-8 py-4 border-b",children:[e.jsxs("h2",{className:"text-xl font-semibold tracking-tight",children:[i.agent," session"]}),e.jsxs("p",{className:"text-sm text-muted-foreground mt-1",children:[i.messages.length," messages"]})]}),e.jsx("div",{className:h("flex-1 overflow-y-auto",m?"p-4":"p-6"),children:e.jsx("div",{className:"space-y-4 max-w-3xl mx-auto",children:i.messages.map((s,o)=>e.jsxs("div",{className:h("flex gap-3",s.role==="user"?"justify-end":"justify-start"),children:[s.role!=="user"&&e.jsx("div",{className:"shrink-0 p-1.5 rounded-full bg-primary/10 h-8 w-8 flex items-center justify-center",children:e.jsx(Ue,{className:"h-4 w-4 text-primary"})}),e.jsxs("div",{className:h("max-w-[80%] rounded-xl px-4 py-2.5 text-sm",s.role==="user"?"bg-primary text-primary-foreground":"bg-muted"),children:[s.role==="user"?e.jsx("p",{className:"whitespace-pre-wrap",children:s.text}):e.jsx(re,{content:s.text||"",className:"text-sm"}),s.timestamp&&e.jsx("p",{className:h("text-[10px] mt-1",s.role==="user"?"text-primary-foreground/60":"text-muted-foreground"),children:W(new Date(s.timestamp),"HH:mm")})]}),s.role==="user"&&e.jsx("div",{className:"shrink-0 p-1.5 rounded-full bg-blue-500/10 h-8 w-8 flex items-center justify-center",children:e.jsx(Ge,{className:"h-4 w-4 text-blue-500"})})]},s.id||o))})})]})}function et({activities:i,days:m,onDaysChange:s,isLoading:o}){const g=o&&i.length===0;return e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex gap-1.5 px-1 py-2 sticky top-0 bg-inherit z-10",children:[[7,14,30].map(l=>e.jsxs("button",{onClick:()=>s(l),className:h("text-xs px-2.5 py-1 rounded-full border transition-colors",m===l?"bg-primary text-primary-foreground border-primary":"bg-background hover:bg-accent border-border text-muted-foreground"),children:[l,"d"]},l)),o&&i.length>0&&e.jsx("span",{className:"text-xs text-muted-foreground self-center ml-auto",children:"Updating…"})]}),g?e.jsx("div",{className:"space-y-2 p-2",children:[1,2,3,4,5].map(l=>e.jsx(b,{className:"h-12 w-full"},l))}):i.length===0?e.jsxs("div",{className:"p-4 text-center",children:[e.jsx(ne,{className:"h-12 w-12 mx-auto text-muted-foreground/30 mb-3"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"No recent activity"})]}):e.jsx("div",{className:"space-y-0.5",children:i.map((l,x)=>{const j=l.type==="document"?R:l.type==="conversation"?M:C,u=l.type==="document"?"text-emerald-500":l.type==="conversation"?"text-blue-500":"text-purple-500",c=l.type==="document"?"bg-emerald-500/10":l.type==="conversation"?"bg-blue-500/10":"bg-purple-500/10",v=j;return e.jsxs("div",{className:"flex items-start gap-3 px-3 py-2.5 rounded-md hover:bg-accent transition-colors",children:[e.jsx("div",{className:h("shrink-0 p-1.5 rounded-md mt-0.5",c),children:e.jsx(v,{className:h("h-3.5 w-3.5",u)})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("p",{className:"text-sm font-medium truncate",children:l.title}),e.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[e.jsx(L,{variant:"outline",className:"text-[10px] px-1.5 py-0",children:l.action}),e.jsx("span",{children:ie(new Date(l.lastModified),{addSuffix:!0})})]})]})]},x)})})]})}function tt({doc:i,isSelected:m,onClick:s}){return e.jsxs(F.button,{onClick:s,className:h("flex flex-col w-full px-3 py-2.5 min-h-[44px] rounded-md text-left transition-colors",m?"bg-primary/10 text-primary":"hover:bg-accent active:bg-accent/80"),whileTap:{scale:.98},transition:{duration:.1},children:[e.jsx("span",{className:"text-sm font-medium truncate",children:i.title}),e.jsx("span",{className:"text-xs text-muted-foreground mt-0.5",children:W(new Date(i.lastModified),"MMM d, yyyy")})]})}export{wt as SecondBrainPage};
