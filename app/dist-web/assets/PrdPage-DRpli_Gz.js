import{j as e,r as u}from"./vendor-react-nkeu7MKf.js";import{c as ee,j as Q,p as $,f as xe,L as b,I as w,a as o,X as q,a0 as ie,a1 as le,B as R,$ as ce,a2 as de,a3 as Ce,G as ke,F as oe,l as L}from"./index-Cgh2aQl7.js";import{T as De,a as Se,b as ue}from"./tabs-CaJlUK_y.js";import{C as re,c as ne,a as Pe,b as Re,d as Ae}from"./card-CRJ10d8t.js";import{C as we,S as V,a as _,b as W,c as B,d as j,e as me}from"./select-kNMDNoVB.js";import{T as Z}from"./textarea-BTyp2n0b.js";import{P as S}from"./plus-DcDcA8n9.js";import{U as Me}from"./user-C5xSNRWN.js";import{T as ze}from"./triangle-alert-BfHeG_OL.js";import{T as pe}from"./target-VZXZID5L.js";import{C as Fe}from"./calendar-DJkkzp6k.js";import{C as Te}from"./circle-alert-CF9irJ5c.js";import{f as he}from"./vendor-date-fns-D0ugVOfH.js";import{b as je,g as ge,d as fe}from"./markdown-DZSA0cWY.js";import{C as Ne}from"./circle-check-big-p3draf2t.js";import{D as ve}from"./download-eThNqEw4.js";import{A as be}from"./arrow-left-DcSx5nj_.js";import{A as qe}from"./arrow-right-Cp8X2tij.js";import{a as Ee}from"./vendor-router-bCYKpmtI.js";import"./vendor-markdown-zaQAhtrl.js";import"./vendor-recharts-COauwCrp.js";import"./vendor-radix-Oq5tdvA1.js";import"./vendor-floating-ui-_Y3uXdsy.js";/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ie=ee("Link2",[["path",{d:"M9 17H7A5 5 0 0 1 7 7h2",key:"8i5ue5"}],["path",{d:"M15 7h2a5 5 0 1 1 0 10h-2",key:"1b9ql8"}],["line",{x1:"8",x2:"16",y1:"12",y2:"12",key:"1jonct"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ue=ee("List",[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ge=ee("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Le=ee("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]),O=[{id:1,title:"Project & Feature",description:"Select project and name your feature",isComplete:t=>!!(t.featureName&&t.area)},{id:2,title:"Problem & Goals",description:"Define the problem and objectives",isComplete:t=>!!(t.problemStatement&&t.goals&&t.goals.length>0)},{id:3,title:"Users & Requirements",description:"Document user stories and requirements",isComplete:t=>!!(t.targetUsers&&t.userStories&&t.userStories.length>0&&t.requirements&&t.requirements.length>0)},{id:4,title:"Technical Details",description:"Technical approach and considerations",isComplete:()=>!0},{id:5,title:"Review & Generate",description:"Review and create your PRD",isComplete:()=>!0}];function Ve({currentStep:t,formData:i,onStepClick:m}){return e.jsx("nav",{"aria-label":"Progress",className:"mb-8",children:e.jsx("ol",{className:"flex items-center justify-between w-full",children:O.map((h,n)=>{const g=h.isComplete(i)&&h.id<t,p=h.id===t,f=h.id<t;return e.jsxs("li",{className:"flex-1 flex items-center",children:[n>0&&e.jsx("div",{className:Q("flex-1 h-0.5",f||p?"bg-primary":"bg-muted")}),e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("button",{type:"button",onClick:()=>m==null?void 0:m(h.id),disabled:!m,className:Q("flex h-10 w-10 items-center justify-center rounded-full border-2 transition-all",p&&"border-primary bg-primary text-primary-foreground",g&&"border-primary bg-primary text-primary-foreground",!p&&!g&&"border-muted bg-background text-muted-foreground",m&&"cursor-pointer hover:border-primary/80"),children:g?e.jsx(we,{className:"h-5 w-5"}):e.jsx("span",{className:"text-sm font-medium",children:h.id})}),e.jsx("span",{className:Q("mt-2 text-xs font-medium whitespace-nowrap",p?"text-primary":"text-muted-foreground"),children:h.title})]}),n<O.length-1&&e.jsx("div",{className:Q("flex-1 h-0.5",f?"bg-primary":"bg-muted")})]},h.id)})})})}function _e(){const{formData:t,updateFormData:i}=$(),{projects:m}=xe(),h=m.filter(n=>n.status==="active"||n.status==="pipeline");return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("h2",{className:"text-xl font-semibold",children:"Project & Feature Info"}),e.jsx("p",{className:"text-muted-foreground text-sm",children:"Start by selecting a project and naming your feature."})]}),e.jsxs("div",{className:"grid gap-6",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(b,{htmlFor:"project",children:"Project (Optional)"}),e.jsxs(V,{value:t.projectId||"none",onValueChange:n=>i({projectId:n==="none"?void 0:n}),children:[e.jsx(_,{children:e.jsx(W,{placeholder:"Select a project..."})}),e.jsxs(B,{children:[e.jsx(j,{value:"none",children:"No project (standalone feature)"}),h.map(n=>e.jsx(j,{value:n.id,children:n.name},n.id))]})]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Link this PRD to an existing project, or leave standalone."})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(b,{htmlFor:"featureName",children:"Feature Name *"}),e.jsx(w,{id:"featureName",value:t.featureName||"",onChange:n=>i({featureName:n.target.value}),placeholder:"e.g., User Authentication System",autoFocus:!0}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"A clear, descriptive name for this feature."})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(b,{htmlFor:"version",children:"Version"}),e.jsx(w,{id:"version",value:t.version||"1.0",onChange:n=>i({version:n.target.value}),placeholder:"1.0"})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(b,{htmlFor:"area",children:"Area *"}),e.jsxs(V,{value:t.area||"personal",onValueChange:n=>i({area:n}),children:[e.jsx(_,{children:e.jsx(W,{})}),e.jsxs(B,{children:[e.jsx(j,{value:"wellfy",children:"Wellfy"}),e.jsx(j,{value:"freelance",children:"Freelance"}),e.jsx(j,{value:"personal",children:"Personal"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(b,{htmlFor:"author",children:"Author"}),e.jsx(w,{id:"author",value:t.author||"Justin",onChange:n=>i({author:n.target.value}),placeholder:"Your name"})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(b,{htmlFor:"assignee",children:"Assign To"}),e.jsxs(V,{value:t.assignee||"none",onValueChange:n=>i({assignee:n==="none"?void 0:n}),children:[e.jsx(_,{children:e.jsx(W,{placeholder:"Unassigned"})}),e.jsxs(B,{children:[e.jsx(j,{value:"none",children:"Unassigned"}),e.jsx(j,{value:"justin",children:"Justin"}),e.jsx(j,{value:"james",children:"James"})]})]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Assign to James for AI-assisted implementation."})]})]})]})]})}function We(){const{formData:t,updateFormData:i}=$(),[m,h]=u.useState(""),[n,g]=u.useState(""),p=()=>{m.trim()&&(i({goals:[...t.goals||[],m.trim()]}),h(""))},f=l=>{i({goals:(t.goals||[]).filter((c,N)=>N!==l)})},x=()=>{n.trim()&&(i({nonGoals:[...t.nonGoals||[],n.trim()]}),g(""))},a=l=>{i({nonGoals:(t.nonGoals||[]).filter((c,N)=>N!==l)})},d=(l,c)=>{l.key==="Enter"&&(l.preventDefault(),c())};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("h2",{className:"text-xl font-semibold",children:"Problem & Goals"}),e.jsx("p",{className:"text-muted-foreground text-sm",children:"Define the problem you're solving and what success looks like."})]}),e.jsxs("div",{className:"grid gap-6",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(b,{htmlFor:"problemStatement",children:"Problem Statement *"}),e.jsx(Z,{id:"problemStatement",value:t.problemStatement||"",onChange:l=>i({problemStatement:l.target.value}),placeholder:"Describe the problem or opportunity this feature addresses. What pain points exist? Why is this important?",rows:4,className:"resize-none"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Be specific about the current state and why change is needed."})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(b,{children:"Goals *"}),e.jsx("p",{className:"text-xs text-muted-foreground mb-2",children:"What are the specific outcomes you want to achieve? Add at least one goal."}),e.jsx("div",{className:"space-y-2",children:(t.goals||[]).map((l,c)=>e.jsxs("div",{className:"flex items-center gap-2 p-3 rounded-md bg-muted/50",children:[e.jsx("span",{className:"flex-1 text-sm",children:l}),e.jsx(o,{type:"button",variant:"ghost",size:"icon",className:"h-6 w-6 text-muted-foreground hover:text-destructive",onClick:()=>f(c),children:e.jsx(q,{className:"h-4 w-4"})})]},c))}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(w,{value:m,onChange:l=>h(l.target.value),onKeyPress:l=>d(l,p),placeholder:"e.g., Reduce user onboarding time by 50%"}),e.jsx(o,{type:"button",variant:"secondary",onClick:p,disabled:!m.trim(),children:e.jsx(S,{className:"h-4 w-4"})})]})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(b,{children:"Non-Goals (Optional)"}),e.jsx("p",{className:"text-xs text-muted-foreground mb-2",children:"What is explicitly out of scope? This helps set clear boundaries."}),e.jsx("div",{className:"space-y-2",children:(t.nonGoals||[]).map((l,c)=>e.jsxs("div",{className:"flex items-center gap-2 p-3 rounded-md bg-muted/30 border border-dashed",children:[e.jsx("span",{className:"flex-1 text-sm text-muted-foreground",children:l}),e.jsx(o,{type:"button",variant:"ghost",size:"icon",className:"h-6 w-6 text-muted-foreground hover:text-destructive",onClick:()=>a(c),children:e.jsx(q,{className:"h-4 w-4"})})]},c))}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(w,{value:n,onChange:l=>g(l.target.value),onKeyPress:l=>d(l,x),placeholder:"e.g., Mobile app support (future phase)"}),e.jsx(o,{type:"button",variant:"outline",onClick:x,disabled:!n.trim(),children:e.jsx(S,{className:"h-4 w-4"})})]})]})]})]})}function Be(){var U,K;const{formData:t,updateFormData:i,addUserStory:m,removeUserStory:h,addRequirement:n,removeRequirement:g}=$(),[p,f]=u.useState(!0),[x,a]=u.useState(""),[d,l]=u.useState(""),[c,N]=u.useState(""),[k,P]=u.useState(""),[C,A]=u.useState([]),[y,H]=u.useState(!0),[M,z]=u.useState(""),[F,r]=u.useState("functional"),[T,I]=u.useState("medium"),X=()=>{k.trim()&&(A([...C,k.trim()]),P(""))},se=s=>{A(C.filter((v,D)=>D!==s))},te=()=>{!x.trim()||!d.trim()||!c.trim()||(m({persona:x.trim(),action:d.trim(),benefit:c.trim(),acceptanceCriteria:C}),a(""),l(""),N(""),P(""),A([]))},ae=()=>{M.trim()&&(n({type:F,description:M.trim(),priority:T}),z(""),r("functional"),I("medium"))},J={critical:"bg-red-500/10 text-red-700 border-red-200",high:"bg-orange-500/10 text-orange-700 border-orange-200",medium:"bg-yellow-500/10 text-yellow-700 border-yellow-200",low:"bg-green-500/10 text-green-700 border-green-200"};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("h2",{className:"text-xl font-semibold",children:"Users & Requirements"}),e.jsx("p",{className:"text-muted-foreground text-sm",children:"Define who this is for and what they need."})]}),e.jsxs("div",{className:"grid gap-6",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(b,{htmlFor:"targetUsers",children:"Target Users *"}),e.jsx(Z,{id:"targetUsers",value:t.targetUsers||"",onChange:s=>i({targetUsers:s.target.value}),placeholder:"Describe the primary users of this feature. Who are they? What are their characteristics?",rows:3,className:"resize-none"})]}),e.jsxs(ie,{open:p,onOpenChange:f,children:[e.jsx(le,{asChild:!0,children:e.jsxs(o,{variant:"ghost",className:"w-full justify-between p-4 h-auto border rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Me,{className:"h-4 w-4"}),e.jsx("span",{className:"font-medium",children:"User Stories"}),e.jsx(R,{variant:"secondary",children:((U=t.userStories)==null?void 0:U.length)||0})]}),p?e.jsx(me,{className:"h-4 w-4"}):e.jsx(ce,{className:"h-4 w-4"})]})}),e.jsxs(de,{className:"pt-4 space-y-4",children:[(t.userStories||[]).map(s=>e.jsxs("div",{className:"p-4 rounded-lg bg-muted/30 border space-y-2",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{className:"text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:"As a "}),e.jsx("strong",{children:s.persona}),e.jsx("span",{className:"text-muted-foreground",children:", I want to "}),e.jsx("strong",{children:s.action}),e.jsx("span",{className:"text-muted-foreground",children:", so that "}),e.jsx("strong",{children:s.benefit})]}),e.jsx(o,{type:"button",variant:"ghost",size:"icon",className:"h-6 w-6 shrink-0",onClick:()=>h(s.id),children:e.jsx(q,{className:"h-4 w-4"})})]}),s.acceptanceCriteria.length>0&&e.jsxs("div",{className:"text-xs text-muted-foreground",children:[e.jsx("strong",{children:"Criteria:"}),e.jsx("ul",{className:"list-disc list-inside mt-1",children:s.acceptanceCriteria.map((v,D)=>e.jsx("li",{children:v},D))})]})]},s.id)),e.jsxs("div",{className:"p-4 rounded-lg border border-dashed space-y-4",children:[e.jsx("p",{className:"text-sm font-medium",children:"Add User Story"}),e.jsxs("div",{className:"grid gap-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm text-muted-foreground shrink-0",children:"As a"}),e.jsx(w,{value:x,onChange:s=>a(s.target.value),placeholder:"user type/persona",className:"flex-1"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm text-muted-foreground shrink-0",children:"I want to"}),e.jsx(w,{value:d,onChange:s=>l(s.target.value),placeholder:"action/goal",className:"flex-1"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm text-muted-foreground shrink-0",children:"So that"}),e.jsx(w,{value:c,onChange:s=>N(s.target.value),placeholder:"benefit/value",className:"flex-1"})]}),e.jsxs("div",{className:"space-y-2 pt-2 border-t",children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Acceptance Criteria (optional)"}),C.map((s,v)=>e.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[e.jsx("span",{className:"flex-1 p-2 bg-muted rounded",children:s}),e.jsx(o,{type:"button",variant:"ghost",size:"icon",className:"h-6 w-6",onClick:()=>se(v),children:e.jsx(q,{className:"h-3 w-3"})})]},v)),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(w,{value:k,onChange:s=>P(s.target.value),placeholder:"Add acceptance criteria",className:"text-sm",onKeyPress:s=>{s.key==="Enter"&&(s.preventDefault(),X())}}),e.jsx(o,{type:"button",variant:"outline",size:"sm",onClick:X,disabled:!k.trim(),children:e.jsx(S,{className:"h-3 w-3"})})]})]}),e.jsxs(o,{type:"button",onClick:te,disabled:!x.trim()||!d.trim()||!c.trim(),className:"mt-2",children:[e.jsx(S,{className:"h-4 w-4 mr-2"}),"Add User Story"]})]})]})]})]}),e.jsxs(ie,{open:y,onOpenChange:H,children:[e.jsx(le,{asChild:!0,children:e.jsxs(o,{variant:"ghost",className:"w-full justify-between p-4 h-auto border rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ce,{className:"h-4 w-4"}),e.jsx("span",{className:"font-medium",children:"Requirements"}),e.jsx(R,{variant:"secondary",children:((K=t.requirements)==null?void 0:K.length)||0})]}),y?e.jsx(me,{className:"h-4 w-4"}):e.jsx(ce,{className:"h-4 w-4"})]})}),e.jsxs(de,{className:"pt-4 space-y-4",children:[(t.requirements||[]).map(s=>e.jsxs("div",{className:"p-3 rounded-lg bg-muted/30 border flex items-center justify-between gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[e.jsx(R,{variant:"outline",className:J[s.priority],children:s.priority}),e.jsx(R,{variant:"secondary",className:"shrink-0",children:s.type==="functional"?"FR":"NFR"}),e.jsx("span",{className:"text-sm",children:s.description})]}),e.jsx(o,{type:"button",variant:"ghost",size:"icon",className:"h-6 w-6 shrink-0",onClick:()=>g(s.id),children:e.jsx(q,{className:"h-4 w-4"})})]},s.id)),e.jsxs("div",{className:"p-4 rounded-lg border border-dashed space-y-4",children:[e.jsx("p",{className:"text-sm font-medium",children:"Add Requirement"}),e.jsxs("div",{className:"grid gap-3",children:[e.jsx(Z,{value:M,onChange:s=>z(s.target.value),placeholder:"Describe the requirement...",rows:2,className:"resize-none"}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs(V,{value:F,onValueChange:s=>r(s),children:[e.jsx(_,{className:"w-[160px]",children:e.jsx(W,{})}),e.jsxs(B,{children:[e.jsx(j,{value:"functional",children:"Functional"}),e.jsx(j,{value:"non-functional",children:"Non-Functional"})]})]}),e.jsxs(V,{value:T,onValueChange:s=>I(s),children:[e.jsx(_,{className:"w-[140px]",children:e.jsx(W,{})}),e.jsxs(B,{children:[e.jsx(j,{value:"critical",children:"ðŸ”´ Critical"}),e.jsx(j,{value:"high",children:"ðŸŸ  High"}),e.jsx(j,{value:"medium",children:"ðŸŸ¡ Medium"}),e.jsx(j,{value:"low",children:"ðŸŸ¢ Low"})]})]}),e.jsxs(o,{type:"button",onClick:ae,disabled:!M.trim(),className:"ml-auto",children:[e.jsx(S,{className:"h-4 w-4 mr-2"}),"Add"]})]})]})]})]})]})]})]})}function Y({label:t,icon:i,items:m,placeholder:h,onAdd:n,onRemove:g,description:p,variant:f="default"}){const[x,a]=u.useState(""),d=()=>{x.trim()&&(n(x.trim()),a(""))},l=f==="warning"?"bg-yellow-500/10 border-yellow-200":"bg-muted/50";return e.jsxs("div",{className:"grid gap-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[i,e.jsx(b,{children:t})]}),p&&e.jsx("p",{className:"text-xs text-muted-foreground",children:p}),e.jsx("div",{className:"space-y-2",children:m.map((c,N)=>e.jsxs("div",{className:`flex items-center gap-2 p-3 rounded-md ${l}`,children:[e.jsx("span",{className:"flex-1 text-sm",children:c}),e.jsx(o,{type:"button",variant:"ghost",size:"icon",className:"h-6 w-6 text-muted-foreground hover:text-destructive",onClick:()=>g(N),children:e.jsx(q,{className:"h-4 w-4"})})]},N))}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(w,{value:x,onChange:c=>a(c.target.value),onKeyPress:c=>{c.key==="Enter"&&(c.preventDefault(),d())},placeholder:h}),e.jsx(o,{type:"button",variant:"secondary",onClick:d,disabled:!x.trim(),children:e.jsx(S,{className:"h-4 w-4"})})]})]})}function $e(){const{formData:t,updateFormData:i}=$(),m=d=>{i({dependencies:[...t.dependencies||[],d]})},h=d=>{i({dependencies:(t.dependencies||[]).filter((l,c)=>c!==d)})},n=d=>{i({risks:[...t.risks||[],d]})},g=d=>{i({risks:(t.risks||[]).filter((l,c)=>c!==d)})},p=d=>{i({assumptions:[...t.assumptions||[],d]})},f=d=>{i({assumptions:(t.assumptions||[]).filter((l,c)=>c!==d)})},x=d=>{i({constraints:[...t.constraints||[],d]})},a=d=>{i({constraints:(t.constraints||[]).filter((l,c)=>c!==d)})};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("h2",{className:"text-xl font-semibold",children:"Technical Considerations"}),e.jsx("p",{className:"text-muted-foreground text-sm",children:"Document technical approach, dependencies, and risks. This step is optional but recommended."})]}),e.jsxs("div",{className:"grid gap-6",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(b,{htmlFor:"technicalApproach",children:"Technical Approach"}),e.jsx(Z,{id:"technicalApproach",value:t.technicalApproach||"",onChange:d=>i({technicalApproach:d.target.value}),placeholder:"Describe the high-level technical approach. What technologies, patterns, or architectures will be used?",rows:4,className:"resize-none"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Optional but helpful for implementation planning."})]}),e.jsx(Y,{label:"Dependencies",icon:e.jsx(Ie,{className:"h-4 w-4 text-blue-500"}),items:t.dependencies||[],placeholder:"e.g., Requires Auth API v2.0",onAdd:m,onRemove:h,description:"External systems, APIs, or features this depends on."}),e.jsx(Y,{label:"Risks",icon:e.jsx(ze,{className:"h-4 w-4 text-orange-500"}),items:t.risks||[],placeholder:"e.g., Third-party API rate limits may affect performance",onAdd:n,onRemove:g,description:"Potential issues that could impact success.",variant:"warning"}),e.jsx(Y,{label:"Assumptions",icon:e.jsx(ke,{className:"h-4 w-4 text-yellow-500"}),items:t.assumptions||[],placeholder:"e.g., Users have modern browsers with ES6 support",onAdd:p,onRemove:f,description:"What conditions are we assuming to be true?"}),e.jsx(Y,{label:"Constraints",icon:e.jsx(Ge,{className:"h-4 w-4 text-purple-500"}),items:t.constraints||[],placeholder:"e.g., Must be completed before Q2 release",onAdd:x,onRemove:a,description:"Fixed limitations or boundaries to work within."})]})]})}function He(){var z,F;const{formData:t,updateFormData:i,addMilestone:m,removeMilestone:h}=$(),{projects:n}=xe(),[g,p]=u.useState(!0),[f,x]=u.useState(""),[a,d]=u.useState(""),[l,c]=u.useState(""),[N,k]=u.useState(""),P=t.projectId?n.find(r=>r.id===t.projectId):null,C=O.map(r=>({...r,isComplete:r.isComplete(t)})),A=C.slice(0,3).every(r=>r.isComplete),y=()=>{f.trim()&&(i({successMetrics:[...t.successMetrics||[],f.trim()]}),x(""))},H=r=>{i({successMetrics:(t.successMetrics||[]).filter((T,I)=>I!==r)})},M=()=>{a.trim()&&(m({title:a.trim(),description:l.trim()||void 0,targetDate:N||void 0}),d(""),c(""),k(""))};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("h2",{className:"text-xl font-semibold",children:"Review & Generate"}),e.jsx("p",{className:"text-muted-foreground text-sm",children:"Add success metrics and milestones, then review your PRD."})]}),e.jsxs(ie,{open:g,onOpenChange:p,children:[e.jsx(le,{asChild:!0,children:e.jsxs(o,{variant:"ghost",className:"w-full justify-between p-4 h-auto border rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(pe,{className:"h-4 w-4"}),e.jsx("span",{className:"font-medium",children:"Success Metrics & Timeline"})]}),g?e.jsx(me,{className:"h-4 w-4"}):e.jsx(ce,{className:"h-4 w-4"})]})}),e.jsxs(de,{className:"pt-4 space-y-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(b,{children:"Success Metrics"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"How will you measure if this feature is successful?"}),e.jsx("div",{className:"space-y-2",children:(t.successMetrics||[]).map((r,T)=>e.jsxs("div",{className:"flex items-center gap-2 p-3 rounded-md bg-green-500/10 border border-green-200",children:[e.jsx(pe,{className:"h-4 w-4 text-green-600 shrink-0"}),e.jsx("span",{className:"flex-1 text-sm",children:r}),e.jsx(o,{type:"button",variant:"ghost",size:"icon",className:"h-6 w-6",onClick:()=>H(T),children:e.jsx(q,{className:"h-4 w-4"})})]},T))}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(w,{value:f,onChange:r=>x(r.target.value),onKeyPress:r=>{r.key==="Enter"&&(r.preventDefault(),y())},placeholder:"e.g., Increase user engagement by 20%"}),e.jsx(o,{type:"button",variant:"secondary",onClick:y,disabled:!f.trim(),children:e.jsx(S,{className:"h-4 w-4"})})]})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(b,{htmlFor:"estimatedEffort",children:"Estimated Effort"}),e.jsxs(V,{value:t.estimatedEffort||"",onValueChange:r=>i({estimatedEffort:r}),children:[e.jsx(_,{children:e.jsx(W,{placeholder:"Select effort estimate..."})}),e.jsxs(B,{children:[e.jsx(j,{value:"1-2 days",children:"1-2 days (Small)"}),e.jsx(j,{value:"3-5 days",children:"3-5 days (Medium)"}),e.jsx(j,{value:"1-2 weeks",children:"1-2 weeks (Large)"}),e.jsx(j,{value:"2-4 weeks",children:"2-4 weeks (XL)"}),e.jsx(j,{value:"1+ months",children:"1+ months (Epic)"})]})]})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(b,{children:"Milestones"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Break the work into key deliverables with target dates."}),e.jsx("div",{className:"space-y-2",children:(t.milestones||[]).map(r=>e.jsxs("div",{className:"flex items-center gap-3 p-3 rounded-md bg-muted/50",children:[e.jsx(Fe,{className:"h-4 w-4 text-primary shrink-0"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium",children:r.title}),r.description&&e.jsx("p",{className:"text-xs text-muted-foreground truncate",children:r.description})]}),r.targetDate&&e.jsx(R,{variant:"outline",className:"shrink-0",children:he(new Date(r.targetDate),"MMM d")}),e.jsx(o,{type:"button",variant:"ghost",size:"icon",className:"h-6 w-6 shrink-0",onClick:()=>h(r.id),children:e.jsx(q,{className:"h-4 w-4"})})]},r.id))}),e.jsxs("div",{className:"p-3 rounded-lg border border-dashed space-y-3",children:[e.jsx(w,{value:a,onChange:r=>d(r.target.value),placeholder:"Milestone title"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(w,{value:l,onChange:r=>c(r.target.value),placeholder:"Description (optional)",className:"flex-1"}),e.jsx(w,{type:"date",value:N,onChange:r=>k(r.target.value),className:"w-[160px]"})]}),e.jsxs(o,{type:"button",variant:"secondary",onClick:M,disabled:!a.trim(),className:"w-full",children:[e.jsx(S,{className:"h-4 w-4 mr-2"}),"Add Milestone"]})]})]})]})]}),e.jsxs("div",{className:"rounded-lg border bg-card p-6 space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(oe,{className:"h-5 w-5 text-primary"}),e.jsx("h3",{className:"font-semibold",children:"PRD Summary"})]}),e.jsxs("div",{className:"grid gap-3 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Feature Name:"}),e.jsx("span",{className:"font-medium",children:t.featureName||"â€”"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Project:"}),e.jsx("span",{className:"font-medium",children:(P==null?void 0:P.name)||"Standalone"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Area:"}),e.jsx("span",{className:"font-medium capitalize",children:t.area||"â€”"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Assigned To:"}),e.jsx("span",{className:"font-medium capitalize",children:t.assignee||"Unassigned"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"User Stories:"}),e.jsx("span",{className:"font-medium",children:((z=t.userStories)==null?void 0:z.length)||0})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Requirements:"}),e.jsx("span",{className:"font-medium",children:((F=t.requirements)==null?void 0:F.length)||0})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Estimated Effort:"}),e.jsx("span",{className:"font-medium",children:t.estimatedEffort||"â€”"})]})]}),e.jsxs("div",{className:"pt-4 border-t space-y-2",children:[e.jsx("p",{className:"text-sm font-medium",children:"Completion Status"}),C.slice(0,3).map(r=>e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[r.isComplete?e.jsx(we,{className:"h-4 w-4 text-green-500"}):e.jsx(Te,{className:"h-4 w-4 text-yellow-500"}),e.jsx("span",{className:r.isComplete?"text-muted-foreground":"text-yellow-600",children:r.title})]},r.id))]}),!A&&e.jsx("div",{className:"p-3 rounded-md bg-yellow-500/10 border border-yellow-200 text-sm text-yellow-700",children:"Please complete all required steps before generating your PRD."})]})]})}function js(){const t=Ee(),[i,m]=u.useState("list"),[h,n]=u.useState("active"),{prds:g,isLoaded:p,initialize:f,currentStep:x,formData:a,setCurrentStep:d,nextStep:l,prevStep:c,resetForm:N,addPRD:k,deletePRD:P}=$(),{projects:C,initialize:A}=xe();u.useEffect(()=>{f(),A()},[f,A]);const y=O.find(s=>s.id===x),H=(y==null?void 0:y.isComplete(a))??!1,M=x<5?H:!0,z=O.slice(0,3).every(s=>s.isComplete(a)),F=()=>{N(),m("create")},r=()=>{N(),m("list")},T=async()=>{if(!a.featureName){L.error("Please enter a feature name first");return}const s={projectId:a.projectId,featureName:a.featureName||"Untitled PRD",version:a.version||"1.0",author:a.author||"Justin",assignee:a.assignee,area:a.area||"personal",status:"draft",problemStatement:a.problemStatement||"",goals:a.goals||[],nonGoals:a.nonGoals,targetUsers:a.targetUsers||"",userStories:a.userStories||[],requirements:a.requirements||[],technicalApproach:a.technicalApproach,dependencies:a.dependencies,risks:a.risks,assumptions:a.assumptions,constraints:a.constraints,successMetrics:a.successMetrics,milestones:a.milestones,estimatedEffort:a.estimatedEffort};await k(s)&&(L.success("PRD draft saved!"),N(),m("list"))},I=async()=>{if(!z){L.error("Please complete all required steps first");return}const s={projectId:a.projectId,featureName:a.featureName,version:a.version||"1.0",author:a.author||"Justin",assignee:a.assignee,area:a.area||"personal",status:"draft",problemStatement:a.problemStatement,goals:a.goals,nonGoals:a.nonGoals,targetUsers:a.targetUsers,userStories:a.userStories,requirements:a.requirements,technicalApproach:a.technicalApproach,dependencies:a.dependencies,risks:a.risks,assumptions:a.assumptions,constraints:a.constraints,successMetrics:a.successMetrics,milestones:a.milestones,estimatedEffort:a.estimatedEffort},v=await k(s);if(v){const D=a.projectId?C.find(ye=>ye.id===a.projectId):void 0,G=je(v,{project:D}),E=`PRD-${ge(v.featureName)}`;fe(G,E),L.success("PRD created and downloaded!"),N(),m("list")}},X=s=>{const v=s.projectId?C.find(E=>E.id===s.projectId):void 0,D=je(s,{project:v}),G=`PRD-${ge(s.featureName)}`;fe(D,G),L.success(`Exported "${s.featureName}" to markdown`)},se=async s=>{confirm(`Delete PRD "${s.featureName}"?`)&&(await P(s.id),L.success("PRD deleted"))},te={draft:"bg-gray-500/10 text-gray-700 border-gray-200",review:"bg-blue-500/10 text-blue-700 border-blue-200",approved:"bg-green-500/10 text-green-700 border-green-200",in_progress:"bg-yellow-500/10 text-yellow-700 border-yellow-200",completed:"bg-purple-500/10 text-purple-700 border-purple-200",implemented:"bg-emerald-500/10 text-emerald-700 border-emerald-200"},ae=()=>{switch(x){case 1:return e.jsx(_e,{});case 2:return e.jsx(We,{});case 3:return e.jsx(Be,{});case 4:return e.jsx($e,{});case 5:return e.jsx(He,{});default:return null}},J=g.filter(s=>["draft","review","approved","in_progress"].includes(s.status)),U=g.filter(s=>s.status==="completed"||s.status==="implemented"),K=h==="active"?J:U;return i==="list"?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl sm:text-3xl font-semibold tracking-tight",children:"PRD Creator"}),e.jsx("p",{className:"text-muted-foreground text-sm mt-1",children:"Create and manage Product Requirements Documents"})]}),e.jsxs(o,{onClick:F,className:"w-full sm:w-auto",children:[e.jsx(S,{className:"h-4 w-4 mr-2"}),"New PRD"]})]}),e.jsx(De,{value:h,onValueChange:s=>n(s),children:e.jsxs(Se,{children:[e.jsxs(ue,{value:"active",className:"gap-2",children:[e.jsx(oe,{className:"h-4 w-4"}),"Active",J.length>0&&e.jsx(R,{variant:"secondary",className:"ml-1 h-5 px-1.5",children:J.length})]}),e.jsxs(ue,{value:"implemented",className:"gap-2",children:[e.jsx(Ne,{className:"h-4 w-4"}),"Implemented",U.length>0&&e.jsx(R,{variant:"secondary",className:"ml-1 h-5 px-1.5",children:U.length})]})]})}),p?K.length===0?e.jsx(re,{className:"text-center",children:e.jsx(ne,{className:"pt-12 pb-12",children:h==="active"?e.jsxs(e.Fragment,{children:[e.jsx(oe,{className:"h-12 w-12 mx-auto text-muted-foreground/50 mb-4"}),e.jsx("h3",{className:"text-lg font-medium mb-2",children:"No active PRDs"}),e.jsx("p",{className:"text-muted-foreground text-sm mb-4",children:"Create your first Product Requirements Document to get started."}),e.jsxs(o,{onClick:F,children:[e.jsx(S,{className:"h-4 w-4 mr-2"}),"Create PRD"]})]}):e.jsxs(e.Fragment,{children:[e.jsx(Ne,{className:"h-12 w-12 mx-auto text-muted-foreground/50 mb-4"}),e.jsx("h3",{className:"text-lg font-medium mb-2",children:"No implemented PRDs"}),e.jsx("p",{className:"text-muted-foreground text-sm mb-4",children:"PRDs will appear here when their linked tasks are completed."})]})})}):e.jsx("div",{className:"grid gap-4",children:K.map(s=>{var D,G;const v=s.projectId?C.find(E=>E.id===s.projectId):null;return e.jsxs(re,{className:"hover:shadow-md transition-shadow cursor-pointer",onClick:()=>t(`/prd/${s.id}`),children:[e.jsx(Pe,{className:"pb-3",children:e.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-start sm:justify-between sm:gap-4",children:[e.jsxs("div",{className:"space-y-1 min-w-0",children:[e.jsx(Re,{className:"text-base sm:text-lg leading-tight",children:s.featureName}),e.jsxs(Ae,{className:"flex items-center gap-2 flex-wrap text-xs sm:text-sm",children:[v&&e.jsxs(e.Fragment,{children:[e.jsx("span",{children:v.name}),e.jsx("span",{children:"â€¢"})]}),e.jsx("span",{className:"capitalize",children:s.area}),e.jsx("span",{children:"â€¢"}),e.jsxs("span",{children:["v",s.version]})]})]}),e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsx(R,{variant:"outline",className:te[s.status],children:s.status.replace("_"," ")}),s.assignee&&e.jsx(R,{variant:"secondary",className:"capitalize",children:s.assignee})]})]})}),e.jsxs(ne,{className:"pt-0",children:[e.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between text-sm text-muted-foreground",children:[e.jsxs("div",{className:"flex items-center gap-2 sm:gap-4 flex-wrap text-xs sm:text-sm",children:[e.jsxs("span",{children:[((D=s.userStories)==null?void 0:D.length)||0," stories"]}),e.jsx("span",{className:"hidden sm:inline",children:"â€¢"}),e.jsxs("span",{children:[((G=s.requirements)==null?void 0:G.length)||0," req."]}),s.estimatedEffort&&e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"hidden sm:inline",children:"â€¢"}),e.jsx("span",{className:"text-xs",children:s.estimatedEffort})]})]}),e.jsxs("div",{className:"flex items-center gap-2",onClick:E=>E.stopPropagation(),children:[e.jsxs(o,{variant:"ghost",size:"sm",onClick:()=>X(s),children:[e.jsx(ve,{className:"h-4 w-4 mr-1"}),"Export"]}),e.jsx(o,{variant:"ghost",size:"sm",className:"text-destructive hover:text-destructive",onClick:()=>se(s),children:"Delete"})]})]}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-2",children:["Created ",he(new Date(s.createdAt),"MMM d, yyyy"),s.updatedAt!==s.createdAt&&e.jsxs(e.Fragment,{children:[" â€¢ Updated ",he(new Date(s.updatedAt),"MMM d, yyyy")]})]})]})]},s.id)})}):e.jsx("div",{className:"flex items-center justify-center p-12",children:e.jsx("div",{className:"h-8 w-8 animate-spin rounded-full border-4 border-primary border-t-transparent"})})]}):e.jsxs("div",{className:"space-y-6 pb-24 sm:pb-20",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(o,{variant:"ghost",size:"icon",onClick:r,children:e.jsx(be,{className:"h-4 w-4"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl font-semibold",children:"Create PRD"}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Step ",x," of 5: ",y==null?void 0:y.title]})]})]}),e.jsxs(o,{variant:"outline",size:"sm",onClick:r,children:[e.jsx(Ue,{className:"h-4 w-4 mr-2"}),"View All"]})]}),e.jsx("div",{className:"pt-4 pb-8",children:e.jsx(Ve,{currentStep:x,formData:a,onStepClick:d})}),e.jsx(re,{children:e.jsx(ne,{className:"pt-6",children:ae()})}),e.jsxs("div",{className:"fixed bottom-0 left-0 right-0 bg-background border-t p-3 sm:p-4 flex items-center justify-between gap-2 sm:gap-4 md:left-64",children:[e.jsx("div",{className:"flex gap-2",children:x>1&&e.jsxs(o,{variant:"outline",size:"sm",onClick:c,className:"sm:size-default",children:[e.jsx(be,{className:"h-4 w-4 sm:mr-2"}),e.jsx("span",{className:"hidden sm:inline",children:"Back"})]})}),e.jsxs("div",{className:"flex gap-2",children:[a.featureName&&e.jsxs(o,{variant:"outline",size:"sm",onClick:T,className:"sm:size-default",children:[e.jsx(Le,{className:"h-4 w-4 sm:mr-2"}),e.jsx("span",{className:"hidden sm:inline",children:"Save Draft"})]}),x<5?e.jsxs(o,{size:"sm",onClick:l,disabled:!M,className:"sm:size-default",children:[e.jsx("span",{className:"hidden sm:inline",children:"Next"}),e.jsx(qe,{className:"h-4 w-4 sm:ml-2"})]}):e.jsxs(o,{size:"sm",onClick:I,disabled:!z,className:"sm:size-default",children:[e.jsx(ve,{className:"h-4 w-4 sm:mr-2"}),e.jsx("span",{className:"hidden sm:inline",children:"Generate PRD"})]})]})]})]})}export{js as PrdPage};
