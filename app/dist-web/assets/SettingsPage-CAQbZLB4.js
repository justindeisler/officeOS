const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-DV0Z4ueH.js","assets/core-BDPGcIsz.js","assets/index-CDjnCujr.js","assets/path-E9zjYLSN.js","assets/index-DrITRpZC.js","assets/vendor-react-nkeu7MKf.js","assets/vendor-router-bCYKpmtI.js","assets/index-51YMcAJi.css"])))=>i.map(i=>d[i]);
var ge=Object.defineProperty;var ve=(s,t,a)=>t in s?ge(s,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):s[t]=a;var z=(s,t,a)=>ve(s,typeof t!="symbol"?t+"":t,a);import{r as x,j as e}from"./vendor-react-nkeu7MKf.js";import{c as O,_ as P,M as L,N as ye,O as ee,l as p,L as m,I as h,a as y,F as ke,B as be,C as Ne}from"./index-DrITRpZC.js";import{getDb as J,getSchemaVersion as we}from"./db.web-lSIIGn2q.js";import{C as b,a as N,b as w,d as D,c as E}from"./card-BgiI-iYU.js";import{U as se}from"./user-CYgAvcYF.js";import{B as Ee}from"./building-2-CTtq5g_3.js";import{F as Ce}from"./folder-open-CR2vBeSH.js";import{S as q,a as Y,b as K,c as G,d as B}from"./select-DGc7E8u9.js";import{R as Se}from"./refresh-cw-DAeFkAP4.js";import{D as ae}from"./download-CCOQkPeK.js";import{A as Be,a as De,b as Te,c as Ie,d as Oe,e as Re,f as Ae,g as Fe,h as Pe}from"./alert-dialog-BaBnwxVM.js";import{D as Le}from"./database-Dkf1eeup.js";import{U as Me}from"./upload-CLGdoZOe.js";import{T as _e}from"./trash-2-lofomgWT.js";import"./vendor-markdown-zaQAhtrl.js";import"./vendor-recharts-COauwCrp.js";import"./vendor-radix-Oq5tdvA1.js";import"./vendor-floating-ui-_Y3uXdsy.js";import"./vendor-router-bCYKpmtI.js";/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ue=O("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Je=O("FileDown",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M12 18v-6",key:"17g6i2"}],["path",{d:"m9 15 3 3 3-3",key:"1npd3o"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ve=O("HardDrive",[["line",{x1:"22",x2:"2",y1:"12",y2:"12",key:"1y58io"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}],["line",{x1:"6",x2:"6.01",y1:"16",y2:"16",key:"sgf278"}],["line",{x1:"10",x2:"10.01",y1:"16",y2:"16",key:"1l4acy"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const He=O("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X=O("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);function F(){return typeof window<"u"&&"__TAURI__"in window&&!!window.__TAURI__}let R=null,A=null;async function Q(){if(!F())throw new Error("Tauri modules not available in web environment");if(!R||!A){const[s,t]=await Promise.all([P(()=>import("./index-DV0Z4ueH.js"),__vite__mapDeps([0,1])),P(()=>import("./index-CDjnCujr.js"),__vite__mapDeps([2,3,1]))]);R=s,A=t}return{save:R.save,open:R.open,writeTextFile:A.writeTextFile,readTextFile:A.readTextFile}}function We(s,t){const a=new Blob([s],{type:"application/json"}),n=URL.createObjectURL(a),c=document.createElement("a");c.href=n,c.download=t,document.body.appendChild(c),c.click(),document.body.removeChild(c),URL.revokeObjectURL(n)}function $e(){return new Promise(s=>{const t=document.createElement("input");t.type="file",t.accept=".json",t.onchange=async a=>{var u;const n=(u=a.target.files)==null?void 0:u[0];if(!n){s(null);return}const c=await n.text();s(c)},t.oncancel=()=>s(null),t.click()})}function Z(s){let t=0;for(let a=0;a<s.length;a++){const n=s.charCodeAt(a);t=(t<<5)-t+n,t=t&t}return`hash:${Math.abs(t).toString(16)}`}class ze{constructor(){z(this,"APP_VERSION","1.0.0")}async exportBackup(){try{const t=await J(),a=await we(),[n,c,u,r,l,d,v]=await Promise.all([t.select("SELECT * FROM clients"),t.select("SELECT * FROM projects"),t.select("SELECT * FROM tasks"),t.select("SELECT * FROM time_entries"),t.select("SELECT * FROM invoices"),t.select("SELECT * FROM captures"),t.select("SELECT * FROM settings")]),j={version:this.APP_VERSION,exportedAt:new Date().toISOString(),schemaVersion:a,data:{clients:n,projects:c,tasks:u,time_entries:r,invoices:l,captures:d,settings:v}},C=JSON.stringify(j.data),k=Z(C),f={...j,checksum:k},S=`personal-assistant-backup-${new Date().toISOString().split("T")[0]}.json`,T=JSON.stringify(f,null,2);if(F()){const{save:M,writeTextFile:_}=await Q(),I=await M({defaultPath:S,filters:[{name:"JSON",extensions:["json"]}]});return I?(await _(I,T),{success:!0,filePath:I}):{success:!1,error:"Export cancelled"}}else return We(T,S),{success:!0,filePath:S}}catch(t){return console.error("Backup export failed:",t),{success:!1,error:t instanceof Error?t.message:"Export failed"}}}async importBackup(){try{let t;if(F()){const{open:d,readTextFile:v}=await Q(),j=await d({filters:[{name:"JSON",extensions:["json"]}],multiple:!1});if(!j||Array.isArray(j))return{success:!1,error:"Import cancelled"};t=await v(j)}else t=await $e();if(!t)return{success:!1,error:"Import cancelled"};const a=JSON.parse(t),n=this.validateBackup(a);if(n)return{success:!1,error:n};const c=JSON.stringify(a.data);if(Z(c)!==a.checksum)return{success:!1,error:"Backup file is corrupted (checksum mismatch)"};const r=await J();await r.execute("DELETE FROM captures"),await r.execute("DELETE FROM time_entries"),await r.execute("DELETE FROM invoices"),await r.execute("DELETE FROM tasks"),await r.execute("DELETE FROM projects"),await r.execute("DELETE FROM clients"),await r.execute("DELETE FROM settings");let l=0;for(const d of a.data.clients)await this.insertRecord(r,"clients",d),l++;for(const d of a.data.projects)await this.insertRecord(r,"projects",d),l++;for(const d of a.data.tasks)await this.insertRecord(r,"tasks",d),l++;for(const d of a.data.time_entries)await this.insertRecord(r,"time_entries",d),l++;for(const d of a.data.invoices)await this.insertRecord(r,"invoices",d),l++;for(const d of a.data.captures)await this.insertRecord(r,"captures",d),l++;for(const d of a.data.settings)await this.insertRecord(r,"settings",d),l++;return{success:!0,stats:{tables:7,records:l}}}catch(t){return console.error("Backup import failed:",t),{success:!1,error:t instanceof Error?t.message:"Import failed"}}}validateBackup(t){if(!t||typeof t!="object")return"Invalid backup file format";const a=t;if(!a.version||typeof a.version!="string")return"Missing or invalid version";if(!a.exportedAt||typeof a.exportedAt!="string")return"Missing or invalid export date";if(typeof a.schemaVersion!="number")return"Missing or invalid schema version";if(!a.data||typeof a.data!="object")return"Missing or invalid data";if(!a.checksum||typeof a.checksum!="string")return"Missing or invalid checksum";const n=a.data,c=["clients","projects","tasks","time_entries","invoices","captures","settings"];for(const u of c)if(!Array.isArray(n[u]))return`Missing or invalid table: ${u}`;return null}async insertRecord(t,a,n){const c=Object.keys(n),u=c.map(()=>"?").join(", "),r=Object.values(n);await t.execute(`INSERT INTO ${a} (${c.join(", ")}) VALUES (${u})`,r)}async getBackupStats(){var t,a,n,c,u,r;if(F()){const l=await J(),[d,v,j,C,k,f]=await Promise.all([l.select("SELECT COUNT(*) as count FROM clients"),l.select("SELECT COUNT(*) as count FROM projects"),l.select("SELECT COUNT(*) as count FROM tasks"),l.select("SELECT COUNT(*) as count FROM time_entries"),l.select("SELECT COUNT(*) as count FROM invoices"),l.select("SELECT COUNT(*) as count FROM captures")]);return{clients:((t=d[0])==null?void 0:t.count)||0,projects:((a=v[0])==null?void 0:a.count)||0,tasks:((n=j[0])==null?void 0:n.count)||0,timeEntries:((c=C[0])==null?void 0:c.count)||0,invoices:((u=k[0])==null?void 0:u.count)||0,captures:((r=f[0])==null?void 0:r.count)||0}}else{const{api:l}=await P(async()=>{const{api:S}=await import("./index-DrITRpZC.js").then(T=>T.ag);return{api:S}},__vite__mapDeps([4,5,6,7])),[d,v,j,C,k,f]=await Promise.all([l.getClients(),l.getProjects(),l.getTasks(),l.getTimeEntries(),l.getInvoices(),l.getCaptures()]);return{clients:d.length,projects:v.length,tasks:j.length,timeEntries:C.length,invoices:k.length,captures:f.length}}}}const V=new ze;async function te(){return L.get("/backups/status")}async function qe(){return L.post("/backups/trigger")}async function Ye(){var n;const s=await L.requestBlob("/backups/download"),t=URL.createObjectURL(s),a=document.createElement("a");try{const c=await te();a.download=((n=c.lastBackup)==null?void 0:n.filename)||"pa-backup.enc"}catch{a.download="pa-backup.enc"}a.href=t,document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL(t)}async function Ke(){const s=await L.requestBlob("/backups/export?format=json"),t=URL.createObjectURL(s),a=document.createElement("a"),n=new Date().toISOString().split("T")[0];a.download=`pa-export-${n}.json`,a.href=t,document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL(t)}const Ge={fullName:"",jobTitle:"",email:"",phone:"",street:"",postalCode:"",city:"",country:"Deutschland",vatId:"",taxId:"",bankAccountHolder:"",bankName:"",bankIban:"",bankBic:""};function Xe(){const s=ye(),[t,a]=x.useState(s.workspacePath||""),[n,c]=x.useState(s.userName||""),[u,r]=x.useState(!1),[l,d]=x.useState(!1),[v,j]=x.useState(s.businessProfile||Ge),[C,k]=x.useState(!1),[f,S]=x.useState(null),[T,M]=x.useState(null),[_,I]=x.useState(!1),[re,H]=x.useState(!1),[ne,W]=x.useState(!1);x.useEffect(()=>{s.businessProfile&&j(s.businessProfile)},[s.businessProfile]),x.useEffect(()=>{async function i(){try{const o=await V.getBackupStats();S(o)}catch(o){console.error("Failed to load data stats:",o)}}i()},[]);const U=x.useCallback(async()=>{if(ee())try{const i=await te();M(i)}catch(i){console.error("Failed to load backup status:",i)}},[]);x.useEffect(()=>{U()},[U]);const ce=async()=>{var i;I(!0);try{const o=await qe();o.success?(p.success(`Backup created: ${(i=o.backup)==null?void 0:i.filename}`),await U()):p.error(o.error||"Backup failed")}catch(o){console.error("Backup trigger failed:",o),p.error("Failed to create backup")}finally{I(!1)}},ie=async()=>{H(!0);try{await Ye(),p.success("Backup download started")}catch(i){console.error("Backup download failed:",i),p.error("Failed to download backup")}finally{H(!1)}},le=async()=>{W(!0);try{await Ke(),p.success("JSON export download started")}catch(i){console.error("JSON export failed:",i),p.error("Failed to export data")}finally{W(!1)}},oe=async()=>{t.trim()?(await s.setWorkspacePath(t.trim()),p.success("Workspace path saved")):(await s.setWorkspacePath(void 0),p.success("Workspace path cleared"))},de=async()=>{n.trim()&&(await s.setUserName(n.trim()),p.success("Name saved"))},ue=async()=>{k(!0);try{await s.setBusinessProfile(v),p.success("Business profile saved")}catch(i){console.error("Failed to save business profile:",i),p.error("Failed to save business profile")}finally{k(!1)}},$=(i,o)=>{j(g=>({...g,[i]:o}))},pe=i=>i.replace(/\s/g,"").toUpperCase().replace(/(.{4})/g,"$1 ").trim(),me=i=>{const o=i.replace(/\s/g,"").toUpperCase();$("bankIban",o)},he=async()=>{r(!0);try{const i=await V.exportBackup();i.success?p.success("Backup exported successfully"):i.error!=="Export cancelled"&&p.error(i.error||"Export failed")}catch(i){console.error("Export failed:",i),p.error("Failed to export backup")}finally{r(!1)}},xe=async()=>{var i,o;d(!0);try{const g=await V.importBackup();g.success?(p.success(`Backup restored: ${(i=g.stats)==null?void 0:i.records} records across ${(o=g.stats)==null?void 0:o.tables} tables`),window.location.reload()):g.error!=="Import cancelled"&&p.error(g.error||"Import failed")}catch(g){console.error("Import failed:",g),p.error("Failed to import backup")}finally{d(!1)}},fe=async()=>{try{const{getDb:i}=await P(async()=>{const{getDb:g}=await import("./db.web-lSIIGn2q.js");return{getDb:g}},[]),o=await i();await o.execute("DELETE FROM captures"),await o.execute("DELETE FROM time_entries"),await o.execute("DELETE FROM invoices"),await o.execute("DELETE FROM tasks"),await o.execute("DELETE FROM projects"),await o.execute("DELETE FROM clients"),await o.execute("DELETE FROM settings"),p.success("All data cleared"),window.location.reload()}catch(i){console.error("Clear data failed:",i),p.error("Failed to clear data")}},je=f?f.clients+f.projects+f.tasks+f.timeEntries+f.invoices+f.captures:0;return{...s,pathInput:t,setPathInput:a,nameInput:n,setNameInput:c,profileForm:v,isSavingProfile:C,dataStats:f,totalRecords:je,isExporting:u,isImporting:l,backupStatus:T,isBackingUp:_,isDownloadingBackup:re,isExportingJson:ne,handleSaveWorkspacePath:oe,handleSaveUserName:de,handleSaveBusinessProfile:ue,updateProfileField:$,formatIban:pe,handleIbanChange:me,handleTriggerBackup:ce,handleDownloadBackup:ie,handleExportJson:le,handleExportData:he,handleImportData:xe,handleClearAllData:fe}}function Qe({nameInput:s,setNameInput:t,onSave:a}){return e.jsxs(b,{children:[e.jsxs(N,{children:[e.jsxs(w,{className:"flex items-center gap-2",children:[e.jsx(se,{className:"h-5 w-5"}),"Profile"]}),e.jsx(D,{children:"Your personal information displayed in the sidebar."})]}),e.jsx(E,{className:"space-y-4",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx(m,{htmlFor:"user-name",children:"Display Name"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(h,{id:"user-name",value:s,onChange:n=>t(n.target.value),placeholder:"Your name",className:"flex-1"}),e.jsx(y,{onClick:a,children:"Save"})]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"This name appears next to your profile icon in the sidebar."})]})})]})}function Ze({profileForm:s,isSavingProfile:t,onUpdateField:a,onIbanChange:n,formatIban:c,onSave:u}){return e.jsxs(b,{children:[e.jsxs(N,{children:[e.jsxs(w,{className:"flex items-center gap-2",children:[e.jsx(Ee,{className:"h-5 w-5"}),"Business Profile"]}),e.jsx(D,{children:"Your business information for invoices and official documents."})]}),e.jsxs(E,{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h4",{className:"text-sm font-medium flex items-center gap-2",children:[e.jsx(se,{className:"h-4 w-4"}),"Personal Information"]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(m,{htmlFor:"bp-fullName",children:"Full Name"}),e.jsx(h,{id:"bp-fullName",value:s.fullName,onChange:r=>a("fullName",r.target.value),placeholder:"Max Mustermann"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(m,{htmlFor:"bp-jobTitle",children:"Job Title"}),e.jsx(h,{id:"bp-jobTitle",value:s.jobTitle,onChange:r=>a("jobTitle",r.target.value),placeholder:"Full-Stack Developer"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(m,{htmlFor:"bp-email",children:"Business Email"}),e.jsx(h,{id:"bp-email",type:"email",value:s.email,onChange:r=>a("email",r.target.value),placeholder:"kontakt@example.com"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(m,{htmlFor:"bp-phone",children:"Phone (optional)"}),e.jsx(h,{id:"bp-phone",type:"tel",value:s.phone||"",onChange:r=>a("phone",r.target.value),placeholder:"+49 123 456789"})]})]})]}),e.jsxs("div",{className:"space-y-4 pt-4 border-t",children:[e.jsxs("h4",{className:"text-sm font-medium flex items-center gap-2",children:[e.jsx(He,{className:"h-4 w-4"}),"Address"]}),e.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(m,{htmlFor:"bp-street",children:"Street Address"}),e.jsx(h,{id:"bp-street",value:s.street,onChange:r=>a("street",r.target.value),placeholder:"MusterstraÃŸe 123"})]}),e.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(m,{htmlFor:"bp-postalCode",children:"Postal Code"}),e.jsx(h,{id:"bp-postalCode",value:s.postalCode,onChange:r=>a("postalCode",r.target.value),placeholder:"12345"})]}),e.jsxs("div",{className:"space-y-2 col-span-1 sm:col-span-2",children:[e.jsx(m,{htmlFor:"bp-city",children:"City"}),e.jsx(h,{id:"bp-city",value:s.city,onChange:r=>a("city",r.target.value),placeholder:"Berlin"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(m,{htmlFor:"bp-country",children:"Country"}),e.jsx(h,{id:"bp-country",value:s.country,onChange:r=>a("country",r.target.value),placeholder:"Deutschland"})]})]})]}),e.jsxs("div",{className:"space-y-4 pt-4 border-t",children:[e.jsxs("h4",{className:"text-sm font-medium flex items-center gap-2",children:[e.jsx(ke,{className:"h-4 w-4"}),"Tax Information"]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(m,{htmlFor:"bp-vatId",children:"USt-IdNr (VAT ID)"}),e.jsx(h,{id:"bp-vatId",value:s.vatId||"",onChange:r=>a("vatId",r.target.value.toUpperCase()),placeholder:"DE123456789"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Required for EU B2B invoices"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(m,{htmlFor:"bp-taxId",children:"Steuernummer (Tax Number)"}),e.jsx(h,{id:"bp-taxId",value:s.taxId||"",onChange:r=>a("taxId",r.target.value),placeholder:"123/456/78901"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Your local tax office number"})]})]})]}),e.jsxs("div",{className:"space-y-4 pt-4 border-t",children:[e.jsxs("h4",{className:"text-sm font-medium flex items-center gap-2",children:[e.jsx(Ue,{className:"h-4 w-4"}),"Bank Details"]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(m,{htmlFor:"bp-bankAccountHolder",children:"Account Holder"}),e.jsx(h,{id:"bp-bankAccountHolder",value:s.bankAccountHolder,onChange:r=>a("bankAccountHolder",r.target.value),placeholder:"Max Mustermann"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(m,{htmlFor:"bp-bankName",children:"Bank Name"}),e.jsx(h,{id:"bp-bankName",value:s.bankName,onChange:r=>a("bankName",r.target.value),placeholder:"Sparkasse Berlin"})]}),e.jsxs("div",{className:"space-y-2 sm:col-span-2",children:[e.jsx(m,{htmlFor:"bp-bankIban",children:"IBAN"}),e.jsx(h,{id:"bp-bankIban",value:c(s.bankIban),onChange:r=>n(r.target.value),placeholder:"DE89 3704 0044 0532 0130 00",className:"font-mono"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(m,{htmlFor:"bp-bankBic",children:"BIC/SWIFT"}),e.jsx(h,{id:"bp-bankBic",value:s.bankBic,onChange:r=>a("bankBic",r.target.value.toUpperCase()),placeholder:"COBADEFFXXX",className:"font-mono"})]})]})]}),e.jsxs("div",{className:"pt-4 border-t",children:[e.jsx(y,{onClick:u,disabled:t,children:t?"Saving...":"Save Business Profile"}),e.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:"This information will be used in your invoice PDFs."})]})]})]})}function es({theme:s,onSetTheme:t}){return e.jsxs(b,{children:[e.jsxs(N,{children:[e.jsx(w,{children:"Appearance"}),e.jsx(D,{children:"Customize the look and feel."})]}),e.jsx(E,{className:"space-y-4",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx(m,{children:"Theme"}),e.jsx("div",{className:"flex gap-2",children:["light","dark","system"].map(a=>e.jsx(y,{variant:s===a?"default":"outline",size:"sm",onClick:()=>t(a),className:"capitalize",children:a},a))})]})})]})}function ss({pathInput:s,setPathInput:t,workspacePath:a,onSave:n}){return e.jsxs(b,{children:[e.jsxs(N,{children:[e.jsxs(w,{className:"flex items-center gap-2",children:[e.jsx(Ce,{className:"h-5 w-5"}),"Workspace"]}),e.jsx(D,{children:"Configure your Obsidian workspace location for markdown integration."})]}),e.jsxs(E,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(m,{htmlFor:"workspace-path",children:"Workspace Path"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(h,{id:"workspace-path",value:s,onChange:c=>t(c.target.value),placeholder:"/Users/you/Documents/Obsidian/Vault",className:"flex-1"}),e.jsx(y,{onClick:n,children:"Save"})]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Path to your Obsidian vault or markdown workspace. Used for exporting and linking files."})]}),a&&e.jsxs("div",{className:"rounded-lg bg-muted p-3 text-sm",children:[e.jsx("p",{className:"font-medium",children:"Current workspace:"}),e.jsx("code",{className:"text-xs text-muted-foreground",children:a})]})]})]})}function as({defaultArea:s,defaultCurrency:t,onSetDefaultArea:a,onSetDefaultCurrency:n}){return e.jsxs(b,{children:[e.jsxs(N,{children:[e.jsx(w,{children:"Defaults"}),e.jsx(D,{children:"Set default values for new items."})]}),e.jsx(E,{className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(m,{children:"Default Area"}),e.jsxs(q,{value:s,onValueChange:c=>a(c),children:[e.jsx(Y,{children:e.jsx(K,{})}),e.jsxs(G,{children:[e.jsx(B,{value:"wellfy",children:"Wellfy"}),e.jsx(B,{value:"freelance",children:"Freelance"}),e.jsx(B,{value:"personal",children:"Personal"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(m,{children:"Default Currency"}),e.jsxs(q,{value:t,onValueChange:n,children:[e.jsx(Y,{children:e.jsx(K,{})}),e.jsxs(G,{children:[e.jsx(B,{value:"EUR",children:"EUR"}),e.jsx(B,{value:"USD",children:"USD"}),e.jsx(B,{value:"GBP",children:"GBP"}),e.jsx(B,{value:"CHF",children:"CHF"})]})]})]})]})})]})}function ts({backupStatus:s,isBackingUp:t,isDownloadingBackup:a,isExportingJson:n,onTriggerBackup:c,onDownloadBackup:u,onExportJson:r}){return e.jsxs(b,{children:[e.jsxs(N,{children:[e.jsxs(w,{className:"flex items-center gap-2",children:[e.jsx(X,{className:"h-5 w-5"}),"Backup & Export"]}),e.jsx(D,{children:"Automated encrypted backups and data export. Backups are encrypted with AES-256-GCM."})]}),e.jsxs(E,{className:"space-y-4",children:[s&&e.jsxs("div",{className:"rounded-lg bg-muted p-4 space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("h4",{className:"text-sm font-medium flex items-center gap-2",children:[e.jsx(Ve,{className:"h-4 w-4"}),"Backup Status"]}),e.jsx(be,{variant:s.encryptionKeyAvailable?"default":"destructive",children:s.encryptionKeyAvailable?"ðŸ”’ Encryption Active":"âš ï¸ No Key"})]}),s.lastBackup?e.jsxs("div",{className:"text-sm space-y-1",children:[e.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[e.jsx(Ne,{className:"h-3.5 w-3.5"}),e.jsxs("span",{children:["Last backup:"," ",e.jsx("span",{className:"text-foreground font-medium",children:new Date(s.lastBackup.date).toLocaleString("de-DE",{dateStyle:"medium",timeStyle:"short"})})]})]}),e.jsxs("p",{className:"text-xs text-muted-foreground pl-5",children:[s.lastBackup.filename," (",(s.lastBackup.sizeBytes/1024).toFixed(1)," KB)"]})]}):e.jsx("p",{className:"text-sm text-muted-foreground",children:"No backups yet. Create your first backup below."}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["ðŸ“¦ ",s.totalBackups," backup(s) stored in ",e.jsx("code",{className:"text-xs",children:s.backupDir})]})]}),s&&s.recentBackups.length>0&&e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"text-sm font-medium",children:"Recent Backups"}),e.jsx("div",{className:"rounded-lg border divide-y",children:s.recentBackups.map(l=>e.jsxs("div",{className:"flex items-center justify-between px-3 py-2 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2 min-w-0",children:[e.jsx(X,{className:"h-3.5 w-3.5 text-green-500 shrink-0"}),e.jsx("span",{className:"truncate font-mono text-xs",children:l.filename})]}),e.jsxs("div",{className:"flex items-center gap-3 text-xs text-muted-foreground shrink-0",children:[e.jsxs("span",{children:[(l.sizeBytes/1024).toFixed(1)," KB"]}),e.jsx("span",{children:new Date(l.date).toLocaleDateString("de-DE",{day:"2-digit",month:"2-digit",year:"numeric"})})]})]},l.filename))})]}),e.jsxs("div",{className:"flex flex-wrap gap-2 pt-2",children:[e.jsxs(y,{variant:"default",onClick:c,disabled:t,children:[e.jsx(Se,{className:`h-4 w-4 mr-2 ${t?"animate-spin":""}`}),t?"Backing up...":"Create Backup"]}),e.jsxs(y,{variant:"outline",onClick:u,disabled:a||!(s!=null&&s.lastBackup),children:[e.jsx(ae,{className:"h-4 w-4 mr-2"}),a?"Downloading...":"Download Backup"]}),e.jsxs(y,{variant:"outline",onClick:r,disabled:n,children:[e.jsx(Je,{className:"h-4 w-4 mr-2"}),n?"Exporting...":"Export JSON"]})]}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[e.jsx("strong",{children:"Create Backup:"})," Encrypted backup saved on server (auto-rotated, 30 days).",e.jsx("br",{}),e.jsx("strong",{children:"Download Backup:"})," Download the latest encrypted backup file.",e.jsx("br",{}),e.jsx("strong",{children:"Export JSON:"})," Download all data as unencrypted JSON (for portability)."]})]})]})}function rs({dataStats:s,totalRecords:t,isExporting:a,isImporting:n,onExport:c,onImport:u,onClearAll:r}){return e.jsxs(b,{children:[e.jsxs(N,{children:[e.jsxs(w,{className:"flex items-center gap-2",children:[e.jsx(Le,{className:"h-5 w-5"}),"Data Management"]}),e.jsx(D,{children:"Your data is stored locally in SQLite. Export backups to keep your data safe."})]}),e.jsxs(E,{className:"space-y-4",children:[s&&e.jsxs("div",{className:"rounded-lg bg-muted p-3 text-sm",children:[e.jsxs("p",{className:"font-medium mb-2",children:["Current Data (",t," total)"]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs text-muted-foreground",children:[e.jsxs("span",{children:[s.clients," clients"]}),e.jsxs("span",{children:[s.projects," projects"]}),e.jsxs("span",{children:[s.tasks," tasks"]}),e.jsxs("span",{children:[s.timeEntries," time entries"]}),e.jsxs("span",{children:[s.invoices," invoices"]}),e.jsxs("span",{children:[s.captures," captures"]})]})]}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsxs(y,{variant:"outline",onClick:c,disabled:a,children:[e.jsx(ae,{className:"h-4 w-4 mr-2"}),a?"Exporting...":"Export Backup"]}),e.jsxs(y,{variant:"outline",onClick:u,disabled:n,children:[e.jsx(Me,{className:"h-4 w-4 mr-2"}),n?"Importing...":"Import Backup"]}),e.jsxs(Be,{children:[e.jsx(De,{asChild:!0,children:e.jsxs(y,{variant:"destructive",children:[e.jsx(_e,{className:"h-4 w-4 mr-2"}),"Clear All Data"]})}),e.jsxs(Te,{children:[e.jsxs(Ie,{children:[e.jsx(Oe,{children:"Are you absolutely sure?"}),e.jsx(Re,{children:"This action cannot be undone. This will permanently delete all your tasks, time entries, clients, projects, invoices, and captures from the database."})]}),e.jsxs(Ae,{children:[e.jsx(Fe,{children:"Cancel"}),e.jsx(Pe,{onClick:r,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:"Yes, delete everything"})]})]})]})]}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["Export creates a JSON backup of all your data. Import restores from a previous backup.",e.jsx("strong",{className:"block mt-1",children:"Tip: Export backups regularly to protect your data."})]})]})]})}function ns(){return e.jsxs(b,{children:[e.jsx(N,{children:e.jsx(w,{children:"About"})}),e.jsxs(E,{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Personal Assistant Dashboard v0.1.0"}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Built with Tauri, React, and TypeScript"}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Data stored in: ~/Library/Application Support/com.personal-assistant.app/"})]})]})}function Cs(){const s=Xe();return e.jsxs("div",{className:"space-y-6 max-w-2xl",children:[e.jsx("div",{children:e.jsx("h1",{className:"text-2xl sm:text-3xl font-semibold tracking-tight",children:"Settings"})}),e.jsx(Qe,{nameInput:s.nameInput,setNameInput:s.setNameInput,onSave:s.handleSaveUserName}),e.jsx(Ze,{profileForm:s.profileForm,isSavingProfile:s.isSavingProfile,onUpdateField:s.updateProfileField,onIbanChange:s.handleIbanChange,formatIban:s.formatIban,onSave:s.handleSaveBusinessProfile}),e.jsx(es,{theme:s.theme,onSetTheme:s.setTheme}),e.jsx(ss,{pathInput:s.pathInput,setPathInput:s.setPathInput,workspacePath:s.workspacePath,onSave:s.handleSaveWorkspacePath}),e.jsx(as,{defaultArea:s.defaultArea,defaultCurrency:s.defaultCurrency,onSetDefaultArea:s.setDefaultArea,onSetDefaultCurrency:s.setDefaultCurrency}),ee()&&e.jsx(ts,{backupStatus:s.backupStatus,isBackingUp:s.isBackingUp,isDownloadingBackup:s.isDownloadingBackup,isExportingJson:s.isExportingJson,onTriggerBackup:s.handleTriggerBackup,onDownloadBackup:s.handleDownloadBackup,onExportJson:s.handleExportJson}),e.jsx(rs,{dataStats:s.dataStats,totalRecords:s.totalRecords,isExporting:s.isExporting,isImporting:s.isImporting,onExport:s.handleExportData,onImport:s.handleImportData,onClearAll:s.handleClearAllData}),e.jsx(ns,{})]})}export{Cs as SettingsPage};
