import{r as n,j as e}from"./vendor-react-DeR5d9Tv.js";import{c as H,m as w,a5 as S,a as A,B as M,I as Me,j as h,X as Le,F as E,x as Te,G as De,a6 as b,a0 as Ae,a1 as Ee,$ as Re,a2 as Be,n as Ie}from"./index-RJ0cNIvj.js";import{T as ze,a as Ue,b as V}from"./tabs-BYG1mUUs.js";import{M as ae}from"./MarkdownRenderer-DFdYV13P.js";import{A as Ve,m as C}from"./vendor-framer-motion-5hIM_3P7.js";import{A as Oe}from"./arrow-left-CLbhYuej.js";import{S as He}from"./search-Tukd7Kqk.js";import{M as F}from"./message-square-943y7yuv.js";import{A as re}from"./activity-DF-3_ofb.js";import{C as Pe}from"./calendar-m-JWC2BX.js";import{C as We}from"./chevron-right-CcuX3k2-.js";import{U as $e}from"./user-BIe_mpN7.js";import{f as P,n as ne}from"./vendor-date-fns-D0ugVOfH.js";import"./vendor-markdown-PIr_2kdo.js";import"./vendor-recharts-DrMJw15s.js";import"./vendor-radix-zn9KX-y8.js";import"./vendor-floating-ui-CESiY8Ey.js";import"./vendor-router-9bGSKQ4q.js";import"./link-2-BGRgx1pW.js";import"./external-link-B4yigKcm.js";import"./check-mFeD-rYu.js";/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ie=H("BookOpen",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ge=H("GitFork",[["circle",{cx:"12",cy:"18",r:"3",key:"1mpf1b"}],["circle",{cx:"6",cy:"6",r:"3",key:"1lh9wr"}],["circle",{cx:"18",cy:"6",r:"3",key:"1h7g24"}],["path",{d:"M18 9v2c0 .6-.4 1-1 1H7c-.6 0-1-.4-1-1V9",key:"1uq4wg"}],["path",{d:"M12 12v3",key:"158kv8"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qe=H("Microscope",[["path",{d:"M6 18h8",key:"1borvv"}],["path",{d:"M3 22h18",key:"8prr45"}],["path",{d:"M14 22a7 7 0 1 0 0-14h-1",key:"1jwaiy"}],["path",{d:"M9 14h2",key:"197e7h"}],["path",{d:"M9 12a2 2 0 0 1-2-2V6h6v4a2 2 0 0 1-2 2Z",key:"1bmzmy"}],["path",{d:"M12 6V3a1 1 0 0 0-1-1H9a1 1 0 0 0-1 1v3",key:"1drr47"}]]),O=[.16,1,.3,1],le={"":{icon:E,label:"Root",description:"Top-level documents"},journal:{icon:Pe,label:"Journal",description:"Daily entries and reflections"},concepts:{icon:De,label:"Concepts",description:"Deep dives into topics"},decisions:{icon:Ge,label:"Decisions",description:"Important decisions with context"},projects:{icon:Te,label:"Projects",description:"Project documentation"},research:{icon:qe,label:"Research",description:"Research notes and explorations"}};function Qe(){const[i,m]=n.useState(!1);return n.useEffect(()=>{const s=()=>m(window.innerWidth<768);return s(),window.addEventListener("resize",s),()=>window.removeEventListener("resize",s)},[]),i}function vt(){const[i,m]=n.useState([]),[s,o]=n.useState(null),[g,l]=n.useState(""),[x,j]=n.useState(""),[u,c]=n.useState(null),[v,d]=n.useState(!0),[L,y]=n.useState(!1),[oe,ce]=n.useState(new Set(["journal","concepts","decisions","projects","research"])),[de,W]=n.useState(null),[f,me]=n.useState("documents"),[xe,ue]=n.useState([]),[N,he]=n.useState(7),[pe,$]=n.useState(!1),[fe,ge]=n.useState([]),[je,be]=n.useState([]),[k,G]=n.useState(null),[ye,q]=n.useState(!1),[R,ve]=n.useState(""),[Ne,B]=n.useState(null),Q=n.useRef({lastFetch:0,inFlight:!1,rateLimitedUntil:0}),[T,we]=n.useState("all"),[_,I]=n.useState("list"),D=Qe();n.useEffect(()=>{K()},[]),n.useEffect(()=>{if(!x.trim()){c(null);return}const t=setTimeout(async()=>{try{const a=f==="documents"?"documents":f==="conversations"?"conversation":void 0,r=await w.searchBrain(x,a);c(r.results)}catch(a){console.error("Search failed:",a)}},300);return()=>clearTimeout(t)},[x,f]),n.useEffect(()=>{f==="activity"?Z():f==="conversations"&&z()},[f]);const J=n.useRef(N);n.useEffect(()=>{J.current!==N&&(J.current=N,f==="activity"&&Z())},[N,f]);const K=async()=>{try{d(!0),W(null);const t=await w.getSecondBrainDocuments();if(m(t.folders),!D){const a=t.folders.flatMap(r=>r.documents)[0];a&&await X(a,!1)}}catch(t){console.error("Failed to load documents:",t),W("Failed to load documents. Make sure the API server is running.")}finally{d(!1)}},X=async(t,a=!0)=>{try{y(!0);const r=await w.getSecondBrainDocument(t.path);o({...t,content:r.content}),l(r.content),G(null),a&&D&&I("document")}catch(r){console.error("Failed to load document:",r),l(`# Error

Failed to load document content.`)}finally{y(!1)}},Z=async()=>{try{$(!0);const t=await w.getBrainActivity(N);ue(t.activities)}catch(t){console.error("Failed to load activity:",t)}finally{$(!1)}},z=n.useCallback(async(t=!1)=>{const a=Q.current,r=Date.now();if(!a.inFlight){if(!t&&r<a.rateLimitedUntil){console.log(`[SecondBrain] Rate limited, retry after ${Math.ceil((a.rateLimitedUntil-r)/1e3)}s`);return}if(!(!t&&r-a.lastFetch<2e3))try{a.inFlight=!0,a.lastFetch=r,q(!0),B(null);const p=await w.getConversations({agent:R||void 0,limit:50});ge(p.sessions),be(p.agents)}catch(p){console.error("Failed to load conversations:",p),p&&typeof p=="object"&&"status"in p&&p.status===429?(a.rateLimitedUntil=Date.now()+3e4,B("Too many requests. Will retry automatically in 30 seconds."),setTimeout(()=>{Q.current.rateLimitedUntil<=Date.now()&&z(!0)},31e3)):B("Failed to load conversations. Click retry to try again.")}finally{a.inFlight=!1,q(!1)}}},[R]),Y=async t=>{try{y(!0);const a=await w.getConversationTranscript(t.agent,t.id);G({messages:a.messages,agent:t.agent,id:t.id}),o(null),l(""),D&&I("document")}catch(a){console.error("Failed to load conversation:",a)}finally{y(!1)}},ke=()=>{I("list")},Se=t=>{ce(a=>{const r=new Set(a);return r.has(t)?r.delete(t):r.add(t),r})},Ce=()=>{j(""),c(null)},Fe=n.useMemo(()=>{let t=i;if(T!=="all"&&(t=i.filter(a=>a.name===T)),u&&f==="documents"){const a={};for(const r of u){if(r.type!=="document")continue;const p=r.source==="root"?"":r.source;a[p]||(a[p]=[]),a[p].push({path:r.path,name:r.path.split("/").pop()||r.path,title:r.title,folder:p,lastModified:r.lastModified})}return Object.entries(a).map(([r,p])=>({name:r,documents:p}))}return t},[i,u,T,f]),U=i.reduce((t,a)=>t+a.documents.length,0),ee={enter:t=>({x:t>0?"100%":"-100%",opacity:0}),center:{x:0,opacity:1},exit:t=>({x:t>0?"-100%":"100%",opacity:0})},te=({isMobileView:t=!1})=>k?e.jsx(Xe,{conversation:k,isMobile:t}):e.jsx(Je,{selectedDoc:s,docContent:g,isLoadingDoc:L,isMobile:t}),se=()=>e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"p-3 border-b",children:[e.jsxs("div",{className:"relative",children:[e.jsx(He,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(Me,{placeholder:"Search everything...",value:x,onChange:t=>j(t.target.value),className:h("pl-9 pr-9",D?"h-10 bg-muted/50":"h-9 bg-background")}),x&&e.jsx(A,{variant:"ghost",size:"icon",className:"absolute right-1 top-1/2 -translate-y-1/2 h-8 w-8",onClick:Ce,children:e.jsx(Le,{className:"h-4 w-4"})})]}),u&&e.jsxs("p",{className:"text-xs text-muted-foreground mt-2",children:[u.length," result",u.length!==1?"s":""," for “",x,"”"]})]}),e.jsx("div",{className:"border-b",children:e.jsx(ze,{value:f,onValueChange:me,className:"w-full",children:e.jsxs(Ue,{className:"w-full justify-start rounded-none border-b-0 h-auto p-0 bg-transparent",children:[e.jsxs(V,{value:"documents",className:"rounded-none border-b-2 border-transparent data-[state=active]:border-primary text-xs px-3 py-2.5",children:[e.jsx(E,{className:"h-3.5 w-3.5 mr-1.5"}),"Docs"]}),e.jsxs(V,{value:"conversations",className:"rounded-none border-b-2 border-transparent data-[state=active]:border-primary text-xs px-3 py-2.5",children:[e.jsx(F,{className:"h-3.5 w-3.5 mr-1.5"}),"Chat"]}),e.jsxs(V,{value:"activity",className:"rounded-none border-b-2 border-transparent data-[state=active]:border-primary text-xs px-3 py-2.5",children:[e.jsx(re,{className:"h-3.5 w-3.5 mr-1.5"}),"Activity"]})]})})}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-2",children:[f==="documents"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"flex flex-wrap gap-1.5 px-1 py-2",children:["all","journal","concepts","decisions","projects","research"].map(t=>{var a;return e.jsx("button",{onClick:()=>we(t),className:h("text-xs px-2.5 py-1 rounded-full border transition-colors",T===t?"bg-primary text-primary-foreground border-primary":"bg-background hover:bg-accent border-border text-muted-foreground"),children:t==="all"?"All":((a=le[t])==null?void 0:a.label)||t},t)})}),u&&x&&e.jsx("div",{className:"space-y-1 mb-3",children:u.filter(t=>t.type!=="document").map((t,a)=>e.jsxs("button",{onClick:()=>{if(t.type==="conversation"){const r=t.path.split("/");r.length>=3&&Y({id:r[2],agent:r[1],timestamp:t.lastModified,messageCount:0,size:0,isLong:!1})}},className:"w-full flex items-start gap-2 px-3 py-2.5 rounded-md text-left hover:bg-accent transition-colors",children:[e.jsx("div",{className:h("mt-0.5 shrink-0 p-1 rounded",t.type==="agent-memory"?"bg-purple-500/10":"bg-blue-500/10"),children:t.type==="agent-memory"?e.jsx(S,{className:"h-3.5 w-3.5 text-purple-500"}):e.jsx(F,{className:"h-3.5 w-3.5 text-blue-500"})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("span",{className:"text-sm font-medium truncate block",children:t.title}),e.jsx("span",{className:"text-xs text-muted-foreground line-clamp-2",children:t.snippet})]})]},a))}),e.jsx(_e,{isLoading:v,error:de,displayedFolders:Fe,expandedFolders:oe,selectedDoc:s,searchQuery:x,onToggleFolder:Se,onSelectDoc:X,onRetry:K})]}),f==="conversations"&&e.jsx(Ke,{conversations:fe,agents:je,selectedConvo:k,filter:R,onFilterChange:t=>{ve(t)},onSelect:Y,isLoading:ye,onRefresh:z,error:Ne}),f==="activity"&&e.jsx(Ze,{activities:xe,days:N,onDaysChange:he,isLoading:pe})]})]});return e.jsxs("div",{className:"flex flex-col h-[calc(100vh-4rem)] -m-4 sm:-m-6 md:-m-8 overflow-hidden",children:[e.jsxs("div",{className:"hidden md:flex md:flex-col h-full",children:[e.jsx("div",{className:"flex items-center justify-between px-6 py-4 border-b bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 rounded-lg bg-primary/10",children:e.jsx(S,{className:"h-5 w-5 text-primary"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl font-semibold tracking-tight",children:"Second Brain"}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[U," document",U!==1?"s":""," • Search across everything"]})]})]})}),e.jsxs("div",{className:"flex flex-1 min-h-0",children:[e.jsx("div",{className:"w-80 flex flex-col bg-muted/30 border-r",children:e.jsx(se,{})}),e.jsx("div",{className:"flex-1 flex flex-col min-w-0 bg-background",children:e.jsx(te,{})})]})]}),e.jsx("div",{className:"flex md:hidden flex-col h-full",children:e.jsx(Ve,{mode:"wait",custom:_==="document"?1:-1,children:_==="list"?e.jsxs(C.div,{custom:-1,variants:ee,initial:"enter",animate:"center",exit:"exit",transition:{duration:.3,ease:O},className:"flex flex-col h-full",children:[e.jsxs("div",{className:"flex items-center gap-3 px-4 py-4 border-b bg-background/95 backdrop-blur",children:[e.jsx("div",{className:"p-2 rounded-lg bg-primary/10",children:e.jsx(S,{className:"h-5 w-5 text-primary"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-lg font-semibold tracking-tight",children:"Second Brain"}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[U," documents"]})]})]}),e.jsx("div",{className:"flex-1 flex flex-col overflow-hidden bg-muted/20",children:e.jsx(se,{})})]},"list"):e.jsxs(C.div,{custom:1,variants:ee,initial:"enter",animate:"center",exit:"exit",transition:{duration:.3,ease:O},className:"flex flex-col h-full bg-background",children:[e.jsxs("div",{className:"flex items-center gap-2 px-2 py-3 border-b bg-background/95 backdrop-blur",children:[e.jsx(A,{variant:"ghost",size:"icon",onClick:ke,className:"shrink-0 min-h-[44px] min-w-[44px]",children:e.jsx(Oe,{className:"h-5 w-5"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h1",{className:"text-base font-semibold tracking-tight truncate",children:k?`${k.agent} session`:(s==null?void 0:s.title)||"Document"}),(s==null?void 0:s.folder)&&e.jsx(M,{variant:"outline",className:"text-xs capitalize mt-0.5",children:s.folder})]})]}),e.jsx("div",{className:"flex-1 overflow-y-auto",children:e.jsx(te,{isMobileView:!0})})]},"document")})})]})}function _e({isLoading:i,error:m,displayedFolders:s,expandedFolders:o,selectedDoc:g,searchQuery:l,onToggleFolder:x,onSelectDoc:j,onRetry:u}){return i?e.jsx("div",{className:"space-y-3 p-2",children:[1,2,3,4].map(c=>e.jsxs("div",{className:"space-y-2",children:[e.jsx(b,{className:"h-6 w-24"}),e.jsx(b,{className:"h-12 w-full"}),e.jsx(b,{className:"h-12 w-full"})]},c))}):m?e.jsxs("div",{className:"p-4 text-center",children:[e.jsx(ie,{className:"h-12 w-12 mx-auto text-muted-foreground/50 mb-3"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:m}),e.jsx(A,{variant:"outline",size:"sm",className:"mt-3 min-h-[44px]",onClick:u,children:"Retry"})]}):s.length===0||s.every(c=>c.documents.length===0)?e.jsxs("div",{className:"p-4 text-center",children:[e.jsx(S,{className:"h-12 w-12 mx-auto text-muted-foreground/50 mb-3"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:l?"No documents match your search":"No documents yet"})]}):e.jsx("div",{className:"space-y-1",children:s.map(c=>{if(c.documents.length===0)return null;const v=le[c.name]||{icon:E,label:c.name||"Documents"},d=v.icon,L=o.has(c.name);return e.jsxs(Ae,{open:L,onOpenChange:()=>x(c.name),children:[e.jsx(Ee,{asChild:!0,children:e.jsxs("button",{className:"flex items-center gap-2 w-full px-3 py-2.5 min-h-[44px] rounded-md text-sm font-medium text-muted-foreground hover:bg-accent hover:text-accent-foreground transition-colors",children:[L?e.jsx(Re,{className:"h-4 w-4 shrink-0"}):e.jsx(We,{className:"h-4 w-4 shrink-0"}),e.jsx(d,{className:"h-4 w-4 shrink-0"}),e.jsx("span",{className:"flex-1 text-left truncate",children:v.label}),e.jsx(M,{variant:"secondary",className:"text-xs font-normal",children:c.documents.length})]})}),e.jsx(Be,{children:e.jsx(C.div,{className:"ml-6 mt-1 space-y-0.5",initial:{opacity:0},animate:{opacity:1},transition:{duration:.2,ease:O},children:c.documents.map(y=>e.jsx(Ye,{doc:y,isSelected:(g==null?void 0:g.path)===y.path,onClick:()=>j(y)},y.path))})})]},c.name)})})}function Je({selectedDoc:i,docContent:m,isLoadingDoc:s,isMobile:o=!1}){return i?e.jsxs(e.Fragment,{children:[!o&&e.jsx("div",{className:"px-8 py-4 border-b",children:e.jsx("div",{className:"flex items-start justify-between gap-4",children:e.jsxs("div",{className:"min-w-0",children:[e.jsx("h2",{className:"text-2xl font-semibold tracking-tight truncate",children:i.title}),e.jsxs("div",{className:"flex items-center gap-3 mt-1 text-sm text-muted-foreground",children:[i.folder&&e.jsx(M,{variant:"outline",className:"capitalize",children:i.folder}),e.jsxs("span",{children:["Updated ",ne(new Date(i.lastModified),{addSuffix:!0})]})]})]})})}),e.jsx("div",{className:h("flex-1 overflow-y-auto",o&&"pb-safe"),children:s?e.jsxs("div",{className:h("space-y-4",o?"p-4":"p-8"),children:[e.jsx(b,{className:"h-8 w-3/4"}),e.jsx(b,{className:"h-4 w-full"}),e.jsx(b,{className:"h-4 w-full"}),e.jsx(b,{className:"h-4 w-2/3"}),e.jsx(b,{className:"h-32 w-full mt-6"})]}):e.jsx("div",{className:h(o?"p-4":"p-8"),children:e.jsx(ae,{content:m,enableWikiLinks:!0,onWikiLink:g=>{console.log("Wiki link clicked:",g)}})})})]}):e.jsx("div",{className:"flex-1 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx(ie,{className:"h-16 w-16 mx-auto text-muted-foreground/30 mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-muted-foreground",children:"Select a document to view"}),e.jsx("p",{className:"text-sm text-muted-foreground/70 mt-1",children:"Choose from the sidebar"})]})})}function Ke({conversations:i,agents:m,selectedConvo:s,filter:o,onFilterChange:g,onSelect:l,isLoading:x,onRefresh:j,error:u}){const c=n.useRef(o);n.useEffect(()=>{c.current!==o&&(c.current=o,j())},[o,j]);const v=x&&i.length===0&&!u;return e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex flex-wrap gap-1.5 px-1 py-2",children:[e.jsx("button",{onClick:()=>g(""),className:h("text-xs px-2.5 py-1 rounded-full border transition-colors",o?"bg-background hover:bg-accent border-border text-muted-foreground":"bg-primary text-primary-foreground border-primary"),children:"All"}),m.map(d=>e.jsx("button",{onClick:()=>g(d),className:h("text-xs px-2.5 py-1 rounded-full border transition-colors",o===d?"bg-primary text-primary-foreground border-primary":"bg-background hover:bg-accent border-border text-muted-foreground"),children:d},d))]}),u&&e.jsxs("div",{className:"mx-1 p-3 rounded-lg bg-destructive/10 border border-destructive/20",children:[e.jsx("p",{className:"text-sm text-destructive",children:u}),e.jsx(A,{variant:"outline",size:"sm",className:"mt-2 h-8 text-xs",onClick:()=>j(),disabled:x,children:x?"Retrying…":"Retry now"})]}),v?e.jsx("div",{className:"space-y-2 p-2",children:[1,2,3,4,5].map(d=>e.jsx(b,{className:"h-14 w-full"},d))}):i.length===0&&!u?e.jsxs("div",{className:"p-4 text-center",children:[e.jsx(F,{className:"h-12 w-12 mx-auto text-muted-foreground/30 mb-3"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"No conversations found"})]}):e.jsxs("div",{className:"space-y-0.5",children:[x&&i.length>0&&e.jsx("p",{className:"text-xs text-muted-foreground px-3 py-1",children:"Updating…"}),i.map(d=>e.jsxs(C.button,{onClick:()=>l(d),className:h("flex items-center gap-3 w-full px-3 py-2.5 rounded-md text-left transition-colors min-h-[44px]",(s==null?void 0:s.id)===d.id&&(s==null?void 0:s.agent)===d.agent?"bg-primary/10 text-primary":"hover:bg-accent"),whileTap:{scale:.98},children:[e.jsx("div",{className:"p-1.5 rounded-md bg-blue-500/10 shrink-0",children:e.jsx(F,{className:"h-3.5 w-3.5 text-blue-500"})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm font-medium truncate",children:d.agent}),d.isLong&&e.jsx(M,{variant:"secondary",className:"text-[10px] px-1.5",children:"Long"})]}),e.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[e.jsxs("span",{children:[d.messageCount," messages"]}),e.jsx("span",{children:"•"}),e.jsx("span",{children:P(new Date(d.timestamp),"MMM d, HH:mm")})]})]})]},`${d.agent}-${d.id}`))]})]})}function Xe({conversation:i,isMobile:m=!1}){return e.jsxs(e.Fragment,{children:[!m&&e.jsxs("div",{className:"px-8 py-4 border-b",children:[e.jsxs("h2",{className:"text-xl font-semibold tracking-tight",children:[i.agent," session"]}),e.jsxs("p",{className:"text-sm text-muted-foreground mt-1",children:[i.messages.length," messages"]})]}),e.jsx("div",{className:h("flex-1 overflow-y-auto",m?"p-4":"p-6"),children:e.jsx("div",{className:"space-y-4 max-w-3xl mx-auto",children:i.messages.map((s,o)=>e.jsxs("div",{className:h("flex gap-3",s.role==="user"?"justify-end":"justify-start"),children:[s.role!=="user"&&e.jsx("div",{className:"shrink-0 p-1.5 rounded-full bg-primary/10 h-8 w-8 flex items-center justify-center",children:e.jsx(Ie,{className:"h-4 w-4 text-primary"})}),e.jsxs("div",{className:h("max-w-[80%] rounded-xl px-4 py-2.5 text-sm",s.role==="user"?"bg-primary text-primary-foreground":"bg-muted"),children:[s.role==="user"?e.jsx("p",{className:"whitespace-pre-wrap",children:s.text}):e.jsx(ae,{content:s.text||"",className:"text-sm"}),s.timestamp&&e.jsx("p",{className:h("text-[10px] mt-1",s.role==="user"?"text-primary-foreground/60":"text-muted-foreground"),children:P(new Date(s.timestamp),"HH:mm")})]}),s.role==="user"&&e.jsx("div",{className:"shrink-0 p-1.5 rounded-full bg-blue-500/10 h-8 w-8 flex items-center justify-center",children:e.jsx($e,{className:"h-4 w-4 text-blue-500"})})]},s.id||o))})})]})}function Ze({activities:i,days:m,onDaysChange:s,isLoading:o}){const g=o&&i.length===0;return e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex gap-1.5 px-1 py-2 sticky top-0 bg-inherit z-10",children:[[7,14,30].map(l=>e.jsxs("button",{onClick:()=>s(l),className:h("text-xs px-2.5 py-1 rounded-full border transition-colors",m===l?"bg-primary text-primary-foreground border-primary":"bg-background hover:bg-accent border-border text-muted-foreground"),children:[l,"d"]},l)),o&&i.length>0&&e.jsx("span",{className:"text-xs text-muted-foreground self-center ml-auto",children:"Updating…"})]}),g?e.jsx("div",{className:"space-y-2 p-2",children:[1,2,3,4,5].map(l=>e.jsx(b,{className:"h-12 w-full"},l))}):i.length===0?e.jsxs("div",{className:"p-4 text-center",children:[e.jsx(re,{className:"h-12 w-12 mx-auto text-muted-foreground/30 mb-3"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"No recent activity"})]}):e.jsx("div",{className:"space-y-0.5",children:i.map((l,x)=>{const j=l.type==="document"?E:l.type==="conversation"?F:S,u=l.type==="document"?"text-emerald-500":l.type==="conversation"?"text-blue-500":"text-purple-500",c=l.type==="document"?"bg-emerald-500/10":l.type==="conversation"?"bg-blue-500/10":"bg-purple-500/10",v=j;return e.jsxs("div",{className:"flex items-start gap-3 px-3 py-2.5 rounded-md hover:bg-accent transition-colors",children:[e.jsx("div",{className:h("shrink-0 p-1.5 rounded-md mt-0.5",c),children:e.jsx(v,{className:h("h-3.5 w-3.5",u)})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("p",{className:"text-sm font-medium truncate",children:l.title}),e.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[e.jsx(M,{variant:"outline",className:"text-[10px] px-1.5 py-0",children:l.action}),e.jsx("span",{children:ne(new Date(l.lastModified),{addSuffix:!0})})]})]})]},x)})})]})}function Ye({doc:i,isSelected:m,onClick:s}){return e.jsxs(C.button,{onClick:s,className:h("flex flex-col w-full px-3 py-2.5 min-h-[44px] rounded-md text-left transition-colors",m?"bg-primary/10 text-primary":"hover:bg-accent active:bg-accent/80"),whileTap:{scale:.98},transition:{duration:.1},children:[e.jsx("span",{className:"text-sm font-medium truncate",children:i.title}),e.jsx("span",{className:"text-xs text-muted-foreground mt-0.5",children:P(new Date(i.lastModified),"MMM d, yyyy")})]})}export{vt as SecondBrainPage};
