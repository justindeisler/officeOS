import{r as i,j as e}from"./vendor-react-nkeu7MKf.js";import{c as U,p as D,K as $,B as z,a as u,L as x,I as j,U as V}from"./index-CDa-V2nq.js";import{C as H,c as K}from"./card-e8uX1XG6.js";import{D as R,a as q,b as G,c as k}from"./dropdown-menu-D99f9kHk.js";import{C as F}from"./confirm-delete-dialog-BiJveBIZ.js";import{B as J}from"./building-2-C9X1E7dY.js";import{E as Q}from"./ellipsis-eXgC0tCt.js";import{P as W}from"./pen-D01ZDaCk.js";import{T as B}from"./trash-2-BQmVVius.js";import{D as X,a as Y,b as Z,c as _,d as ee,e as se}from"./dialog-DPEL-5Rl.js";import{T as te}from"./textarea-CtiERj1r.js";import{S as ae,a as ne,b as ie,c as le,d as y}from"./select-D98njd8Z.js";import{P as A}from"./plus-BUgSrZef.js";import"./vendor-markdown-zaQAhtrl.js";import"./vendor-recharts-COauwCrp.js";import"./vendor-radix-Oq5tdvA1.js";import"./vendor-floating-ui-_Y3uXdsy.js";import"./vendor-router-bCYKpmtI.js";import"./chevron-right-BU1E9Lui.js";import"./circle-DItMp2bc.js";import"./alert-dialog-Cax_JjAI.js";/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const re=U("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]),oe={active:"bg-green-500/10 text-green-500 border-green-500/20",inactive:"bg-gray-500/10 text-gray-500 border-gray-500/20",archived:"bg-red-500/10 text-red-500 border-red-500/20"};function P({client:t,onEdit:g}){const{deleteClient:s}=D(),r=$(t.id),o=r.filter(l=>l.status==="active").length,[m,c]=i.useState(!1),d=()=>{s(t.id),c(!1)};return e.jsxs(H,{className:"group",children:[e.jsx(K,{className:"p-4",children:e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("h3",{className:"font-medium truncate",children:t.name}),e.jsx(z,{variant:"outline",className:oe[t.status],children:t.status})]}),t.company&&e.jsxs("div",{className:"flex items-center gap-1.5 text-sm text-muted-foreground mb-2",children:[e.jsx(J,{className:"h-3.5 w-3.5"}),e.jsx("span",{className:"truncate",children:t.company})]}),t.email&&e.jsxs("div",{className:"flex items-center gap-1.5 text-sm text-muted-foreground mb-2",children:[e.jsx(re,{className:"h-3.5 w-3.5"}),e.jsx("a",{href:`mailto:${t.email}`,className:"truncate hover:text-foreground transition-colors",children:t.email})]}),e.jsxs("div",{className:"flex items-center gap-3 text-xs text-muted-foreground",children:[e.jsxs("span",{children:[r.length," projects"]}),o>0&&e.jsxs("span",{className:"text-green-500",children:[o," active"]})]})]}),e.jsxs(R,{children:[e.jsx(q,{asChild:!0,children:e.jsx(u,{variant:"ghost",size:"icon",className:"h-8 w-8 opacity-0 group-hover:opacity-100 transition-opacity",children:e.jsx(Q,{className:"h-4 w-4"})})}),e.jsxs(G,{align:"end",children:[e.jsxs(k,{onClick:()=>g(t),children:[e.jsx(W,{className:"h-4 w-4 mr-2"}),"Edit"]}),e.jsxs(k,{onClick:()=>c(!0),className:"text-destructive focus:text-destructive",children:[e.jsx(B,{className:"h-4 w-4 mr-2"}),"Delete"]})]})]})]})}),e.jsx(F,{open:m,onOpenChange:c,title:`Delete ${t.name}?`,description:"This will permanently delete the client. This action cannot be undone.",onConfirm:d})]})}function ce({open:t,onOpenChange:g,client:s,onClose:r}){const{addClient:o,updateClient:m,deleteClient:c}=D(),[d,l]=i.useState(""),[h,a]=i.useState(""),[b,v]=i.useState(""),[S,f]=i.useState(""),[E,C]=i.useState(""),[I,N]=i.useState("active"),[M,w]=i.useState(!1),p=!!s;i.useEffect(()=>{s?(l(s.name),a(s.email||""),v(s.company||""),f(s.contactInfo||""),C(s.notes||""),N(s.status)):(l(""),a(""),v(""),f(""),C(""),N("active"))},[s,t]);const O=n=>{if(n.preventDefault(),!d.trim())return;const T={name:d.trim(),email:h.trim()||void 0,company:b.trim()||void 0,contactInfo:S.trim()||void 0,notes:E.trim()||void 0,status:I};p&&s?m(s.id,T):o(T),r()},L=()=>{s&&(c(s.id),w(!1),r())};return e.jsx(X,{open:t,onOpenChange:g,children:e.jsxs(Y,{className:"w-[calc(100vw-2rem)] max-w-[500px] max-h-[90vh] overflow-y-auto",children:[e.jsxs("form",{onSubmit:O,children:[e.jsxs(Z,{children:[e.jsx(_,{children:p?"Edit Client":"New Client"}),e.jsx(ee,{children:p?"Update the client details below.":"Add a new client to manage projects and invoices."})]}),e.jsxs("div",{className:"grid gap-4 py-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(x,{htmlFor:"name",children:"Name *"}),e.jsx(j,{id:"name",value:d,onChange:n=>l(n.target.value),placeholder:"Client name...",autoFocus:!0})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(x,{htmlFor:"company",children:"Company"}),e.jsx(j,{id:"company",value:b,onChange:n=>v(n.target.value),placeholder:"Company name..."})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(x,{htmlFor:"email",children:"Email"}),e.jsx(j,{id:"email",type:"email",value:h,onChange:n=>a(n.target.value),placeholder:"client@example.com"})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(x,{htmlFor:"contactInfo",children:"Contact Info"}),e.jsx(j,{id:"contactInfo",value:S,onChange:n=>f(n.target.value),placeholder:"Phone, address, etc."})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(x,{htmlFor:"status",children:"Status"}),e.jsxs(ae,{value:I,onValueChange:n=>N(n),children:[e.jsx(ne,{children:e.jsx(ie,{})}),e.jsxs(le,{children:[e.jsx(y,{value:"active",children:"Active"}),e.jsx(y,{value:"inactive",children:"Inactive"}),e.jsx(y,{value:"archived",children:"Archived"})]})]})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(x,{htmlFor:"notes",children:"Notes"}),e.jsx(te,{id:"notes",value:E,onChange:n=>C(n.target.value),placeholder:"Additional notes...",rows:3})]})]}),e.jsxs(se,{className:"flex justify-between",children:[p&&e.jsxs(u,{type:"button",variant:"destructive",size:"sm",onClick:()=>w(!0),children:[e.jsx(B,{className:"h-4 w-4 mr-1"}),"Delete"]}),e.jsxs("div",{className:"flex gap-2 ml-auto",children:[e.jsx(u,{type:"button",variant:"outline",onClick:r,children:"Cancel"}),e.jsx(u,{type:"submit",children:p?"Save":"Create"})]})]})]}),e.jsx(F,{open:M,onOpenChange:w,title:`Delete ${s==null?void 0:s.name}?`,description:"This will permanently delete the client. This action cannot be undone.",onConfirm:L})]})})}function Ae(){const{clients:t}=D(),[g,s]=i.useState(!1),[r,o]=i.useState(null),m=()=>{o(null),s(!0)},c=a=>{o(a),s(!0)},d=()=>{s(!1),o(null)},l=t.filter(a=>a.status==="active"),h=t.filter(a=>a.status!=="active");return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:[e.jsx("div",{children:e.jsx("h1",{className:"text-2xl sm:text-3xl font-semibold tracking-tight",children:"Clients"})}),e.jsxs(u,{onClick:m,className:"w-full sm:w-auto",children:[e.jsx(A,{className:"h-4 w-4 mr-2"}),"Add Client"]})]}),t.length===0?e.jsxs("div",{className:"rounded-lg border bg-card p-12 text-center",children:[e.jsx(V,{className:"h-12 w-12 mx-auto text-muted-foreground/50 mb-4"}),e.jsx("h3",{className:"text-lg font-medium mb-2",children:"No clients yet"}),e.jsx("p",{className:"text-muted-foreground text-sm mb-4",children:"Add your first client to start managing projects and invoices."}),e.jsxs(u,{onClick:m,children:[e.jsx(A,{className:"h-4 w-4 mr-2"}),"Add Client"]})]}):e.jsxs("div",{className:"space-y-6",children:[l.length>0&&e.jsxs("div",{children:[e.jsxs("h2",{className:"text-sm font-medium text-muted-foreground mb-3",children:["Active (",l.length,")"]}),e.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:l.map(a=>e.jsx(P,{client:a,onEdit:c},a.id))})]}),h.length>0&&e.jsxs("div",{children:[e.jsxs("h2",{className:"text-sm font-medium text-muted-foreground mb-3",children:["Inactive/Archived (",h.length,")"]}),e.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:h.map(a=>e.jsx(P,{client:a,onEdit:c},a.id))})]})]}),e.jsx(ce,{open:g,onOpenChange:s,client:r,onClose:d})]})}export{Ae as ClientsPage};
