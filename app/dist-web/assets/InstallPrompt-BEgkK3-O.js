import{r,j as e}from"./vendor-react-wuMqdllU.js";import{a as c}from"./index-BJ9hpEov.js";import{W as x,X as w}from"./vendor-icons-ssgfUAX_.js";import"./vendor-markdown-C3iCDuOK.js";import"./vendor-recharts-tRgwS7-V.js";import"./vendor-radix-DqeMb71O.js";import"./vendor-floating-ui-BD6aHMKr.js";import"./vendor-router-Cm8Qzw9U.js";function D(){const[t,i]=r.useState(null),[p,o]=r.useState(!1),[f,a]=r.useState(!1);r.useEffect(()=>{if(window.matchMedia("(display-mode: standalone)").matches){a(!0);return}const s=localStorage.getItem("pwa-install-dismissed");if(s){const n=parseInt(s,10);if((Date.now()-n)/(1e3*60*60*24)<7)return}const d=n=>{n.preventDefault(),i(n),setTimeout(()=>{o(!0)},3e4)},m=()=>{a(!0),o(!1),i(null)};return window.addEventListener("beforeinstallprompt",d),window.addEventListener("appinstalled",m),()=>{window.removeEventListener("beforeinstallprompt",d),window.removeEventListener("appinstalled",m)}},[]);const u=async()=>{if(t)try{await t.prompt();const{outcome:s}=await t.userChoice;s==="accepted"?console.log("PWA installation accepted"):(console.log("PWA installation dismissed"),localStorage.setItem("pwa-install-dismissed",Date.now().toString())),i(null),o(!1)}catch(s){console.error("Error showing install prompt:",s)}},l=()=>{o(!1),localStorage.setItem("pwa-install-dismissed",Date.now().toString())};return f||!p||!t?null:e.jsx("div",{className:"fixed bottom-4 left-4 right-4 md:left-auto md:right-4 md:max-w-md z-50 animate-in slide-in-from-bottom-5",children:e.jsx("div",{className:"bg-card border border-border rounded-lg shadow-lg p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"flex-shrink-0 w-10 h-10 bg-primary/10 rounded-lg flex items-center justify-center",children:e.jsx(x,{className:"w-5 h-5 text-primary"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"font-semibold text-sm mb-1",children:"Install officeOS"}),e.jsx("p",{className:"text-xs text-muted-foreground mb-3",children:"Add to your home screen for quick access and offline functionality"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(c,{size:"sm",onClick:u,className:"flex-1",children:"Install"}),e.jsx(c,{size:"sm",variant:"ghost",onClick:l,children:"Not now"})]})]}),e.jsx("button",{onClick:l,className:"flex-shrink-0 text-muted-foreground hover:text-foreground transition-colors","aria-label":"Dismiss",children:e.jsx(w,{className:"w-4 h-4"})})]})})})}export{D as InstallPrompt};
